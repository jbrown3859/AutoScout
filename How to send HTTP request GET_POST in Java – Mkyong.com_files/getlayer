"use strict";function cboladebug(){Cbola.Env.DEBUG=!0,localStorage.setItem("cbolaDebug","1")}function rcboladebug(){Cbola.Env.DEBUG=!1,localStorage.setItem("cbolaDebug","0")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if(window.Cbola=window.Cbola||{},Cbola.isObsoleteBrowser=function(){function e(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/gi.test(r)&&-1===r.search("PC")}function t(){var e=r.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):!1}function i(){return r.indexOf("Edge")>-1}function o(){var e=r.match("[A|a]ndroid[ |/]([0-9|.]+)"),t=0;if(null!==e)try{t=e?parseInt(e[1],10):0}catch(i){t=1}return t>=1}function n(){return"undefined"==typeof window["AudioNode"]}var r=window.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0){var s=parseInt(r.substring(a+5,r.indexOf(".",a)));return 9>=s}var l=t();return!i()&&l&&50>l||e()&&o()&&n()},Cbola.isBrowserSupported=!Cbola.isObsoleteBrowser(),!Cbola.isBrowserSupported){console.log("Cbola:: deprecated browser detected");var proxyEl=document.getElementById("carambola_proxy");if(proxyEl){var proxySrcAttr=proxyEl.getAttribute("src"),proxyElParams=proxySrcAttr?proxySrcAttr.split("?"):[];if(proxyElParams.length>1){proxyElParams=proxyElParams[1];var scriptEl=window.document.createElement("script");scriptEl.src="//route.carambo.la/getHelp?"+proxyElParams,scriptEl.type="text/javascript",document.head.appendChild(scriptEl)}}}!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function s(e){var t=new FileReader,i=a(t);return t.readAsArrayBuffer(e),i}function l(e){var t=new FileReader,i=a(t);return t.readAsText(e),i}function d(e){for(var t=new Uint8Array(e),i=new Array(t.length),o=0;o<t.length;o++)i[o]=String.fromCharCode(t[o]);return i.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&v(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?r(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(u)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var i=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",(t.headers||!this.headers)&&(this.headers=new n(t.headers)),this.method=m(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function u(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var i=e.split("="),o=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function b(e){var t=new n,i=e.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach(function(e){var i=e.split(":"),o=i.shift().trim();if(o){var n=i.join(":").trim();t.append(o,n)}}),t}function f(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};n.prototype.append=function(e,o){e=t(e),o=i(o);var n=this.map[e];this.map[e]=n?n+","+o:o},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,o){this.map[t(e)]=i(o)},n.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},n.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),o(e)},n.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},n.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),o(e)},g.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];f.redirect=function(e,t){if(-1===C.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=p,e.Response=f,e.fetch=function(e,t){return new Promise(function(i,o){var n=new p(e,t),r=new XMLHttpRequest;r.onload=function(){var e={status:r.status,statusText:r.statusText,headers:b(r.getAllResponseHeaders()||"")};e.url="responseURL"in r?r.responseURL:e.headers.get("X-Request-URL");var t="response"in r?r.response:r.responseText;i(new f(t,e))},r.onerror=function(){o(new TypeError("Network request failed"))},r.ontimeout=function(){o(new TypeError("Network request failed"))},r.open(n.method,n.url,!0),"include"===n.credentials?r.withCredentials=!0:"omit"===n.credentials&&(r.withCredentials=!1),"responseType"in r&&g.blob&&(r.responseType="blob"),n.headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send("undefined"==typeof n._bodyInit?null:n._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),function(e){function t(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function n(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void o._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null===i)return void(1===e._state?r:a)(t.promise,e._value);var o;try{o=i(e._value)}catch(n){return void a(t.promise,n)}r(t.promise,o)}))}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void d(i(n,t),e)}e._state=1,e._value=t,s(e)}catch(r){a(e,r)}}function a(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;i>t;t++)n(e,e._deferreds[t]);e._deferreds=null}function l(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,r(t,e))},function(e){i||(i=!0,a(t,e))})}catch(o){if(i)return;i=!0,a(t,o)}}var c=setTimeout;o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,i){var o=new this.constructor(t);return n(this,new l(e,i,o)),o},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,i){function o(r,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){o(r,e)},i)}t[r]=a,0===--n&&e(t)}catch(l){i(l)}}if(0===t.length)return e([]);for(var n=t.length,r=0;r<t.length;r++)o(r,t[r])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,i){i(e)})},o.race=function(e){return new o(function(t,i){for(var o=0,n=e.length;n>o;o++)e[o].then(t,i)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this),Cbola.tmp_=window._,function(){function e(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function t(e,t,i,o){for(var n=-1,r=null==e?0:e.length;++n<r;){var a=e[n];t(o,a,i(a),e)}return o}function i(e,t){for(var i=-1,o=null==e?0:e.length;++i<o&&t(e[i],i,e)!==!1;);return e}function o(e,t){for(var i=-1,o=null==e?0:e.length,n=0,r=[];++i<o;){var a=e[i];t(a,i,e)&&(r[n++]=a)}return r}function n(e,t){return!!(null==e?0:e.length)&&p(e,t,0)>-1}function r(e,t,i){for(var o=-1,n=null==e?0:e.length;++o<n;)if(i(t,e[o]))return!0;return!1}function a(e,t){for(var i=-1,o=null==e?0:e.length,n=Array(o);++i<o;)n[i]=t(e[i],i,e);return n}function s(e,t){for(var i=-1,o=t.length,n=e.length;++i<o;)e[n+i]=t[i];return e}function l(e,t,i,o){var n=-1,r=null==e?0:e.length;for(o&&r&&(i=e[++n]);++n<r;)i=t(i,e[n],n,e);return i}function d(e,t){for(var i=-1,o=null==e?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}function c(e){return e.split("")}function h(e){return e.match(Zr)||[]}function m(e,t,i,o){for(var n=e.length,r=i+(o?1:-1);o?r--:++r<n;)if(t(e[r],r,e))return r;return-1}function p(e,t,i){return t===t?B(e,t,i):m(e,u,i)}function u(e){return e!==e}function b(e){return function(t){return null==t?_n:t[e]}}function f(e){return function(t){return null==e?_n:e[t]}}function g(e,t,i,o,n){return n(e,function(e,n,r){i=o?(o=!1,e):t(i,e,n,r)}),i}function y(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].c;return e}function v(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}function w(e){return function(t){return e(t)}}function _(e,t){return a(t,function(t){return e[t]})}function C(e,t){return e.has(t)}function I(e,t){for(var i=e.length;i--&&p(t,e[i],0)>-1;);return i}function x(e,t){for(var i=e.length,o=0;i--;)e[i]===t&&++o;return o}function E(e){return"\\"+ns[e]}function S(e,t){return null==e?_n:e[t]}function T(e){return $a.test(e)}function A(e){return Ja.test(e)}function L(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}function O(e){var t=-1,i=Array(e.size);return e.forEach(function(e,o){i[++t]=[o,e]}),i}function k(e,t){return function(i){return e(t(i))}}function P(e,t){for(var i=-1,o=e.length,n=0,r=[];++i<o;){var a=e[i];a!==t&&a!==Tn||(e[i]=Tn,r[n++]=i)}return r}function N(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function B(e,t,i){for(var o=i-1,n=e.length;++o<n;)if(e[o]===t)return o;return-1}function D(e){return T(e)?R(e):vs(e)}function M(e){return T(e)?F(e):c(e)}function R(e){for(var t=Ka.lastIndex=0;Ka.test(e);)++t;return t}function F(e){return e.match(Ka)||[]}function V(e){return e.match(Qa)||[]}function U(e){if(Lo(e)&&!jl(e)&&!(e instanceof W)){if(e instanceof j)return e;if(Ts.call(e,"__wrapped__"))return Fi(e)}return new j(e)}function z(){}function j(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=_n}function W(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$n,this.__views__=[]}function H(){var e=new W(this.__wrapped__);return e.__actions__=At(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=At(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=At(this.__views__),
e}function q(){if(this.__filtered__){var e=new W(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function G(){var e=this.__wrapped__.value(),t=this.__dir__,i=jl(e),o=0>t,n=i?e.length:0,r=di(0,n,this.__views__),a=r.start,s=r.end,l=s-a,d=o?s:a-1,c=this.__iteratees__,h=c.length,m=0,p=$s(l,this.__takeCount__);if(!i||!o&&n==l&&p==l)return bt(e,this.__actions__);var u=[];e:for(;l--&&p>m;){d+=t;for(var b=-1,f=e[d];++b<h;){var g=c[b],y=g.iteratee,v=g.type,w=y(f);if(v==Gn)f=w;else if(!w){if(v==qn)continue e;break e}}u[m++]=f}return u}function X(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function Y(){this.__data__=sl?sl(null):{},this.size=0}function Z(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function K(e){var t=this.__data__;if(sl){var i=t[e];return i===En?_n:i}return Ts.call(t,e)?t[e]:_n}function Q(e){var t=this.__data__;return sl?t[e]!==_n:Ts.call(t,e)}function $(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=sl&&t===_n?En:t,this}function J(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function ee(){this.__data__=[],this.size=0}function te(e){var t=this.__data__,i=Ce(t,e);return!(0>i||(i==t.length-1?t.pop():Us.call(t,i,1),--this.size,0))}function ie(e){var t=this.__data__,i=Ce(t,e);return 0>i?_n:t[i][1]}function oe(e){return Ce(this.__data__,e)>-1}function ne(e,t){var i=this.__data__,o=Ce(i,e);return 0>o?(++this.size,i.push([e,t])):i[o][1]=t,this}function re(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function ae(){this.size=0,this.__data__={hash:new X,map:new(ol||J),string:new X}}function se(e){var t=ri(this,e).delete(e);return this.size-=t?1:0,t}function le(e){return ri(this,e).get(e)}function de(e){return ri(this,e).has(e)}function ce(e,t){var i=ri(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}function he(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new re;++t<i;)this.add(e[t])}function me(e){return this.__data__.set(e,En),this}function pe(e){return this.__data__.has(e)}function ue(e){this.size=(this.__data__=new J(e)).size}function be(){this.__data__=new J,this.size=0}function fe(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function ge(e){return this.__data__.get(e)}function ye(e){return this.__data__.has(e)}function ve(e,t){var i=this.__data__;if(i instanceof J){var o=i.__data__;if(!ol||o.length<In-1)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new re(o)}return i.set(e,t),this.size=i.size,this}function we(e,t){var i=jl(e),o=!i&&zl(e),n=!i&&!o&&Wl(e),r=!i&&!o&&!n&&Xl(e),a=i||o||n||r,s=a?v(e.length,String):[],l=s.length;for(var d in e)!t&&!Ts.call(e,d)||a&&("length"==d||n&&("offset"==d||"parent"==d)||r&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||gi(d,l))||s.push(d);return s}function _e(e,t,i){var o=e[t];Ts.call(e,t)&&_o(o,i)&&(i!==_n||t in e)||Se(e,t,i)}function Ce(e,t){for(var i=e.length;i--;)if(_o(e[i][0],t))return i;return-1}function Ie(e,t,i,o){return vl(e,function(e,n,r){t(o,e,i(e),r)}),o}function xe(e,t){return e&&Lt(t,Go(t),e)}function Ee(e,t){return e&&Lt(t,Xo(t),e)}function Se(e,t,i){"__proto__"==t&&Hs?Hs(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Te(e,t){for(var i=-1,o=t.length,n=Array(o),r=null==e;++i<o;)n[i]=r?_n:Wo(e,t[i]);return n}function Ae(e,t,i){return e===e&&(i!==_n&&(e=i>=e?e:i),t!==_n&&(e=e>=t?e:t)),e}function Le(e,t,o,n,r,a){var s,l=t&An,d=t&Ln,c=t&On;if(o&&(s=r?o(e,n,r,a):o(e)),s!==_n)return s;if(!Ao(e))return e;var h=jl(e);if(h){if(s=mi(e),!l)return At(e,s)}else{var m=Tl(e),p=m==sr||m==lr;if(Wl(e))return yt(e,l);if(m==mr||m==er||p&&!r){if(s=d||p?{}:pi(e),!l)return d?kt(e,Ee(s,e)):Ot(e,xe(s,e))}else{if(!ts[m])return r?e:{};s=ui(e,m,l)}}a||(a=new ue);var u=a.get(e);if(u)return u;if(a.set(e,s),Gl(e))return e.forEach(function(i){s.add(Le(i,t,o,i,e,a))}),s;if(Hl(e))return e.forEach(function(i,n){s.set(n,Le(i,t,o,n,e,a))}),s;var b=c?d?ti:ei:d?Xo:Go,f=h?_n:b(e);return i(f||e,function(i,n){f&&(n=i,i=e[n]),_e(s,n,Le(i,t,o,n,e,a))}),s}function Oe(e,t,i,o){var s=-1,l=n,d=!0,c=e.length,h=[],m=t.length;if(!c)return h;i&&(t=a(t,w(i))),o?(l=r,d=!1):t.length>=In&&(l=C,d=!1,t=new he(t));e:for(;++s<c;){var p=e[s],u=null==i?p:i(p);if(p=o||0!==p?p:0,d&&u===u){for(var b=m;b--;)if(t[b]===u)continue e;h.push(p)}else l(t,u,o)||h.push(p)}return h}function ke(e,t){var i=[];return vl(e,function(e,o,n){t(e,o,n)&&i.push(e)}),i}function Pe(e,t,i,o,n){var r=-1,a=e.length;for(i||(i=fi),n||(n=[]);++r<a;){var l=e[r];t>0&&i(l)?t>1?Pe(l,t-1,i,o,n):s(n,l):o||(n[n.length]=l)}return n}function Ne(e,t){return e&&wl(e,t,Go)}function Be(e,t){return o(t,function(t){return So(e[t])})}function De(e,t){t=ft(t,e);for(var i=0,o=t.length;null!=e&&o>i;)e=e[Di(t[i++])];return i&&i==o?e:_n}function Me(e,t,i){var o=t(e);return jl(e)?o:s(o,i(e))}function Re(e){return null==e?e===_n?vr:hr:Ws&&Ws in Object(e)?li(e):Li(e)}function Fe(e,t){return null!=e&&Ts.call(e,t)}function Ve(e,t){return null!=e&&t in Object(e)}function Ue(t,i,o){i=ft(i,t),t=ki(t,i);var n=null==t?t:t[Di(qi(i))];return null==n?_n:e(n,t,o)}function ze(e){return Lo(e)&&Re(e)==er}function je(e,t,i,o,n){return e===t||(null==e||null==t||!Lo(e)&&!Lo(t)?e!==e&&t!==t:We(e,t,i,o,je,n))}function We(e,t,i,o,n,r){var a=jl(e),s=jl(t),l=a?tr:Tl(e),d=s?tr:Tl(t);l=l==er?mr:l,d=d==er?mr:d;var c=l==mr,h=d==mr,m=l==d;if(m&&Wl(e)){if(!Wl(t))return!1;a=!0,c=!1}if(m&&!c)return r||(r=new ue),a||Xl(e)?Kt(e,t,i,o,n,r):Qt(e,t,l,i,o,n,r);if(!(i&kn)){var p=c&&Ts.call(e,"__wrapped__"),u=h&&Ts.call(t,"__wrapped__");if(p||u){var b=p?e.value():e,f=u?t.value():t;return r||(r=new ue),n(b,f,i,o,r)}}return!!m&&(r||(r=new ue),$t(e,t,i,o,n,r))}function He(e){return Lo(e)&&Tl(e)==dr}function qe(e,t,i,o){var n=i.length,r=n,a=!o;if(null==e)return!r;for(e=Object(e);n--;){var s=i[n];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<r;){s=i[n];var l=s[0],d=e[l],c=s[1];if(a&&s[2]){if(d===_n&&!(l in e))return!1}else{var h=new ue;if(o)var m=o(d,c,l,e,t,h);if(!(m===_n?je(c,d,kn|Pn,o,h):m))return!1}}return!0}function Ge(e){return!(!Ao(e)||Ci(e))&&(So(e)?Ps:ta).test(Mi(e))}function Xe(e){return Lo(e)&&Re(e)==br}function Ye(e){return Lo(e)&&Tl(e)==fr}function Ze(e){return Lo(e)&&To(e.length)&&!!es[Re(e)]}function Ke(e){return"function"==typeof e?e:null==e?mn:"object"==typeof e?jl(e)?tt(e[0],e[1]):et(e):gn(e)}function Qe(e){if(!Ii(e))return Ks(e);var t=[];for(var i in Object(e))Ts.call(e,i)&&"constructor"!=i&&t.push(i);return t}function $e(e){if(!Ao(e))return Ai(e);var t=Ii(e),i=[];for(var o in e)("constructor"!=o||!t&&Ts.call(e,o))&&i.push(o);return i}function Je(e,t){var i=-1,o=Co(e)?Array(e.length):[];return vl(e,function(e,n,r){o[++i]=t(e,n,r)}),o}function et(e){var t=ai(e);return 1==t.length&&t[0][2]?Ei(t[0][0],t[0][1]):function(i){return i===e||qe(i,e,t)}}function tt(e,t){return vi(e)&&xi(t)?Ei(Di(e),t):function(i){var o=Wo(i,e);return o===_n&&o===t?qo(i,e):je(t,o,kn|Pn)}}function it(e,t,i){var o=-1;return t=a(t.length?t:[mn],w(ni())),y(Je(e,function(e,i,n){return{a:a(t,function(t){return t(e)}),b:++o,c:e}}),function(e,t){return Et(e,t,i)})}function ot(e){return function(t){return De(t,e)}}function nt(e,t){for(var i=e?t.length:0,o=i-1;i--;){var n=t[i];if(i==o||n!==r){var r=n;gi(n)?Us.call(e,n,1):ut(e,n)}}return e}function rt(e,t){return e+Gs(el()*(t-e+1))}function at(e,t,i,o){for(var n=-1,r=Qs(qs((t-e)/(i||1)),0),a=Array(r);r--;)a[o?r:++n]=e,e+=i;return a}function st(e,t){var i="";if(!e||1>t||t>Zn)return i;do t%2&&(i+=e),t=Gs(t/2),t&&(e+=e);while(t);return i}function lt(e,t){return Ll(Oi(e,t,mn),e+"")}function dt(e,t,i,o){if(!Ao(e))return e;t=ft(t,e);for(var n=-1,r=t.length,a=r-1,s=e;null!=s&&++n<r;){var l=Di(t[n]),d=i;if(n!=a){var c=s[l];d=o?o(c,l,s):_n,d===_n&&(d=Ao(c)?c:gi(t[n+1])?[]:{})}_e(s,l,d),s=s[l]}return e}function ct(e,t,i){var o=-1,n=e.length;0>t&&(t=-t>n?0:n+t),i=i>n?n:i,0>i&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var r=Array(n);++o<n;)r[o]=e[o+t];return r}function ht(e,t){var i;return vl(e,function(e,o,n){return i=t(e,o,n),!i}),!!i}function mt(e){if("string"==typeof e)return e;if(jl(e))return a(e,mt)+"";if(Mo(e))return gl?gl.call(e):"";var t=e+"";return"0"==t&&1/e==-Yn?"-0":t}function pt(e,t,i){var o=-1,a=n,s=e.length,l=!0,d=[],c=d;if(i)l=!1,a=r;else if(s>=In){var h=t?null:Il(e);if(h)return N(h);l=!1,a=C,c=new he}else c=t?[]:d;e:for(;++o<s;){var m=e[o],p=t?t(m):m;if(m=i||0!==m?m:0,l&&p===p){for(var u=c.length;u--;)if(c[u]===p)continue e;t&&c.push(p),d.push(m)}else a(c,p,i)||(c!==d&&c.push(p),d.push(m))}return d}function ut(e,t){return t=ft(t,e),e=ki(e,t),null==e||delete e[Di(qi(t))]}function bt(e,t){var i=e;return i instanceof W&&(i=i.value()),l(t,function(e,t){return t.func.apply(t.thisArg,s([e],t.args))},i)}function ft(e,t){return jl(e)?e:vi(e,t)?[e]:Ol(jo(e))}function gt(e,t,i){var o=e.length;return i=i===_n?o:i,!t&&i>=o?e:ct(e,t,i)}function yt(e,t){if(t)return e.slice();var i=e.length,o=Ms?Ms(i):new e.constructor(i);return e.copy(o),o}function vt(e){var t=new e.constructor(e.byteLength);return new Ds(t).set(new Ds(e)),t}function wt(e,t){return new e.constructor(t?vt(e.buffer):e.buffer,e.byteOffset,e.byteLength)}function _t(e){var t=new e.constructor(e.source,$r.exec(e));return t.lastIndex=e.lastIndex,t}function Ct(e){return fl?Object(fl.call(e)):{}}function It(e,t){return new e.constructor(t?vt(e.buffer):e.buffer,e.byteOffset,e.length)}function xt(e,t){if(e!==t){var i=e!==_n,o=null===e,n=e===e,r=Mo(e),a=t!==_n,s=null===t,l=t===t,d=Mo(t);if(!s&&!d&&!r&&e>t||r&&a&&l&&!s&&!d||o&&a&&l||!i&&l||!n)return 1;if(!o&&!r&&!d&&t>e||d&&i&&n&&!o&&!r||s&&i&&n||!a&&n||!l)return-1}return 0}function Et(e,t,i){for(var o=-1,n=e.a,r=t.a,a=n.length,s=i.length;++o<a;){var l=xt(n[o],r[o]);if(l)return o>=s?l:l*("desc"==i[o]?-1:1)}return e.b-t.b}function St(e,t,i,o){for(var n=-1,r=e.length,a=i.length,s=-1,l=t.length,d=Qs(r-a,0),c=Array(l+d),h=!o;++s<l;)c[s]=t[s];for(;++n<a;)(h||r>n)&&(c[i[n]]=e[n]);for(;d--;)c[s++]=e[n++];return c}function Tt(e,t,i,o){for(var n=-1,r=e.length,a=-1,s=i.length,l=-1,d=t.length,c=Qs(r-s,0),h=Array(c+d),m=!o;++n<c;)h[n]=e[n];for(var p=n;++l<d;)h[p+l]=t[l];for(;++a<s;)(m||r>n)&&(h[p+i[a]]=e[n++]);return h}function At(e,t){var i=-1,o=e.length;for(t||(t=Array(o));++i<o;)t[i]=e[i];return t}function Lt(e,t,i,o){var n=!i;i||(i={});for(var r=-1,a=t.length;++r<a;){var s=t[r],l=o?o(i[s],e[s],s,i,e):_n;l===_n&&(l=e[s]),n?Se(i,s,l):_e(i,s,l)}return i}function Ot(e,t){return Lt(e,El(e),t)}function kt(e,t){return Lt(e,Sl(e),t)}function Pt(e,i){return function(o,n){var r=jl(o)?t:Ie,a=i?i():{};return r(o,e,ni(n,2),a)}}function Nt(e){return lt(function(t,i){var o=-1,n=i.length,r=n>1?i[n-1]:_n,a=n>2?i[2]:_n;for(r=e.length>3&&"function"==typeof r?(n--,r):_n,a&&yi(i[0],i[1],a)&&(r=3>n?_n:r,n=1),t=Object(t);++o<n;){var s=i[o];s&&e(t,s,o,r)}return t})}function Bt(e,t){return function(i,o){if(null==i)return i;if(!Co(i))return e(i,o);for(var n=i.length,r=t?n:-1,a=Object(i);(t?r--:++r<n)&&o(a[r],r,a)!==!1;);return i}}function Dt(e){return function(t,i,o){for(var n=-1,r=Object(t),a=o(t),s=a.length;s--;){var l=a[e?s:++n];if(i(r[l],l,r)===!1)break}return t}}function Mt(e,t,i){function o(){return(this&&this!==ds&&this instanceof o?r:e).apply(n?i:this,arguments)}var n=t&Nn,r=Vt(e);return o}function Rt(e){return function(t){t=jo(t);var i=T(t)?M(t):_n,o=i?i[0]:t.charAt(0),n=i?gt(i,1).join(""):t.slice(1);return o[e]()+n}}function Ft(e){return function(t){return l(cn(tn(t).replace(Ya,"")),e,"")}}function Vt(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=yl(e.prototype),o=e.apply(i,t);return Ao(o)?o:i}}function Ut(t,i,o){function n(){for(var a=arguments.length,s=Array(a),l=a,d=oi(n);l--;)s[l]=arguments[l];var c=3>a&&s[0]!==d&&s[a-1]!==d?[]:P(s,d);return a-=c.length,o>a?Gt(t,i,jt,n.placeholder,_n,s,c,_n,_n,o-a):e(this&&this!==ds&&this instanceof n?r:t,this,s)}var r=Vt(t);return n}function zt(e){return function(t,i,o){var n=Object(t);if(!Co(t)){var r=ni(i,3);t=Go(t),i=function(e){return r(n[e],e,n)}}var a=e(t,i,o);return a>-1?n[r?t[a]:a]:_n}}function jt(e,t,i,o,n,r,a,s,l,d){function c(){for(var g=arguments.length,y=Array(g),v=g;v--;)y[v]=arguments[v];if(u)var w=oi(c),_=x(y,w);if(o&&(y=St(y,o,n,u)),r&&(y=Tt(y,r,a,u)),g-=_,u&&d>g)return Gt(e,t,jt,c.placeholder,i,y,P(y,w),s,l,d-g);var C=m?i:this,I=p?C[e]:e;return g=y.length,s?y=Pi(y,s):b&&g>1&&y.reverse(),h&&g>l&&(y.length=l),this&&this!==ds&&this instanceof c&&(I=f||Vt(I)),I.apply(C,y)}var h=t&Un,m=t&Nn,p=t&Bn,u=t&(Mn|Rn),b=t&jn,f=p?_n:Vt(e);return c}function Wt(e,t){t=t===_n?" ":mt(t);var i=t.length;if(2>i)return i?st(t,e):t;var o=st(t,qs(e/D(t)));return T(t)?gt(M(o),0,e).join(""):o.slice(0,e)}function Ht(t,i,o,n){function r(){for(var i=-1,l=arguments.length,d=-1,c=n.length,h=Array(c+l),m=this&&this!==ds&&this instanceof r?s:t;++d<c;)h[d]=n[d];for(;l--;)h[d++]=arguments[++i];return e(m,a?o:this,h)}var a=i&Nn,s=Vt(t);return r}function qt(e){return function(t,i,o){return o&&"number"!=typeof o&&yi(t,i,o)&&(i=o=_n),t=Vo(t),i===_n?(i=t,t=0):i=Vo(i),o=o===_n?i>t?1:-1:Vo(o),at(t,i,o,e)}}function Gt(e,t,i,o,n,r,a,s,l,d){var c=t&Mn,h=c?a:_n,m=c?_n:a,p=c?r:_n,u=c?_n:r;t|=c?Fn:Vn,t&=~(c?Vn:Fn),t&Dn||(t&=~(Nn|Bn));var b=[e,t,n,p,h,u,m,s,l,d],f=i.apply(_n,b);return _i(e)&&Al(f,b),f.placeholder=o,Ni(f,e,t)}function Xt(e){var t=Math[e];return function(e,i){if(e=zo(e),i=null==i?0:$s(Uo(i),292)){var o=(jo(e)+"e").split("e");return o=(jo(t(o[0]+"e"+(+o[1]+i)))+"e").split("e"),+(o[0]+"e"+(+o[1]-i))}return t(e)}}function Yt(e,t,i,o,n,r,a,s){var l=t&Bn;if(!l&&"function"!=typeof e)throw new TypeError(xn);var d=o?o.length:0;if(d||(t&=~(Fn|Vn),o=n=_n),a=a===_n?a:Qs(Uo(a),0),s=s===_n?s:Uo(s),d-=n?n.length:0,t&Vn){var c=o,h=n;o=n=_n}var m=l?_n:xl(e),p=[e,t,i,o,n,c,h,r,a,s];if(m&&Ti(p,m),e=p[0],t=p[1],i=p[2],o=p[3],n=p[4],s=p[9]=p[9]===_n?l?0:e.length:Qs(p[9]-d,0),!s&&t&(Mn|Rn)&&(t&=~(Mn|Rn)),t&&t!=Nn)u=t==Mn||t==Rn?Ut(e,t,s):t!=Fn&&t!=(Nn|Fn)||n.length?jt.apply(_n,p):Ht(e,t,i,o);else var u=Mt(e,t,i);return Ni((m?_l:Al)(u,p),e,t)}function Zt(e,t,i,o){return e===_n||_o(e,xs[i])&&!Ts.call(o,i)?t:e}function Kt(e,t,i,o,n,r){var a=i&kn,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=r.get(e);if(c&&r.get(t))return c==t;var h=-1,m=!0,p=i&Pn?new he:_n;for(r.set(e,t),r.set(t,e);++h<s;){var u=e[h],b=t[h];if(o)var f=a?o(b,u,h,t,e,r):o(u,b,h,e,t,r);if(f!==_n){if(f)continue;m=!1;break}if(p){if(!d(t,function(e,t){return C(p,t)||u!==e&&!n(u,e,i,o,r)?void 0:p.push(t)})){m=!1;break}}else if(u!==b&&!n(u,b,i,o,r)){m=!1;break}}return r.delete(e),r.delete(t),m}function Qt(e,t,i,o,n,r,a){switch(i){case Cr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _r:return!(e.byteLength!=t.byteLength||!r(new Ds(e),new Ds(t)));case or:case nr:case cr:return _o(+e,+t);case ar:return e.name==t.name&&e.message==t.message;case br:case gr:return e==t+"";case dr:var s=O;case fr:var l=o&kn;if(s||(s=N),e.size!=t.size&&!l)return!1;var d=a.get(e);if(d)return d==t;o|=Pn,a.set(e,t);var c=Kt(s(e),s(t),o,n,r,a);return a.delete(e),c;case yr:if(fl)return fl.call(e)==fl.call(t)}return!1}function $t(e,t,i,o,n,r){var a=i&kn,s=ei(e),l=s.length;if(l!=ei(t).length&&!a)return!1;for(var d=l;d--;){var c=s[d];if(!(a?c in t:Ts.call(t,c)))return!1}var h=r.get(e);if(h&&r.get(t))return h==t;var m=!0;r.set(e,t),r.set(t,e);for(var p=a;++d<l;){c=s[d];var u=e[c],b=t[c];if(o)var f=a?o(b,u,c,t,e,r):o(u,b,c,e,t,r);if(!(f===_n?u===b||n(u,b,i,o,r):f)){m=!1;break}p||(p="constructor"==c)}if(m&&!p){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(m=!1)}return r.delete(e),r.delete(t),m}function Jt(e){return Ll(Oi(e,_n,zi),e+"")}function ei(e){return Me(e,Go,El)}function ti(e){return Me(e,Xo,Sl)}function ii(e){for(var t=e.name+"",i=dl[t],o=Ts.call(dl,t)?i.length:0;o--;){var n=i[o],r=n.func;if(null==r||r==e)return n.name}return t}function oi(e){return(Ts.call(U,"placeholder")?U:e).placeholder}function ni(){var e=U.iteratee||pn;return e=e===pn?Ke:e,arguments.length?e(arguments[0],arguments[1]):e}function ri(e,t){var i=e.__data__;return wi(t)?i["string"==typeof t?"string":"hash"]:i.map}function ai(e){for(var t=Go(e),i=t.length;i--;){var o=t[i],n=e[o];t[i]=[o,n,xi(n)]}return t}function si(e,t){var i=S(e,t);return Ge(i)?i:_n}function li(e){var t=Ts.call(e,Ws),i=e[Ws];try{e[Ws]=_n;var o=!0}catch(e){}var n=Ls.call(e);return o&&(t?e[Ws]=i:delete e[Ws]),n}function di(e,t,i){for(var o=-1,n=i.length;++o<n;){var r=i[o],a=r.size;switch(r.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=$s(t,e+a);break;case"takeRight":e=Qs(e,t-a)}}return{start:e,end:t}}function ci(e){var t=e.match(Xr);return t?t[1].split(Yr):[]}function hi(e,t,i){t=ft(t,e);for(var o=-1,n=t.length,r=!1;++o<n;){var a=Di(t[o]);if(!(r=null!=e&&i(e,a)))break;e=e[a]}return r||++o!=n?r:(n=null==e?0:e.length,!!n&&To(n)&&gi(a,n)&&(jl(e)||zl(e)))}function mi(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&Ts.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function pi(e){return"function"!=typeof e.constructor||Ii(e)?{}:yl(Rs(e))}function ui(e,t,i){var o=e.constructor;switch(t){case _r:return vt(e);case or:case nr:return new o(+e);case Cr:return wt(e,i);case Ir:case xr:case Er:case Sr:case Tr:case Ar:case Lr:case Or:case kr:return It(e,i);case dr:return new o;case cr:case gr:return new o(e);case br:return _t(e);case fr:return new o;case yr:return Ct(e)}}function bi(e,t){var i=t.length;if(!i)return e;var o=i-1;return t[o]=(i>1?"& ":"")+t[o],t=t.join(i>2?", ":" "),e.replace(Gr,"{\n/* [wrapped with "+t+"] */\n")}function fi(e){return jl(e)||zl(e)||!!(zs&&e&&e[zs])}function gi(e,t){var i=typeof e;return t=null==t?Zn:t,!!t&&("number"==i||"symbol"!=i&&oa.test(e))&&e>-1&&e%1==0&&t>e}function yi(e,t,i){if(!Ao(i))return!1;var o=typeof t;return!!("number"==o?Co(i)&&gi(t,i.length):"string"==o&&t in i)&&_o(i[t],e)}function vi(e,t){if(jl(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Mo(e))||zr.test(e)||!Ur.test(e)||null!=t&&e in Object(t)}function wi(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function _i(e){var t=ii(e),i=U[t];if("function"!=typeof i||!(t in W.prototype))return!1;if(e===i)return!0;var o=xl(i);return!!o&&e===o[0]}function Ci(e){return!!As&&As in e}function Ii(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xs)}function xi(e){return e===e&&!Ao(e)}function Ei(e,t){return function(i){return null!=i&&i[e]===t&&(t!==_n||e in Object(i))}}function Si(e){var t=bo(e,function(e){return i.size===Sn&&i.clear(),e}),i=t.cache;return t}function Ti(e,t){var i=e[1],o=t[1],n=i|o,r=(Nn|Bn|Un)>n,a=o==Un&&i==Mn||o==Un&&i==zn&&e[7].length<=t[8]||o==(Un|zn)&&t[7].length<=t[8]&&i==Mn;if(!r&&!a)return e;o&Nn&&(e[2]=t[2],n|=i&Nn?0:Dn);var s=t[3];if(s){var l=e[3];e[3]=l?St(l,s,t[4]):s,e[4]=l?P(e[3],Tn):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?Tt(l,s,t[6]):s,e[6]=l?P(e[5],Tn):t[6]),s=t[7],s&&(e[7]=s),o&Un&&(e[8]=null==e[8]?t[8]:$s(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n,e}function Ai(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}function Li(e){return Ls.call(e)}function Oi(t,i,o){return i=Qs(i===_n?t.length-1:i,0),function(){for(var n=arguments,r=-1,a=Qs(n.length-i,0),s=Array(a);++r<a;)s[r]=n[i+r];r=-1;for(var l=Array(i+1);++r<i;)l[r]=n[r];return l[i]=o(s),e(t,this,l)}}function ki(e,t){return t.length<2?e:De(e,ct(t,0,-1))}function Pi(e,t){for(var i=e.length,o=$s(t.length,i),n=At(e);o--;){var r=t[o];e[o]=gi(r,i)?n[r]:_n}return e}function Ni(e,t,i){var o=t+"";return Ll(e,bi(o,Ri(ci(o),i)))}function Bi(e){var t=0,i=0;return function(){var o=Js(),n=Hn-(o-i);if(i=o,n>0){if(++t>=Wn)return arguments[0]}else t=0;return e.apply(_n,arguments)}}function Di(e){if("string"==typeof e||Mo(e))return e;var t=e+"";return"0"==t&&1/e==-Yn?"-0":t}function Mi(e){if(null!=e){try{return Ss.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ri(e,t){return i(Jn,function(i){var o="_."+i[0];t&i[1]&&!n(e,o)&&e.push(o)}),e.sort()}function Fi(e){if(e instanceof W)return e.clone();var t=new j(e.__wrapped__,e.__chain__);return t.__actions__=At(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Vi(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0],o=e;o--;)t[o-1]=arguments[o];return s(jl(i)?At(i):[i],Pe(t,1))}function Ui(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var n=null==i?0:Uo(i);return 0>n&&(n=Qs(o+n,0)),m(e,ni(t,3),n)}function zi(e){return(null==e?0:e.length)?Pe(e,1):[]}function ji(e){return e&&e.length?e[0]:_n}function Wi(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var n=null==i?0:Uo(i);return 0>n&&(n=Qs(o+n,0)),p(e,t,n)}function Hi(e,t){return null==e?"":Zs.call(e,t)}function qi(e){var t=null==e?0:e.length;return t?e[t-1]:_n}function Gi(e,t){var i=[];if(!e||!e.length)return i;var o=-1,n=[],r=e.length;for(t=ni(t,3);++o<r;){var a=e[o];t(a,o,e)&&(i.push(a),n.push(o))}return nt(e,n),i}function Xi(e){return null==e?e:tl.call(e)}function Yi(e){return e&&e.length?pt(e):[]}function Zi(e){if(!e||!e.length)return[];var t=0;return e=o(e,function(e){return Io(e)?(t=Qs(e.length,t),!0):void 0}),v(t,function(t){return a(e,b(t))})}function Ki(e){var t=U(e);return t.__chain__=!0,t}function Qi(e,t){return t(e),e}function $i(e,t){return t(e)}function Ji(){return Ki(this)}function eo(){return new j(this.value(),this.__chain__)}function to(){this.__values__===_n&&(this.__values__=Fo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?_n:this.__values__[this.__index__++]}}function io(){return this}function oo(e){for(var t,i=this;i instanceof z;){var o=Fi(i);o.__index__=0,o.__values__=_n,t?n.__wrapped__=o:t=o;var n=o;i=i.__wrapped__}return n.__wrapped__=e,t}function no(){var e=this.__wrapped__;if(e instanceof W){var t=e;return this.__actions__.length&&(t=new W(this)),t=t.reverse(),t.__actions__.push({func:$i,args:[Xi],thisArg:_n}),new j(t,this.__chain__)}return this.thru(Xi)}function ro(){return bt(this.__wrapped__,this.__actions__)}function ao(e,t){return(jl(e)?o:ke)(e,ni(t,3))}function so(e,t){return(jl(e)?i:vl)(e,ni(t,3))}function lo(e,t){return(jl(e)?a:Je)(e,ni(t,3))}function co(e,t,i){var o=jl(e)?l:g,n=arguments.length<3;return o(e,ni(t,4),i,n,vl)}function ho(e){if(null==e)return 0;if(Co(e))return Do(e)?D(e):e.length;var t=Tl(e);return t==dr||t==fr?e.size:Qe(e).length}function mo(e,t,i){var o=jl(e)?d:ht;return i&&yi(e,t,i)&&(t=_n),o(e,ni(t,3))}function po(e,t){var i;if("function"!=typeof t)throw new TypeError(xn);return e=Uo(e),function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=_n),i}}function uo(e,t,i){function o(t){var i=m,o=p;return m=p=_n,y=t,b=e.apply(o,i)}function n(e){return y=e,f=setTimeout(s,t),v?o(e):b}function r(e){var i=e-g,o=e-y,n=t-i;return w?$s(n,u-o):n}function a(e){var i=e-g,o=e-y;return g===_n||i>=t||0>i||w&&o>=u}function s(){var e=Vl();return a(e)?l(e):(f=setTimeout(s,r(e)),_n)}function l(e){return f=_n,_&&m?o(e):(m=p=_n,b)}function d(){f!==_n&&clearTimeout(f),y=0,m=g=p=f=_n}function c(){return f===_n?b:l(Vl())}function h(){var e=Vl(),i=a(e);if(m=arguments,p=this,g=e,i){if(f===_n)return n(g);if(w)return f=setTimeout(s,t),o(g)}return f===_n&&(f=setTimeout(s,t)),b}var m,p,u,b,f,g,y=0,v=!1,w=!1,_=!0;if("function"!=typeof e)throw new TypeError(xn);return t=zo(t)||0,Ao(i)&&(v=!!i.leading,w="maxWait"in i,u=w?Qs(zo(i.maxWait)||0,t):u,_="trailing"in i?!!i.trailing:_),h.cancel=d,h.flush=c,h}function bo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(xn);var i=function(){var o=arguments,n=t?t.apply(this,o):o[0],r=i.cache;if(r.has(n))return r.get(n);var a=e.apply(this,o);return i.cache=r.set(n,a)||r,a};return i.cache=new(bo.Cache||re),i}function fo(e){if("function"!=typeof e)throw new TypeError(xn);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function go(e){return po(2,e)}function yo(e,t,i){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError(xn);return Ao(i)&&(o="leading"in i?!!i.leading:o,n="trailing"in i?!!i.trailing:n),uo(e,t,{leading:o,maxWait:t,trailing:n})}function vo(e){return Le(e,On)}function wo(e){return Le(e,An|On)}function _o(e,t){return e===t||e!==e&&t!==t}function Co(e){return null!=e&&To(e.length)&&!So(e)}function Io(e){return Lo(e)&&Co(e)}function xo(e){if(null==e)return!0;if(Co(e)&&(jl(e)||"string"==typeof e||"function"==typeof e.splice||Wl(e)||Xl(e)||zl(e)))return!e.length;var t=Tl(e);if(t==dr||t==fr)return!e.size;if(Ii(e))return!Qe(e).length;for(var i in e)if(Ts.call(e,i))return!1;return!0}function Eo(e){if(!Lo(e))return!1;var t=Re(e);return t==ar||t==rr||"string"==typeof e.message&&"string"==typeof e.name&&!Bo(e)}function So(e){if(!Ao(e))return!1;var t=Re(e);return t==sr||t==lr||t==ir||t==ur}function To(e){return"number"==typeof e&&e>-1&&e%1==0&&Zn>=e}function Ao(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Lo(e){return null!=e&&"object"==typeof e}function Oo(e){return No(e)&&e!=+e}function ko(e){return null===e}function Po(e){return null==e}function No(e){return"number"==typeof e||Lo(e)&&Re(e)==cr}function Bo(e){if(!Lo(e)||Re(e)!=mr)return!1;var t=Rs(e);if(null===t)return!0;var i=Ts.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Ss.call(i)==Os}function Do(e){return"string"==typeof e||!jl(e)&&Lo(e)&&Re(e)==gr}function Mo(e){return"symbol"==typeof e||Lo(e)&&Re(e)==yr}function Ro(e){return e===_n}function Fo(e){if(!e)return[];if(Co(e))return Do(e)?M(e):At(e);if(js&&e[js])return L(e[js]());var t=Tl(e);return(t==dr?O:t==fr?N:$o)(e)}function Vo(e){return e?(e=zo(e),e===Yn||e===-Yn?(0>e?-1:1)*Kn:e===e?e:0):0===e?e:0}function Uo(e){var t=Vo(e),i=t%1;return t===t?i?t-i:t:0}function zo(e){if("number"==typeof e)return e;if(Mo(e))return Qn;if(Ao(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ao(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Hr,"");var i=ea.test(e);return i||ia.test(e)?as(e.slice(2),i?2:8):Jr.test(e)?Qn:+e}function jo(e){return null==e?"":mt(e)}function Wo(e,t,i){var o=null==e?_n:De(e,t);return o===_n?i:o}function Ho(e,t){return null!=e&&hi(e,t,Fe)}function qo(e,t){return null!=e&&hi(e,t,Ve)}function Go(e){return Co(e)?we(e):Qe(e)}function Xo(e){return Co(e)?we(e,!0):$e(e)}function Yo(e,t,i){t=ft(t,e);var o=-1,n=t.length;for(n||(n=1,e=_n);++o<n;){var r=null==e?_n:e[Di(t[o])];r===_n&&(o=n,r=i),e=So(r)?r.call(e):r}return e}function Zo(e,t,i){return null==e?e:dt(e,t,i)}function Ko(e,t,i,o){return o="function"==typeof o?o:_n,null==e?e:dt(e,t,i,o)}function Qo(e,t){return null==e||ut(e,t)}function $o(e){return null==e?[]:_(e,Go(e))}function Jo(e,t,i){if(i&&"boolean"!=typeof i&&yi(e,t,i)&&(t=i=_n),i===_n&&("boolean"==typeof t?(i=t,t=_n):"boolean"==typeof e&&(i=e,e=_n)),e===_n&&t===_n?(e=0,t=1):(e=Vo(e),t===_n?(t=e,e=0):t=Vo(t)),e>t){var o=e;e=t,t=o}if(i||e%1||t%1){var n=el();return $s(e+n*(t-e+rs("1e-"+((n+"").length-1))),t)}return rt(e,t)}function en(e){return ed(jo(e).toLowerCase())}function tn(e){return e=jo(e),e&&e.replace(na,ws).replace(Za,"")}function on(e){return e=jo(e),e&&Mr.test(e)?e.replace(Dr,_s):e}function nn(e,t,i){e=jo(e),t=Uo(t);var o=t?D(e):0;return t&&t>o?Wt(t-o,i)+e:e}function rn(e,t,i){return i&&"number"!=typeof i&&yi(e,t,i)&&(t=i=_n),(i=i===_n?$n:i>>>0)?(e=jo(e),e&&("string"==typeof t||null!=t&&!ql(t))&&(t=mt(t),!t&&T(e))?gt(M(e),0,i):e.split(t,i)):[]}function an(e,t,i){return e=jo(e),i=null==i?0:Ae(Uo(i),0,e.length),t=mt(t),e.slice(i,i+t.length)==t}function sn(e,t,i){var o=U.templateSettings;i&&yi(e,t,i)&&(t=_n),e=jo(e),t=Kl({},t,o,Zt);var n,r,a=Kl({},t.imports,o.imports,Zt),s=Go(a),l=_(a,s),d=0,c=t.interpolate||ra,h="__p+='",m="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(RegExp((t.escape||ra).source+"|"+c.source+"|"+(c===Vr?Qr:ra).source+"|"+(t.evaluate||ra).source+"|$","g"),function(t,i,o,a,s,l){return o||(o=a),h+=e.slice(d,l).replace(aa,E),i&&(n=!0,h+="'+__e("+i+")+'"),s&&(r=!0,h+="';"+s+";\n__p+='"),o&&(h+="'+((__t=("+o+"))==null?'':__t)+'"),d=l+t.length,t}),h+="';";var p=t.variable;p||(h="with(obj){"+h+"}"),h=(r?h.replace(Pr,""):h).replace(Nr,"$1").replace(Br,"$1;"),h="function("+(p||"obj")+"){"+(p?"":"obj||(obj={});")+"var __t,__p=''"+(n?",__e=_.escape":"")+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+h+"return __p}";var u=td(function(){return Function(s,m+"return "+h).apply(_n,l)});if(u.source=h,Eo(u))throw u;return u}function ln(e){return jo(e).toLowerCase()}function dn(e,t,i){if(e=jo(e),e&&(i||t===_n))return e.replace(qr,"");if(!e||!(t=mt(t)))return e;var o=M(e);return gt(o,0,I(o,M(t))+1).join("")}function cn(e,t,i){return e=jo(e),t=i?_n:t,t===_n?A(e)?V(e):h(e):e.match(t)||[]}function hn(e){return function(){return e}}function mn(e){return e}function pn(e){return Ke("function"==typeof e?e:Le(e,An))}function un(e,t,o){var n=Go(t),r=Be(t,n);null!=o||Ao(t)&&(r.length||!n.length)||(o=t,t=e,e=this,r=Be(t,Go(t)));var a=!(Ao(o)&&"chain"in o&&!o.chain),l=So(e);return i(r,function(i){var o=t[i];e[i]=o,l&&(e.prototype[i]=function(){var t=this.__chain__;if(a||t){var i=e(this.__wrapped__);return(i.__actions__=At(this.__actions__)).push({func:o,args:arguments,thisArg:e}),i.__chain__=t,i}return o.apply(e,s([this.value()],arguments))})}),e}function bn(){return ds._===this&&(ds._=ks),this}function fn(){}function gn(e){return vi(e)?b(Di(e)):ot(e)}function yn(){return[]}function vn(){return!1}function wn(e){return jl(e)?a(e,Di):Mo(e)?[e]:At(Ol(jo(e)))}var _n,Cn="4.17.5",In=200,xn="Expected a function",En="__lodash_hash_undefined__",Sn=500,Tn="__lodash_placeholder__",An=1,Ln=2,On=4,kn=1,Pn=2,Nn=1,Bn=2,Dn=4,Mn=8,Rn=16,Fn=32,Vn=64,Un=128,zn=256,jn=512,Wn=800,Hn=16,qn=1,Gn=2,Xn=3,Yn=1/0,Zn=9007199254740991,Kn=1.7976931348623157e308,Qn=NaN,$n=4294967295,Jn=[["ary",Un],["bind",Nn],["bindKey",Bn],["curry",Mn],["curryRight",Rn],["flip",jn],["partial",Fn],["partialRight",Vn],["rearg",zn]],er="[object Arguments]",tr="[object Array]",ir="[object AsyncFunction]",or="[object Boolean]",nr="[object Date]",rr="[object DOMException]",ar="[object Error]",sr="[object Function]",lr="[object GeneratorFunction]",dr="[object Map]",cr="[object Number]",hr="[object Null]",mr="[object Object]",pr="[object Promise]",ur="[object Proxy]",br="[object RegExp]",fr="[object Set]",gr="[object String]",yr="[object Symbol]",vr="[object Undefined]",wr="[object WeakMap]",_r="[object ArrayBuffer]",Cr="[object DataView]",Ir="[object Float32Array]",xr="[object Float64Array]",Er="[object Int8Array]",Sr="[object Int16Array]",Tr="[object Int32Array]",Ar="[object Uint8Array]",Lr="[object Uint8ClampedArray]",Or="[object Uint16Array]",kr="[object Uint32Array]",Pr=/\b__p\+='';/g,Nr=/\b(__p\+=)''\+/g,Br=/(__e\(.*?\)|\b__t\))\+'';/g,Dr=/[&<>"']/g,Mr=RegExp(Dr.source),Rr=/<%-([\s\S]+?)%>/g,Fr=/<%([\s\S]+?)%>/g,Vr=/<%=([\s\S]+?)%>/g,Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zr=/^\w*$/,jr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wr=/[\\^$.*+?()[\]{}|]/g,Hr=/^\s+|\s+$/g,qr=/\s+$/,Gr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xr=/\{\n\/\* \[wrapped with (.+)\] \*/,Yr=/,? & /,Zr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Kr=/\\(\\)?/g,Qr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$r=/\w*$/,Jr=/^[-+]0x[0-9a-f]+$/i,ea=/^0b[01]+$/i,ta=/^\[object .+?Constructor\]$/,ia=/^0o[0-7]+$/i,oa=/^(?:0|[1-9]\d*)$/,na=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ra=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,sa="\\ud800-\\udfff",la="\\u0300-\\u036f",da="\\ufe20-\\ufe2f",ca="\\u20d0-\\u20ff",ha=la+da+ca,ma="\\u2700-\\u27bf",pa="a-z\\xdf-\\xf6\\xf8-\\xff",ua="\\xac\\xb1\\xd7\\xf7",ba="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fa="\\u2000-\\u206f",ga=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ya="A-Z\\xc0-\\xd6\\xd8-\\xde",va="\\ufe0e\\ufe0f",wa=ua+ba+fa+ga,_a="[']",Ca="["+sa+"]",Ia="["+wa+"]",xa="["+ha+"]",Ea="\\d+",Sa="["+ma+"]",Ta="["+pa+"]",Aa="[^"+sa+wa+Ea+ma+pa+ya+"]",La="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+xa+"|"+La+")",ka="[^"+sa+"]",Pa="(?:\\ud83c[\\udde6-\\uddff]){2}",Na="[\\ud800-\\udbff][\\udc00-\\udfff]",Ba="["+ya+"]",Da="\\u200d",Ma="(?:"+Ta+"|"+Aa+")",Ra="(?:"+Ba+"|"+Aa+")",Fa="(?:"+_a+"(?:d|ll|m|re|s|t|ve))?",Va="(?:"+_a+"(?:D|LL|M|RE|S|T|VE))?",Ua=Oa+"?",za="["+va+"]?",ja="(?:"+Da+"(?:"+[ka,Pa,Na].join("|")+")"+za+Ua+")*",Wa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ha="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",qa=za+Ua+ja,Ga="(?:"+[Sa,Pa,Na].join("|")+")"+qa,Xa="(?:"+[ka+xa+"?",xa,Pa,Na,Ca].join("|")+")",Ya=RegExp(_a,"g"),Za=RegExp(xa,"g"),Ka=RegExp(La+"(?="+La+")|"+Xa+qa,"g"),Qa=RegExp([Ba+"?"+Ta+"+"+Fa+"(?="+[Ia,Ba,"$"].join("|")+")",Ra+"+"+Va+"(?="+[Ia,Ba+Ma,"$"].join("|")+")",Ba+"?"+Ma+"+"+Fa,Ba+"+"+Va,Ha,Wa,Ea,Ga].join("|"),"g"),$a=RegExp("["+Da+sa+ha+va+"]"),Ja=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,es={};
es[Ir]=es[xr]=es[Er]=es[Sr]=es[Tr]=es[Ar]=es[Lr]=es[Or]=es[kr]=!0,es[er]=es[tr]=es[_r]=es[or]=es[Cr]=es[nr]=es[ar]=es[sr]=es[dr]=es[cr]=es[mr]=es[br]=es[fr]=es[gr]=es[wr]=!1;var ts={};ts[er]=ts[tr]=ts[_r]=ts[Cr]=ts[or]=ts[nr]=ts[Ir]=ts[xr]=ts[Er]=ts[Sr]=ts[Tr]=ts[dr]=ts[cr]=ts[mr]=ts[br]=ts[fr]=ts[gr]=ts[yr]=ts[Ar]=ts[Lr]=ts[Or]=ts[kr]=!0,ts[ar]=ts[sr]=ts[wr]=!1;var is={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},os={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ns={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rs=parseFloat,as=parseInt,ss="object"==typeof global&&global&&global.Object===Object&&global,ls="object"==typeof self&&self&&self.Object===Object&&self,ds=ss||ls||Function("return this")(),cs="object"==typeof exports&&exports&&!exports.nodeType&&exports,hs=cs&&"object"==typeof module&&module&&!module.nodeType&&module,ms=hs&&hs.exports===cs,ps=ms&&ss.process,us=function(){try{return ps&&ps.binding&&ps.binding("util")}catch(e){}}(),bs=us&&us.isMap,fs=us&&us.isRegExp,gs=us&&us.isSet,ys=us&&us.isTypedArray,vs=b("length"),ws=f(is),_s=f(os),Cs=Array.prototype,Is=Function.prototype,xs=Object.prototype,Es=ds["__core-js_shared__"],Ss=Is.toString,Ts=xs.hasOwnProperty,As=function(){var e=/[^.]+$/.exec(Es&&Es.keys&&Es.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ls=xs.toString,Os=Ss.call(Object),ks=ds._,Ps=RegExp("^"+Ss.call(Ts).replace(Wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ns=ms?ds.Buffer:_n,Bs=ds.Symbol,Ds=ds.Uint8Array,Ms=Ns?Ns.allocUnsafe:_n,Rs=k(Object.getPrototypeOf,Object),Fs=Object.create,Vs=xs.propertyIsEnumerable,Us=Cs.splice,zs=Bs?Bs.isConcatSpreadable:_n,js=Bs?Bs.iterator:_n,Ws=Bs?Bs.toStringTag:_n,Hs=function(){try{var e=si(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),qs=Math.ceil,Gs=Math.floor,Xs=Object.getOwnPropertySymbols,Ys=Ns?Ns.isBuffer:_n,Zs=Cs.join,Ks=k(Object.keys,Object),Qs=Math.max,$s=Math.min,Js=Date.now,el=Math.random,tl=Cs.reverse,il=si(ds,"DataView"),ol=si(ds,"Map"),nl=si(ds,"Promise"),rl=si(ds,"Set"),al=si(ds,"WeakMap"),sl=si(Object,"create"),ll=al&&new al,dl={},cl=Mi(il),hl=Mi(ol),ml=Mi(nl),pl=Mi(rl),ul=Mi(al),bl=Bs?Bs.prototype:_n,fl=bl?bl.valueOf:_n,gl=bl?bl.toString:_n,yl=function(){function e(){}return function(t){if(!Ao(t))return{};if(Fs)return Fs(t);e.prototype=t;var i=new e;return e.prototype=_n,i}}();U.templateSettings={escape:Rr,evaluate:Fr,interpolate:Vr,variable:"",imports:{_:U}},U.prototype=z.prototype,U.prototype.constructor=U,j.prototype=yl(z.prototype),j.prototype.constructor=j,W.prototype=yl(z.prototype),W.prototype.constructor=W,X.prototype.clear=Y,X.prototype.delete=Z,X.prototype.get=K,X.prototype.has=Q,X.prototype.set=$,J.prototype.clear=ee,J.prototype.delete=te,J.prototype.get=ie,J.prototype.has=oe,J.prototype.set=ne,re.prototype.clear=ae,re.prototype.delete=se,re.prototype.get=le,re.prototype.has=de,re.prototype.set=ce,he.prototype.add=he.prototype.push=me,he.prototype.has=pe,ue.prototype.clear=be,ue.prototype.delete=fe,ue.prototype.get=ge,ue.prototype.has=ye,ue.prototype.set=ve;var vl=Bt(Ne),wl=Dt(),_l=ll?function(e,t){return ll.set(e,t),e}:mn,Cl=Hs?function(e,t){return Hs(e,"toString",{configurable:!0,enumerable:!1,value:hn(t),writable:!0})}:mn,Il=rl&&1/N(new rl([,-0]))[1]==Yn?function(e){return new rl(e)}:fn,xl=ll?function(e){return ll.get(e)}:fn,El=Xs?function(e){return null==e?[]:(e=Object(e),o(Xs(e),function(t){return Vs.call(e,t)}))}:yn,Sl=Xs?function(e){for(var t=[];e;)s(t,El(e)),e=Rs(e);return t}:yn,Tl=Re;(il&&Tl(new il(new ArrayBuffer(1)))!=Cr||ol&&Tl(new ol)!=dr||nl&&Tl(nl.resolve())!=pr||rl&&Tl(new rl)!=fr||al&&Tl(new al)!=wr)&&(Tl=function(e){var t=Re(e),i=t==mr?e.constructor:_n,o=i?Mi(i):"";if(o)switch(o){case cl:return Cr;case hl:return dr;case ml:return pr;case pl:return fr;case ul:return wr}return t});var Al=Bi(_l),Ll=Bi(Cl),Ol=Si(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(jr,function(e,i,o,n){t.push(o?n.replace(Kr,"$1"):i||e)}),t}),kl=lt(function(e,t){return Io(e)?Oe(e,Pe(t,1,Io,!0)):[]}),Pl=lt(function(e,t){var i=qi(t);return Io(i)&&(i=_n),Io(e)?Oe(e,Pe(t,1,Io,!0),ni(i,2)):[]}),Nl=lt(function(e){return pt(Pe(e,1,Io,!0))}),Bl=lt(function(e){var t=qi(e);return Io(t)&&(t=_n),pt(Pe(e,1,Io,!0),ni(t,2))}),Dl=lt(Zi),Ml=(Jt(function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,n=function(t){return Te(t,e)};return!(t>1||this.__actions__.length)&&o instanceof W&&gi(i)?(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:$i,args:[n],thisArg:_n}),new j(o,this.__chain__).thru(function(e){return t&&!e.length&&e.push(_n),e})):this.thru(n)}),zt(Ui)),Rl=Pt(function(e,t,i){Ts.call(e,i)?e[i].push(t):Se(e,i,[t])}),Fl=lt(function(e,t){if(null==e)return[];var i=t.length;return i>1&&yi(e,t[0],t[1])?t=[]:i>2&&yi(t[0],t[1],t[2])&&(t=[t[0]]),it(e,Pe(t,1),[])}),Vl=function(){return ds.Date.now()};bo.Cache=re;var Ul=lt(function(e,t){return Yt(e,Fn,_n,t,P(t,oi(Ul)))}),zl=ze(function(){return arguments}())?ze:function(e){return Lo(e)&&Ts.call(e,"callee")&&!Vs.call(e,"callee")},jl=Array.isArray,Wl=Ys||vn,Hl=bs?w(bs):He,ql=fs?w(fs):Xe,Gl=gs?w(gs):Ye,Xl=ys?w(ys):Ze,Yl=Nt(function(e,t){if(Ii(t)||Co(t))return Lt(t,Go(t),e),_n;for(var i in t)Ts.call(t,i)&&_e(e,i,t[i])}),Zl=Nt(function(e,t){Lt(t,Xo(t),e)}),Kl=Nt(function(e,t,i,o){Lt(t,Xo(t),e,o)}),Ql=lt(function(e,t){e=Object(e);var i=-1,o=t.length,n=o>2?t[2]:_n;for(n&&yi(t[0],t[1],n)&&(o=1);++i<o;)for(var r=t[i],a=Xo(r),s=-1,l=a.length;++s<l;){var d=a[s],c=e[d];(c===_n||_o(c,xs[d])&&!Ts.call(e,d))&&(e[d]=r[d])}return e}),$l=Ft(function(e,t,i){return t=t.toLowerCase(),e+(i?en(t):t)}),Jl=Ft(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),ed=Rt("toUpperCase"),td=lt(function(e,t){try{return i(e,_n,t)}catch(i){return Eo(i)?i:Error(i)}}),id=qt(),od=Xt("floor"),nd=Xt("round");U.assign=Yl,U.assignIn=Zl,U.assignInWith=Kl,U.before=po,U.chain=Ki,U.concat=Vi,U.constant=hn,U.debounce=uo,U.defaults=Ql,U.difference=kl,U.differenceBy=Pl,U.filter=ao,U.flatten=zi,U.groupBy=Rl,U.iteratee=pn,U.keys=Go,U.keysIn=Xo,U.map=lo,U.memoize=bo,U.mixin=un,U.negate=fo,U.once=go,U.partial=Ul,U.property=gn,U.range=id,U.remove=Gi,U.reverse=Xi,U.set=Zo,U.setWith=Ko,U.sortBy=Fl,U.split=rn,U.tap=Qi,U.throttle=yo,U.thru=$i,U.toArray=Fo,U.toPath=wn,U.union=Nl,U.unionBy=Bl,U.uniq=Yi,U.unset=Qo,U.unzip=Zi,U.values=$o,U.words=cn,U.zip=Dl,U.extend=Zl,U.extendWith=Kl,un(U,U),U.attempt=td,U.camelCase=$l,U.capitalize=en,U.clone=vo,U.cloneDeep=wo,U.deburr=tn,U.eq=_o,U.escape=on,U.find=Ml,U.findIndex=Ui,U.floor=od,U.forEach=so,U.get=Wo,U.has=Ho,U.hasIn=qo,U.head=ji,U.identity=mn,U.indexOf=Wi,U.isArguments=zl,U.isArray=jl,U.isArrayLike=Co,U.isArrayLikeObject=Io,U.isBuffer=Wl,U.isEmpty=xo,U.isError=Eo,U.isFunction=So,U.isLength=To,U.isMap=Hl,U.isNaN=Oo,U.isNil=Po,U.isNull=ko,U.isNumber=No,U.isObject=Ao,U.isObjectLike=Lo,U.isPlainObject=Bo,U.isRegExp=ql,U.isSet=Gl,U.isString=Do,U.isSymbol=Mo,U.isTypedArray=Xl,U.isUndefined=Ro,U.join=Hi,U.kebabCase=Jl,U.last=qi,U.stubArray=yn,U.stubFalse=vn,U.noConflict=bn,U.noop=fn,U.now=Vl,U.padStart=nn,U.random=Jo,U.reduce=co,U.result=Yo,U.round=nd,U.size=ho,U.some=mo,U.startsWith=an,U.template=sn,U.toFinite=Vo,U.toInteger=Uo,U.toLower=ln,U.toNumber=zo,U.toString=jo,U.trimEnd=dn,U.upperFirst=ed,U.each=so,U.first=ji,un(U,function(){var e={};return Ne(U,function(t,i){Ts.call(U.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),U.VERSION=Cn,Ul.placeholder=U,i(["drop","take"],function(e,t){W.prototype[e]=function(i){i=i===_n?1:Qs(Uo(i),0);var o=this.__filtered__&&!t?new W(this):this.clone();return o.__filtered__?o.__takeCount__=$s(i,o.__takeCount__):o.__views__.push({size:$s(i,$n),type:e+(o.__dir__<0?"Right":"")}),o},W.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),i(["filter","map","takeWhile"],function(e,t){var i=t+1,o=i==qn||i==Xn;W.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ni(e,3),type:i}),t.__filtered__=t.__filtered__||o,t}}),i(["head","last"],function(e,t){var i="take"+(t?"Right":"");W.prototype[e]=function(){return this[i](1).value()[0]}}),i(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");W.prototype[e]=function(){return this.__filtered__?new W(this):this[i](1)}}),W.prototype.compact=function(){return this.filter(mn)},W.prototype.find=function(e){return this.filter(e).head()},W.prototype.findLast=function(e){return this.reverse().find(e)},W.prototype.invokeMap=lt(function(e,t){return"function"==typeof e?new W(this):this.map(function(i){return Ue(i,e,t)})}),W.prototype.reject=function(e){return this.filter(fo(ni(e)))},W.prototype.slice=function(e,t){e=Uo(e);var i=this;return i.__filtered__&&(e>0||0>t)?new W(i):(0>e?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==_n&&(t=Uo(t),i=0>t?i.dropRight(-t):i.take(t-e)),i)},W.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},W.prototype.toArray=function(){return this.take($n)},Ne(W.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),n=U[o?"take"+("last"==t?"Right":""):t],r=o||/^find/.test(t);n&&(U.prototype[t]=function(){var t=this.__wrapped__,a=o?[1]:arguments,l=t instanceof W,d=a[0],c=l||jl(t),h=function(e){var t=n.apply(U,s([e],a));return o&&m?t[0]:t};c&&i&&"function"==typeof d&&1!=d.length&&(l=c=!1);var m=this.__chain__,p=!!this.__actions__.length,u=r&&!m,b=l&&!p;if(!r&&c){t=b?t:new W(this);var f=e.apply(t,a);return f.__actions__.push({func:$i,args:[h],thisArg:_n}),new j(f,m)}return u&&b?e.apply(this,a):(f=this.thru(h),u?o?f.value()[0]:f.value():f)})}),i(["pop","push","shift","sort","splice","unshift"],function(e){var t=Cs[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);U.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var n=this.value();return t.apply(jl(n)?n:[],e)}return this[i](function(i){return t.apply(jl(i)?i:[],e)})}}),Ne(W.prototype,function(e,t){var i=U[t];if(i){var o=i.name+"";(dl[o]||(dl[o]=[])).push({name:t,func:i})}}),dl[jt(_n,Bn).name]=[{name:"wrapper",func:_n}],W.prototype.clone=H,W.prototype.reverse=q,W.prototype.value=G,U.prototype.chain=Ji,U.prototype.commit=eo,U.prototype.next=to,U.prototype.plant=oo,U.prototype.reverse=no,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=ro,U.prototype.first=U.prototype.head,js&&(U.prototype[js]=io),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ds._=U,define(function(){return U})):hs?((hs.exports=U)._=U,cs._=U):ds._=U}.call(this),window.Cbola._=_.noConflict(),Cbola.tmp_&&(window._=Cbola.tmp_),Cbola.tmp_=null;var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;e>n;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((o+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;t>o;o+=4)i.push(4294967296*e.random()|0);return r.create(i,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++){var n=t[o>>>2]>>>24-8*(o%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return r.create(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return r.create(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,n=e.min(4*t,n);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return h.HMAC.create(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);!function(e){function t(e,t,i,o,n,r,a){return e=e+(t&i|~t&o)+n+a,(e<<r|e>>>32-r)+t}function i(e,t,i,o,n,r,a){return e=e+(t&o|i&~o)+n+a,(e<<r|e>>>32-r)+t}function o(e,t,i,o,n,r,a){return e=e+(t^i^o)+n+a,(e<<r|e>>>32-r)+t}function n(e,t,i,o,n,r,a){return e=e+(i^(t|~o))+n+a,(e<<r|e>>>32-r)+t}var r=CryptoJSCbola,a=r.lib,s=a.WordArray,a=a.Hasher,l=r.algo,d=[];!function(){for(var t=0;64>t;t++)d[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var a=0;16>a;a++){var s=r+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var s=this._hash.words,l=s[0],c=s[1],h=s[2],m=s[3],a=0;64>a;a+=4)16>a?(l=t(l,c,h,m,e[r+a],7,d[a]),m=t(m,l,c,h,e[r+a+1],12,d[a+1]),h=t(h,m,l,c,e[r+a+2],17,d[a+2]),c=t(c,h,m,l,e[r+a+3],22,d[a+3])):32>a?(l=i(l,c,h,m,e[r+(a+1)%16],5,d[a]),m=i(m,l,c,h,e[r+(a+6)%16],9,d[a+1]),h=i(h,m,l,c,e[r+(a+11)%16],14,d[a+2]),c=i(c,h,m,l,e[r+a%16],20,d[a+3])):48>a?(l=o(l,c,h,m,e[r+(3*a+5)%16],4,d[a]),m=o(m,l,c,h,e[r+(3*a+8)%16],11,d[a+1]),h=o(h,m,l,c,e[r+(3*a+11)%16],16,d[a+2]),c=o(c,h,m,l,e[r+(3*a+14)%16],23,d[a+3])):(l=n(l,c,h,m,e[r+3*a%16],6,d[a]),m=n(m,l,c,h,e[r+(3*a+7)%16],10,d[a+1]),h=n(h,m,l,c,e[r+(3*a+14)%16],15,d[a+2]),c=n(c,h,m,l,e[r+(3*a+5)%16],21,d[a+3]));s[0]=s[0]+l|0,s[1]=s[1]+c|0,s[2]=s[2]+h|0,s[3]=s[3]+m|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;for(t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)i=e[t],e[t]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}}),r.MD5=a._createHelper(l),r.HmacMD5=a._createHmacHelper(l)}(Math);var CryptoJSCbola=CryptoJSCbola||function(e,t){var i={},o=i.lib={},n=o.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var i=new e;return t&&i.mixIn(t),i.$super=this,i},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=o.WordArray=n.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,i=e.words,o=this.sigBytes,e=e.sigBytes;if(this.clamp(),o%4)for(var n=0;e>n;n++)t[o+n>>>2]|=(i[n>>>2]>>>24-8*(n%4)&255)<<24-8*((o+n)%4);else if(65535<i.length)for(n=0;e>n;n+=4)t[o+n>>>2]=i[n>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],o=0;t>o;o+=4)i.push(4294967296*e.random()|0);return r.create(i,t)}}),a=i.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++){var n=t[o>>>2]>>>24-8*(o%4)&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o+=2)i[o>>>3]|=parseInt(e.substr(o,2),16)<<24-4*(o%8);return r.create(i,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,i=[],o=0;e>o;o++)i.push(String.fromCharCode(t[o>>>2]>>>24-8*(o%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;t>o;o++)i[o>>>2]|=(255&e.charCodeAt(o))<<24-8*(o%4);return r.create(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=o.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,o=i.words,n=i.sigBytes,a=this.blockSize,s=n/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,n=e.min(4*t,n);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(o,l);l=o.splice(0,t),i.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,i){return e.create(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return h.HMAC.create(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);if(function(){var e=CryptoJSCbola,t=e.lib,i=t.WordArray,t=t.Hasher,o=[],n=e.algo.SHA1=t.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],d=0;80>d;d++){if(16>d)o[d]=0|e[t+d];else{var c=o[d-3]^o[d-8]^o[d-14]^o[d-16];o[d]=c<<1|c>>>31}c=(n<<5|n>>>27)+l+o[d],c=20>d?c+((r&a|~r&s)+1518500249):40>d?c+((r^a^s)+1859775393):60>d?c+((r&a|r&s|a&s)-1894007588):c+((r^a^s)-899497514),l=s,s=a,a=r<<30|r>>>2,r=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+s|0,i[4]=i[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[(o+64>>>9<<4)+15]=i,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(n),e.HmacSHA1=t._createHmacHelper(n)}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),"undefined"==typeof document.hidden)for(var vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&"undefined"==typeof document.hidden;++x)document.hidden=window[vendors[x]+"Hidden"];!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var o=(new Date).getTime(),n=Math.max(0,16-(o-e)),r=window.setTimeout(function(){t(o+n)},n);return e=o+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||0>t?0:+t,e.length)===e}),Cbola.EventBus=Cbola.EventBus||function(){var e=window.document.createElement("span");return e.fire=function(e,t){var i=new CustomEvent(e,{detail:t});Cbola.EventBus.dispatchEvent(i)},e.Events={ELEMENT_FAILED:"ElementFailed",FOCUS_CHANGE:"FocusedChange",GET_ADS_READY:"GetAdsReady",LAYER_READY:"LayerReadyEvent",PAGE_ELEMENTS_DATA_RECEIVED:"PageElementsDataReceived",PAGE_VISIBILITY_CHANGE:"PageVisibilityChange",PLATFORM_INITIALIZED:"PlatformInitialized",USER_ID_SET:"UserIDSet",ADS_STORES_MANGER_ADDED_SIZES:"AdsStoresManagerAddedSizes_",ADS_STORES_MANAGER_READY:"AdsStoresManagerReady_",COVERING_TRIGGER_ON:"coveringTriggerOn_",COVERING_TRIGGER_OFF:"coveringTriggerOff_",LAYER_ATTACHED:"LayerAttached_",LAYER_IS_VIEWABLE:"LayerBecameViewable_",OBSERVER_VIEWABLE:"ObserverViewable_",OBSERVER_NON_VIEWABLE:"ObserverNonViewable_",PAGE_LOAD_FALLBACK:"PageLoadFallback_",RESIZE_ON_AD:"ResizeOnAd_",SKIP_SPOT:"SkipSpot_",STORY_CLICKED:"StoryClicked_",STORY_TIMER_ENDED:"StoryTimerEnded_",TIMER_ENDED:"TimerEnded_",TRIVIA_BEFORE_END:"triviaBeforeEnd_",TRIGGER_IS_VIEWABLE:"TriggerBecameViewable_"},e}(),Cbola.Enums=Cbola.Enums||{ProductTypes:{IN_IMAGE:1,IN_CONTENT:2,IN_IMAGE_PENDING:101},ServerCallTypes:{CDN:0,SERVER:1},IntegrationTypes:{ERROR:0,NORMAL:1,DFP:2,SAFE_FRAME:3,IFRAME:4},SetClickTypes:{ITEM_LINK:1,CARAMBOLA_ICON:10,SHARE_BEFORE_FACEBOOK:11,SHARE_BEFORE_TWITTER:12,SHARE_AFTER_FACEBOOK:13,SHARE_AFTER_TWITTER:14,AD_BUTTON_CLOSE:15,SHARE_BEFORE_WHATSAPP:16,SHARE_LANDSCAPE_WHATSAPP:18,SHARE_LANDSCAPE_FACEBOOK:19,SHARE_LANDSCAPE_TWITTER:20,ENDING_SCREEN_OUT:21,FOOTER_AD_BUTTON_CLOSE:22,SPONSORED_LINK_CLICK_ENDING_SCREEN:24,SPONSORED_LINK_CLICK_ENDING_SCREEN_AUTOPLAY:25,SPONSORED_LINK_CLICK_IN_ITEM:26,SPONSORED_LINK_CLICK_IN_ITEM_AUTOPLAY:27,TWITTER_REPLY:28,TWITTER_STAR:29,TWITTER_RETWEET:30,TWITTER_FOLLOW:31,TWITTER_TWEET_IMAGE_CLICK:32},RefreshTypes:{NONE:0,CLICK:1,TIMEOUT:2,BOTH:3,VIEWABILITY:4},AdTriggerTypes:{INJECT_PSA:0,PAGE_LOAD:1,TIMEOUT:2,CLICK:3,APPERANCE:4,URL_CHANGE:5,REFRESH_PSA:6,WF_FALLBACK:7,REFRESH_CONFIANT_BLOCK:8,REFRESH_AD_LIGHTNING_BLOCK:9},BlockedAdTriggerTypes:{CONFIANT_BLOCK:1,AD_LIGHTNING_BLOCK:2},LoadStatusTypes:{SUCCESS:1,MAX_ELEMS_REACHED:8,GET_ADS_FAILED:9,AD_SERVER_DOWN:10,GET_ADS_MAX_RETRY:15,SELECTOR_NOT_FOUND:18,SELECTOR_TOO_SMALL:19,SAME_ID_WIDGETS:21,EXTERNAL_CONTENT_FAILED:25},ItemViewTypes:{ON_HOVER:1,ON_NEXT_BTN:2,ON_PREV_BTN:3,VIEWABILITY:4,IN_IFRAME:5,UNVIEWABILITY:6,ENDING_SCREEN:7,AD:8,ON_NEXT_AUTOPLAY:9,SPONSORED_ENDING_SCREEN:10,SPONSORED_LINK_CLICK:11,ENDING_SCREEN_AUTOPLAY:12,SPONSORED_ENDING_SCREEN_AUTOPLAY:13,AD_AUTOPLAY:14,SPONSORED_IN_ITEM_SCREEN:15,SPONSORED_IN_ITEM_SCREEN_AUTOPLAY:16,AUTOPLAY_CAROUCEL_COMPLETED:17,NONE:255},PageRequestTypes:{ERROR:0,PAGE_VIEW:1,NOT_FOUND:2,PENDING:3,NO_ELEMS_FOUND:4,NO_CONTENT_FOUND:5,UNKNOWN_PUBLISHER:6,UNSUPPORTED_DOMAIN:7,MOBILE:8,AUTOMATION_FAILED:9,HOMEPAGE:10,REVISER:11,UNSUPPORTED_BROWSER:12,DIV_TOO_SMALL:13,CORRUPTED_JSON:14,BLOCKED_MOBILE:15,NO_SHOW_META:16,BLOCKED_DESKTOP:17,BLOCKED_TABLET:18,ADS_ONLY:19,INITIALIZE_FAILED:21,NO_PLACEHOLDER_FOUND:22,NO_CONTENT_TEMPLATE_FOUND:23,HIDDEN_IFRAME:24,BLOCKED_KNOWN_SAFE_FRAME:25,GET_ELEMENTS_ERROR:255},teaserTriggerTypes:{TIMEOUT:1,VIEWABILITY:2},isServerCallTypes:{FROM_CDN:0,FROM_SERVER:1},HeaderBiddingRequestStatus:{SUCCESS:1,TIMEOUT:2,FAIL:3,REQUEST_MADE:10,HIGH_TIER_FILLED:11,REQUEST_LOW_TIER_MADE:12,LOW_TIER_FILLED:13},TagExtractionTypes:{APPEND:1,POSTSCRIBE:2,WRITECAPTURE:3,POSTSCRIBE_ONLY:4,SRCDOC_IFRAME:5,BILIMBI:6,WRITE_IFRAME:7,CONFIANT_IFRAME:8,AD_LIGHTNING_IFRAME:9},AdOpenBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4,PAGE_LOAD:5},AdCloseBehaviors:{TIMER:1,ENGAGEMENT:2,VIEWABLE:3,HOVER_ON_UNIT:4},AbTests:{NO_LAYER:9999,NO_ADS:9998,ADS_ON_PAGE_LOAD:9997,BASE_PAGE_LOAD:9996,LAYER_ON_PAGE_LOAD:9995},SetEventTypes:{PAGE_LOAD_EVENT:150},UnitLoadTypes:{ASYNC:1,DOM_LOADED:2,PAGE_LOAD:3},ConsentStatusTypes:{IAB_STANDARD_CMP_FOUND:10,GOOGLE_FUNDING_CHOICES_FOUND:98}},window.Cbola=window.Cbola||{},Cbola.Config=function(){var e=Cbola,t=e._,i={query:{qa:"//qa_api.carambo.la/inimage/server/",prod:"//content.carambo.la/"},analytics:{qa:"//qa_api.carambo.la/inimage/analytics/",prod:"//analytics.carambo.la/"},pageAnalytics:{qa:"//qa_api.carambo.la/inimage/analytics/",prod:"//analytics.carambo.la/"},logging:{qa:"//qa_api.carambo.la/inimage/logging/",prod:"//logging.carambo.la/"},CDN:{qa:"//qa.inimage.carambo.la/",prod:"//inimage.carambo.la/"},EX_CDN:{qa:"//qaex-data.carambo.la/",prod:"//ex-data.carambo.la/"},ads:{qa:"//qa.adserver.carambo.la/",prod:"//xtr.carambo.la/"},extraContent:{qa:"//qa-excontent.carambo.la/",prod:"//excontent.carambo.la/"}},o=function(){var e=Cbola,t=e.Utils,cbolaConfig={};"undefined"==typeof n.abTestId&&(n.abTestId=t.getUrlParams()["cbolaabtest"],n.abTestId?n.abTestId=parseInt(n.abTestId):(cbolaConfig.abTestId=1,n.abTestId=cbolaConfig.abTestId))},n={Language:{english:"en",spanish:"es",portuguese:"pt",russian:"ru",french:"fr",japanese:"ja",german:"de"},maxParentElementsCheckWidth:5,adTypeVideo:1,abTestSkipContent:!1,defaultAdsExtractType:0,checkPendingICscriptsTimeLength:25,urlsForAuto:[],writeCaptureAlreadySet:!1,getAdsCheckElementRetries:100,findICSelectorElementMaxRetries:80,ZIndexLayers:0,sendToPostScribeAgain:0,MaxWidgets:999,inContentFallbackWidths:[440,300],currentElementsSum:0,dateTimeWhenScriptExecute:"cbolaDt",proxyId:"carambola_proxy",inContentClass:"carambola_InContent",placeholderClass:"carambola-layer-placeholder",bitlyUrl:"",icDefaultMainTitle:"Did you know?",checkPlatformLocation:!0,errorMessage:"",adBelowSideBarMargin:1,adBelowSlideShowMargin:10,brandRedirect_default:"https://www.carambola.com/",adTitleStructureTriviaHeight:14,adBelowInContentExtraMargin:3,adAsideOfUnitExtraMargin:5,timeouts:{pendingBeforeSkippingHeaderBidding:5e3,pendingHeaderBiddingResponseBrake:200,pendingIndexExchangeBuffer:250},autoSlideFirst:!0,autoSlideFirst_openAfterSecs:3e3,autoSlideFirst_closeAfterSecs:6e3,layouts:{inContent:{all:[100,101,102,110,112,120,121,160,170],facts:[100,101,102,110,112],trivia:[120],triviaMulti:[121],twitter:[160],indices:[170]},sideBars:{all:[130,131,132,133,134,135,136,137,138,139,140,150,151,152,153],facts:[130,131,132,133,136,152],diedOnThisDay:[134,150],diedOnThisWeek:[151],onThisDay:[135,137,153],trivia:[140],staticBanner:[130,131,133,134,135,140],teaserBanner:[132],sidebarSlideshow:[136,137],storiesSlideshow:[138,139],slideShow:[150,151,152,153]},mobile:{all:[1e3,1100,1400],facts:[1e3,1100],trivia:[1400]}},clientPaths:{0:{path:"//cdata.carambo.la/Layer/InImage/Prod/cbola_platform/version_",sfPath:"//safeframe.carambo.la/Layer/InImage/Prod/cbola_platform/version_",isMin:!0,withVersion:!0},1:{path:"//qa1.carambo.la/inimage/versions",isMin:!0,withVersion:!1},2:{path:"//cdata.carambo.la/Layer/InImage/QA/cbola_platform/version_",sfPath:"//safeframe.carambo.la/Layer/InImage/QA/cbola_platform/version_",isMin:!0,withVersion:!0},3:{path:"//10.0.0.17/platform",isMin:!1,withVersion:!1},5:{path:"//localhost:9000/platform",isMin:!1,withVersion:!1},6:{path:"//localhost:9000/platform",isMin:!1,withVersion:!1},7:{path:"//qa1.carambo.la/inimage/versions",isMin:!1,withVersion:!1},11:{path:"//qa1.carambo.la/inimage/mobile",isMin:!1,withVersion:!1},100:{path:"//qa1.carambo.la/inimage/margeversions",isMin:!0,withVersion:!1},110:{path:"//localhost:9000",isMin:!0,withVersion:!1},120:{path:"//10.0.0.170:9000",isMin:!0,withVersion:!1},31:{alias:1},36:{alias:6},12:{alias:11}},init:function(){var e=this,r=Cbola.Utils;this.layouts.all=[],t.forEach(this.layouts,function(i){t.get(i,"all")&&r.push.apply(e.layouts.all,i.all)});var a=n.layouts;this.triggersDictionary={1:{supportedLayers:a.inContent.trivia},2:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},3:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},4:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},5:{supportedLayers:a.inContent.triviaMulti},6:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},7:{supportedLayers:a.inContent.trivia.concat(a.inContent.triviaMulti)},11:{supportedLayers:a.sideBars.slideShow,translatedTo:1},12:{supportedLayers:a.sideBars.slideShow},14:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.sidebarSlideshow,a.sideBars.storiesSlideshow),translatedTo:4},15:{supportedLayers:a.sideBars.slideShow,translatedTo:20},18:{supportedLayers:a.sideBars.teaserBanner,translatedTo:8},19:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.sidebarSlideshow,a.sideBars.storiesSlideshow),translatedTo:9},20:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.teaserBanner,a.sideBars.sidebarSlideshow,a.sideBars.storiesSlideshow)},21:{supportedLayers:a.sideBars.staticBanner.concat(a.sideBars.sidebarSlideshow)},22:{supportedLayers:a.sideBars.slideShow},23:{supportedLayers:a.sideBars.storiesSlideshow},54:{supportedLayers:a.inContent.facts,translatedTo:4},56:{supportedLayers:a.inContent.facts,translatedTo:6},57:{supportedLayers:a.inContent.facts,translatedTo:7},58:{supportedLayers:a.inContent.facts,translatedTo:8},62:{supportedLayers:a.inContent.twitter,translatedTo:22},64:{supportedLayers:a.inContent.twitter,translatedTo:4},68:{supportedLayers:a.inContent.twitter,translatedTo:20},69:{supportedLayers:a.inContent.trivia,translatedTo:20},73:{supportedLayers:a.inContent.indices,translatedTo:23},200:{supportedLayers:a.mobile.all},204:{supportedLayers:a.mobile.all},209:{supportedLayers:a.mobile.all},300:{supportedLayers:a.all}};var s={adServer_method:"GetAds",queryServer:i.query.prod,analyticsServer:i.analytics.prod,pageAnalyticsServer:i.pageAnalytics.prod,loggingServer:i.logging.prod,CDN:i.CDN.prod,EX_CDN:i.EX_CDN.prod,adServer:i.ads.prod,extraContent:i.extraContent.prod};"1"===Cbola.Env.queryServer||"qa"===Cbola.Env.queryServer||"3"===Cbola.Env.queryServer?(s.CDN=i.CDN.qa,
s.EX_CDN=i.EX_CDN.qa,s.queryServer=i.query.qa,s.extraContent=i.extraContent.qa,s.adServer=i.ads.qa,s.analyticsServer=i.analytics.qa,s.pageAnalyticsServer=i.pageAnalytics.qa,s.loggingServer=i.logging.qa,"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(s.adServer=i.ads.prod,s.adServer_method="GetExtraContent"),"3"===Cbola.Env.queryServer&&(s.CDN="//s3.amazonaws.com/qa.inimage.carambo.la/")):"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(s.adServer=i.ads.prod,s.adServer_method="GetExtraContent"),o(),(30===n.abTestId||31===n.abTestId||32===n.abTestId)&&(s.loggingServer=i.logging.prod,(31===n.abTestId||32===n.abTestId)&&(s.queryServer=i.query.prod,s.extraContent=i.extraContent.prod),32===n.abTestId&&(s.adServer=i.ads.prod)),t.extend(this,{Defaults:s}),n.brandRedirectTemplate=function(e){var t=e.layerType;return n.brandRedirect_default+"?cf=unt"+t+"_"+Cbola.Env.domainId}},getLayersDefaultSize:t.memoize(function(e){switch(e){case 100:case 101:case 110:return{height:270,width:640};case 102:case 112:return{height:250,width:640};case 120:case 121:return{height:250,width:650};case 130:case 131:return{height:350,width:300};case 132:return{height:600,width:300};case 133:case 134:case 135:return{height:350,width:300};case 136:case 137:case 138:case 139:return{height:340,width:300};case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 160:return{height:90,width:728};case 170:return{height:"auto",width:606};case 1400:case 1100:case 1e3:return{height:"inherit",width:0};default:return{height:230,width:100}}}),getLayersDefaultSizeForIframe:t.memoize(function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:270,width:450};case 120:return"pgtr56"===Cbola.Env.activePid?{height:250,width:500}:{height:265,width:500};case 121:return{height:250,width:500};case 130:case 131:case 133:case 134:case 135:return{height:350,width:300};case 136:case 137:case 138:case 139:return{height:340,width:300};case 140:return{height:350,width:300};case 150:case 151:case 152:case 153:return{height:250,width:300};case 160:return{height:90,width:600};case 170:return{height:105,width:606};case 1e3:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1100:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1400:return{height:516,width:300};default:return{height:230,width:100}}}),getLayerMinSizes:t.memoize(function(e){switch(e){case 100:case 101:case 110:return{width:440,height:270};case 102:case 112:return{width:440,height:250};case 120:return{width:500,height:250};case 121:return{width:480,height:250};case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 140:return{width:300,height:350};case 150:case 151:case 152:case 153:return{width:300,height:250};case 160:return{width:545,height:90};case 170:return{width:606,height:105};case 1e3:case 1100:case 1400:return{width:0,height:0};default:return{width:440,height:250}}}),jsonRegEx:{0:"[\\?&]utm_",110587:"#~[a-zA-Z0-9]{14}",110461:"\\?(?!cctn)|;grp=|;kvstate=|;kvfirstname=|;kvlastname=|#",110760:"[\\?&]wpvqas=",110775:"#|\\?li_|\\?cbolaGameSet",110735:"\\?gclid=|#|/ml/1/e/",110729:"\\?gclid=|#|/ml/1/e/",110663:"#|\\?_|\\?fb_",110733:"\\?fb_|\\?gclid=|#|/ml/1/e/",111799:"#axzz",111814:"\\?|/[0-9]{8}",110744:"\\?gclid=|#|/ml/1/e/",110695:"\\?gclid=|#|/ml/1/e/",110730:"\\?gclid=|#|/ml/1/e/",110746:"\\?gclid=|#|/ml/1/e/",110728:"\\?gclid=|#|/ml/1/e/",110726:"\\?gclid=|#|/ml/1/e/",110737:"\\?gclid=|#|/ml/1/e/",110694:"\\?gclid=|#|/ml/1/e/",110738:"\\?gclid=|#|/ml/1/e/",111843:"\\?gclid=|#|/ml/1/e/",110740:"\\?gclid=|#|/ml/1/e/",110732:"\\?gclid=|#|/ml/1/e/",112323:"userid=",112230:"\\?pctx=",112268:"gclid=",112433:"[\\?&]utm_|#",110396:"\\?storyurl=",110577:"\\?|#|/wiki/",110681:"&qp=|&ticketid=",112227:"\\?pmcode|\\?_cmp=|\\?p=|\\?trkid=",110535:"\\?icid=",112441:"[\\?&]feed|[\\?&]wigetarticlelistfile=",112460:"\\?|&c.|&did.",112454:"&c.",112455:"&c.",112457:"&c.",112458:"&c.",112459:"&c.",112469:"&c.",112470:"&c.",112471:"&c.",112472:"&c.",112519:"&c.",112520:"&c.",112540:"&c.",112551:"/217|/218|/219|/220|/[0-9]{9}\\?new=true",112451:"\\?trkid=",112630:"/[a-zA-Z0-9]{8}$|/[a-zA-Z0-9]{7}$|/[a-zA-Z0-9]{6}$|/[a-zA-Z0-9]{5}$|/a/|/gallery/|/r/|/t/|/user/",112390:"/unscramble/",112476:"&userid=",112647:"\\?|#",112665:"&geom=|&rf=|&p=",112550:"/[0-9]{9}\\?new=true",110727:"/ml/1/e/",112663:"/gampad/ads",112732:"\\?ord=",112760:"[\\?&]puc=|\\?_ga=|\\?hash=",112606:"\\?chr=",112632:"_activity_context=|u_audio=|a3dwebglbanner=",112751:"\\?et_rid=",112777:"\\?message_id=",112733:"/centerx:|/shipid:",112623:"\\?",112355:"\\?|&",112842:"\\/[0-9]{4}\\/|\\/[0-9]{5}\\/|\\/[0-9]{6}\\/|\\/[0-9]{7}\\/|\\/[0-9]{8}\\/",112752:"\\?",112845:"\\b/.*$",112846:"\\b/.*$",113007:"\\?"},srcUrlEnabledDids:[110006,112389,112485]};return n}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Cbola.Utils=Cbola.Utils||function(){var e=window.requestAnimationFrame,t=Cbola,i=t._,o=t.Config,n=navigator.userAgent,r="Utils",a=99999,s=1e4,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=i.partial(i.padStart,i,2,"0"),o=new Date;return t(o.getDate())+t(o.getMonth()+1)+t(o.getFullYear()%100)+t(o.getHours())+t(o.getMinutes())+t(o.getSeconds())+t(o.getMilliseconds()%100)+e},d={isFacebookBrowser:/\[FB.*;(FBAV)\/(\d+)(?:\.(\d+)(?:\.(\d)+)?)?/g.test(n)||/(facebookexternalhit)\/(\d+)\.(\d+)/g.test(n),isIOS:/iPad|iPhone|iPod/g.test(n),isIE:/(msie\s)|(trident.*rv\:)|(edge\/)/gi.test(n),isFirefox:/firefox/gi.test(n),isMobile:/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/gi.test(n)&&-1===n.search("PC"),isTablet:i.memoize(function(){var e=/ipad|a1_07|a1-810|a1-811|a1-830|a3000-h|a3300-hv|a3500-f|a3500-fl|a3500-h|a3-a10|a5500-f|a5500-h|a7600-f|a7600-h|android 3|archos 101|archos 80g9|aries_785|arnova 101|at100|at10-a|at200|at300|b1-710|b1-711|b1-730|b1-770|b1-780|b1-810|b1-830|b1-850|b1-a71|b6000-f|b6000-h|b8000-f|b8000-h|b8080-f|b8080-h|bn nookhd+|bnrv200|bntv250|bntv250a|bntv400|bntv450|bntv600|breeze 10|cm_tenderloin|dell streak 7|dl1010q|e2281|e-tab ivory|gt-n5100|gt-n5110|gt-n8000|gt-n8010|gt-n8013|gt-n8020|gt-p1000|gt-p1010|gt-p3100|gt-p3110|gt-p3113|gt-p5100|gt-p5110|gt-p5113|gt-p5200|gt-p5210|gt-p5220|gt-p7300|gt-p7310|gt-p7500|gt-p7510|hpwos|hudl 2|ideapad|ideatab|k00e|k00f|k010|k011|k012|k017|k01a|kfapwa |kfapwi|kfarwi|kfaswi|kfauwi|kfdowi|kffowi|kfgiwi|kfjwa|kfjwi|kfmewi|kfot|kfsawa|kfsawi|kfsowi|kfsuwi|kftbwi|kfthwa|kfthwi|kftt|kindle|lguk410|lguk750|lguk932|lg-v400|lg-v410|lg-v490|lg-v495|lg-v496|lg-v497|lg-v500|lg-v520|lg-v521|lg-v522|lg-v700|lg-v930|lifetab|m532|me172v|me173x|me301t|me302c|me302kl|me371mg|mediapad|memo pad|micromax_a101|mz601|mz604|nexus 10|nexus 7|nx008hd8g|nx16a10132s|nx16a11264|nx16a8116k|nx700qc|nx785qc8g|nxa116qc164|nxa8qc116|onda v989|p310a|p310x|p320x|padfone|playbook|pmp5580c|pmp7280c3g|pmt3377_wi|pmt7077_3g|qmv7a|qmv7b|qtair7|qtaqz3|qv830|rct6103w46|rct6203w46|rct6213w87dk|rct6213w87m|rct6303w87dk|rct6303w87m|rct6513w87|rct6573w23|rct6603w47m7|rct6603w87m7|rct6703w13|rct6773w22|rct6773w42b|rct6873w42m|rct6973w43|rct6k03w13|s5000-f|s5000-h|s6000l-f|s920_row|sch-i705|sch-i800|sch-i915|sch-i925|sgh-i467|sgh-i497|sgh-i777|sgp311|sgp312|sgp321|sgp511|sgp512|sgp521|sgp561|sgp611|sgp612|sgp621|sgp712|sgp771|sgpt12|sgpt13|shv-e210k|slider sl101|smart tab|sm-p550|sm-p600|sm-p605|sm-p900|sm-p905|sm-t\d\d\d|tab 2 a10-70f|tab 2 a7-30hc|tab 2 a8-50f|tab 2 a8-50lc|tab s8-50f|tab2a7-10f|tab2a7-20f|tablet|tb2-x30f|tb3-710f|tb3-710i|tb3-850f|tb3-850m|tb3-x70f|tb-8504f|tb-8704f|tb-x103f|tb-x304f|tc802a|tf300t|tf700t|touchpad|tf201|tf101|venue 7 3730|venue 7 hspa+|venue 8 3830|venue 8 7840|venue 8 hspa+|vk810 4g|vk815|vodafone smart ii|xolo a700|xoom|yb1-x90f|yoga b6000-f|yoga b8000-f|yt3-850f|yt3-x50f|yt3-x90f|yt-x703f|zaffire 1010/i.test(n.toLowerCase());return e&&(Cbola.Env.PageProperties.isMobile=!1),e&&-1===n.search("PC")}),getRunTimeInSecs:function(){var e=Math.abs(((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())/1e3);return Math.floor(100*e)/100},getRunTimeInMilis:function(){return Math.abs((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())+"ms"},generateViewId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if(e>t){var i=e;e=t,t=i}var o=Math.random();return l(e+Math.round(o*(t-e)))},generateDoubleRandomViewID:function(){var e=s.toString().split("").length,t=[3,2].reduce(function(t,i){return t+=Math.round((s+Math.random()*(a-s))/Math.pow(10,e-i))},"");return l(t)},replaceAll:function(e,t,o){return i.isEmpty(o)?o:o.replace(new RegExp(e,"g"),t)},chromeVersion:i.memoize(function(){var e=n.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):0}),setGlobalRedirectTime:function(){var e=Cbola.Common.LocalStorageService,t=Cbola.Env.PageProperties,i=e.getItem(o.dateTimeWhenScriptExecute)||"";e.removeItem(o.dateTimeWhenScriptExecute);var n=i.split("&"),r=n.pop();t.publisherScriptExecutionTime=r?parseInt(r):null;var a=t.publisherScriptExecutionTime?t.startDateFileUploaded.getTime()-t.publisherScriptExecutionTime:0;return Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_BLUE,"Redirection server duration: "+a+"ms"),a},getZIndexForElement:function(){var e=o.ZIndexLayer-o.ZIndexLayers;return o.ZIndexLayers+=1,1>e&&(e=0===o.ZIndexLayer?0:1),e},checkIfQueryStingExist:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=Cbola.Env.PageProperties,r=e.ParentId,a=this.getUrlParams()["cbolagameset"],s=n.originalPathNameHost;if(parseInt(a)===r)return s;if(i.isNumber(r)&&(s=n.originalPathNameHost+(n.originalPathNameHost.indexOf("?")>-1?"&":"?")+"cbolaGameSet="+r),o.urlsForAuto.indexOf(s)>-1)return s;if(t){o.urlsForAuto.push(s);var l={PublisherId:Cbola.Env.activePid,UrlData:{Url:s.toLowerCase(),Hash_128_Bit:CryptoJSCbola.MD5(s.toLowerCase()).toString(),Hash_160_Bit:CryptoJSCbola.SHA1(s.toLowerCase()).toString()},AbTestId:o.abTestId,IsMobile:n.isMobile,IsTablet:n.isTablet,CategoryId:Cbola.Env.Category,Tags:Cbola.Env.tags,Title:Cbola.Env.title,Body:Cbola.Env.body},d=JSON.stringify(l);Cbola.Logger.getInstance().info("Cbola_getPageElements_forAutomation start. json: "+d),fetch(o.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:d})}return s},checkImageLoaded:function(e){var t=new Image;t.src=e,t.onload=function(){},t.onerror=function(){Cbola.Logger.getInstance().errorM(r+".checkImageLoaded","Image not loaded. src: "+e)}},checkUrlParamExist:function(e){var t=window.location.href.toLowerCase(),i=t.search(e);return i>-1},getLocationHref:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t="getLocationHref",o="";try{var n=!0;do this.isAboutBlankIframe(e)||this.isKnownSafeFrame(e)?(o=e.document.referrer,e.frameElement?e=e.parent:n=!1):n=!1;while(n)}catch(a){Cbola.Logger.getInstance().errorM(r+"."+t,r+"."+t+" failed getting referrer URL outside an iframe. error: ",a)}return i.isEmpty(o)?e.location.href:o},getLowerLocationHref:function(){return this.getLocationHref().toLowerCase()},queryStringCut:function(){var e=this.getLowerLocationHref();if(/[I,i]gnr/.test(e)){var t=e.split("?");return o.queryString=t[1],o.ignoreQueryString=!0,t[0]}o.queryString="",o.ignoreQueryString=!1;var n=document.querySelector('meta[property="carambola"]');return!/[d,D]irty/.test(e)&&n?i.toLower(n.getAttribute("content")):e},queryStringCutRegex:function(){var e=this.queryStringCut();try{var t=Cbola.Env.domainId;if(null!==t&&t>0){var i=o.jsonRegEx,n=i[t]||i[0];if(n){var r=e.search(new RegExp(n,"ig"));-1!==r&&(e=e.substring(0,r))}}}catch(a){Cbola.Logger.getInstance().info(a)}return e},isInIframe:i.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return window.top!==e}catch(t){return!0}}),isFriendlyIframe:i.memoize(function(){if(this.isInIframe())try{if(window.frameElement)return!0;if("undefined"!=typeof inDapIF&&inDapIF)return!0}catch(e){return!1}return!1}),isWindowTopSupported:i.memoize(function(){if(this.isFriendlyIframe())try{if(window.top.document)return!0}catch(e){return!1}return!1}),isKnownSafeFrame:i.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=["tpc.googlesyndication.com","pubads.g.doubleclick.net","partner.googleadservices.com"];try{return this.isInIframe(e)&&new RegExp(t.join("|"),"gi").test(e.location.href)}catch(i){return!1}}),isAboutBlankIframe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return this.isInIframe(e)&&/about:blank/gi.test(e.location.href)}catch(t){return!1}},getCurrentAbTestId:function(){return o.abTestSkipContent?1:o.abTestId},cumulativeOffset:function(e){var t=0,i=0;do{var o=0,n=0;if(window.getComputedStyle&&window.WebKitCSSMatrix){var r=getComputedStyle(e).transform||getComputedStyle(e).webkitTransform,a=new WebKitCSSMatrix(r);o=a.m41,n=a.m42}t+=e.offsetTop+n||0,i+=e.offsetLeft+o||0,e=e.offsetParent}while(e);return{top:t,left:i}},getPrevSibling:function(e){for(var t=e.previousSibling;t;){if(t.nodeType===Node.ELEMENT_NODE)return t;t=t.previousSibling}return null},fixPixelHeight:function(e){try{var t=this.getPrevSibling(e);"img"===t.tagName.toLowerCase()&&t.src.indexOf("pixel.watch")>-1&&(t.style["display"]="block")}catch(i){}},detectDeviceOrientation:function(){var e=void 0,t=void 0,i=document.getElementsByClassName("cbola-orientation-src");if(i.length>0)i=i[0],e=Math.max(i.clientWidth,0),t=Math.max(i.clientHeight,0);else{var o=window;window!==window.parent&&(o=window.parent);try{e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}catch(n){o=window,e=o.innerWidth||o.document.documentElement.clientWidth||o.document.body.clientWidth,t=o.innerHeight||o.document.documentElement.clientHeight||o.document.body.clientHeight}}return e>t?(Cbola.Env.PageProperties.isPortrait=!1,"landscape"):(Cbola.Env.PageProperties.isPortrait=!0,"portrait")},injectStyle:function(e,t){var i=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=t);else try{i.innerHTML=t}catch(o){i.textContent=t}return i},initPayload:function(){var e=Cbola.Env,t=this.getCurrentAbTestId();return{PublisherId:e.activePid,UrlData:{Url:e.PageProperties.hostname,Hash_128_Bit:e.PageProperties.urlHashMD5,Hash_160_Bit:e.PageProperties.urlHashSHA1},AbTestId:t,ScriptDomainId:Cbola.Env.domainId,IsMobile:e.PageProperties.isMobile,IsTablet:e.PageProperties.isTablet}},isGoogleWebLightAgent:i.memoize(function(){return/^.*?\bAndroid\b.*?\bgoogleweblight\b.*?$/.test(n)}),updateEnv:function(e){Cbola.Env=i.extend(Cbola.Env,e);var t={PageId:0,Category:0,Domain:0};i.defaults(Cbola.Env,t),i.extendWith(o,e.DefaultSettings,function(e,t){return"undefined"==typeof t?e:t})},parseBool:function(e){return e===!0||"true"===e||"number"==typeof e&&0!==e},dataset:function(){if(arguments.length<2)return null;var e=arguments.length<=0?void 0:arguments[0];if(!e)return null;var t=arguments.length<=1?void 0:arguments[1];return arguments.length>2&&(e.dataset?e.dataset[i.camelCase(t)]=arguments.length<=2?void 0:arguments[2]:e.setAttribute("data-"+i.kebabCase(t),arguments.length<=2?void 0:arguments[2])),e.dataset?e.dataset[i.camelCase(t)]||null:e.getAttribute("data-"+i.kebabCase(t))},datasetRemove:function(e,t){e.dataset?delete e.dataset[i.camelCase(t)]:e.removeAttribute("data-"+i.kebabCase(t))},getUrlParams:function(){var e={};try{e=this.getParamsFromUrl(window.top.location.href)}catch(t){e=this.getParamsFromUrl(window.location.href)}return e},integrationTypeCheck:function(){var e=Cbola.Enums.IntegrationTypes;try{return this.isInIframe()?this.isFriendlyIframe()?e.DFP:this.isKnownSafeFrame()?e.SAFE_FRAME:e.IFRAME:e.NORMAL}catch(t){return e.ERROR}},validateRGBArray:function(e){if(!i.isArray(e)||3!==e.length)return null;e=e.map(function(e){return parseInt(e)});for(var t=0;t<e.length;t++)if(isNaN(e[t])||e[t]<0||e[t]>255)return null;return e},rgbStringToArray:function(e){if("string"!=typeof e)return null;var t=e.indexOf("("),i=e.indexOf(")");if(-1===t||-1===i)return null;var o=e.substring(t+1,i).split(",");return this.validateRGBArray(o)},rgbToRgba:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.rgbStringToArray(e);return null===i?null:(i.splice(3,i.length,t),"rgba("+i.join(",")+")")},rgbToHSL:function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var o=void 0,n=void 0,r=0,a=0,s=0;if(1===t.length){var l=this.rgbStringToArray(t[0]);if(null===l)return null;o=l[0]/255,n=l[1]/255,r=l[2]/255}else{if(3!==t.length)return null;if(t=this.validateRGBArray(t),null===t)return null;o=t[0]/255,n=t[1]/255,r=t[2]/255}var d=Math.min(o,n,r),c=Math.max(o,n,r),h=(d+c)/2,m=c-d;if(m){switch(s=.5>h?m/(c+d):m/(2-c-d),s=Math.round(100*s),c){case o:a=(n-r)/m;break;case n:a=2+(r-o)/m;break;case r:a=4+(o-n)/m}a=Math.round(60*a+(0>a?360:0))}return h=Math.round(100*h),{h:a,s:s,l:h}},generateGradientBreaksFromRGB:function(e,t){var o=d.rgbToHSL(e);if(i.isNil(o))return null;for(var n=90,r=o.l,a=.25*(n-r),s=[],l=0;t>l;l++){var c=r;t-1>l&&(c=r+Math.round(a),a/=2),s.push("hsla("+o.h+","+o.s+"%,"+c+"%, "+(0===l?.5:1)+")")}return s},replaceCommentWithElement:function(e,t,i){if(t.nodeType===Node.COMMENT_NODE&&t.textContent.trim()===e)return t.parentNode.replaceChild(i,t),!0;for(var o=t.firstChild;o;){if(this.replaceCommentWithElement(e,o,i))return!0;o=o.nextSibling}return!1},before:function(e,t){e.parentNode.insertBefore(t,e)},after:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},preappend:function(e,t){e.insertBefore(t,e.firstChild)},encodePayload:function(e){function t(e,o,n){var r=void 0,a=i.isArray(o),s=i.isPlainObject(o);i.forEach(o,function(i,o){r="undefined"==typeof i?"undefined":_typeof(i),n&&(o=n+"["+(s||"object"===r||"array"===r?o:"")+"]"),!n&&a?e.add(i.name,i.value):"array"===r||"object"===r?t(e,i,o):e.add(o,i)})}var o=[];return o.add=function(e,t){i.isFunction(t)&&(t=t()),i.isNil(t)&&(t=""),this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},t(o,e),o.join("&").replace(/%20/g,"+")},getBitlyUrlAsync:function(e,t){if(""===o.bitlyUrl){var n="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(d.checkIfQueryStingExist(e));fetch(n).then(function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t}).then(function(n){i.isNil(n.url)?o.bitlyUrl=d.checkIfQueryStingExist(e,!0):o.bitlyUrl=n.url,t(o.bitlyUrl)}).catch(this.noOp)}else t(o.bitlyUrl)},getParamsFromUrl:i.memoize(function(e){var t={};return i.isNil(e)?{}:(e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,i,o){t[i.toLowerCase()]=o}),t)}),isPassiveEventSupported:i.memoize(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(i){}return e}),extractLinksFromText:function(e){for(var t="",o=[],n=/(https?:\/\/[^\s]+)/g;null!=(t=n.exec(e));){var r=t[0];r=i.trimEnd(r,""),o.push({idx:t.index,url:r})}return o},transform:function(e,t){if(!e||!e.style)return null;var o=e.style,n=["-webkit-","-moz-","-ms-","-o-",""];i.forEach(n,function(e){o[e+"transform"]=t})},removeTransform:function(e){if(!e||!e.style)return null;var t=e.style,o=["-webkit-","-moz-","-ms-","-o-",""];i.forEach(o,function(e){t.removeProperty(e+"transform")})},withAnimationFramePromise:function(t){return new Promise(function(o,n){i.isFunction(t)?e(function(){t(),e(o)}):n("No function provided")})},toggleTransition:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,n="cbola-disable-transition",r="transitionToggleCount";if(i.isNil(e))return Promise.reject(new Error("No element provided for class toggling"));var a=e.classList,s=function(){return t.withAnimationFramePromise(function(){a[o?"remove":"add"](n)})},l=parseInt(this.dataset(e,r)),d=0;return d=isNaN(l)?o?0:1:Math.max(o?l-1:l+1,0),this.dataset(e,r,d),o&&a.contains(n)&&0===d?s():!o&&!a.contains(n)&&d>0?s():Promise.resolve()},dotdotdot:function(t){return new Promise(function(o){function n(){t.parentElement.contains(c)?a():e(n)}function r(){return c.offsetHeight>t.offsetHeight}function a(){if(s.length>0&&r())return s=s.substr(0,s.length-1),c.innerText=s+"...",void a();if(s.length>0){var e=c.innerHTML;if(e.length>0){t.innerText=e,e=t.innerText;for(var i=d.extractLinksFromText(e),n=0;n<i.length;n++){var h=i[n];h.text=h.url,h.url=l[n].url,e=e.replace(h.text,'<a href="'+h.url+'" target="_blank">'+h.text+"</a>")}t.innerHTML=e}}c.remove(),o(t)}t.style["white-space"]="normal",t.style["overflow"]="hidden";var s=t.textContent,l=d.extractLinksFromText(s),c=t.cloneNode(!0);i.extend(c.style,{visibility:"hidden",overflow:"visible",width:t.offsetWidth+"px",height:"auto"}),d.after(t,c),n()})},documentReady:function(e){var t=Cbola.Env.topWindow;/complete|loaded|interactive/.test(t.document.readyState)?e():t.addEventListener("DOMContentLoaded",e)},isPageReady:function(){return/complete|loaded/gi.test(Cbola.Env.topWindow.document.readyState)},pageReady:function(e){this.isPageReady()?e():Cbola.Env.topWindow.addEventListener("load",e)},isElementDisplayed:function(e){return!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))},isElementAttachedAsync:function(t,o,n){var a=this;return t&&o?(n=i.isFunction(n)?n:function(){o.appendChild(t)},window.MutationObserver?new Promise(function(r){var s={childList:!0},l=function(o,n){o=a.slice.call(o);for(var s=0;s<o.length;s++){var l=o[s];if("childList"===l.type&&i.some(l.addedNodes,function(e){return e===t})){n.disconnect(),e(r);break}}},d=new MutationObserver(l);d.observe(o,s),n()}):this.isStyleAppliedAsync(t,o,n)):Promise.reject(new Error(r+".isElementAttachedAsync No parent element provided"))},isStyleAppliedAsync:function(t,o,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cbola-inserted";if(!t||!o)return Promise.reject(new Error(r+".isStyleAppliedAsync No parent element provided"));n=i.isFunction(n)?n:function(){o.appendChild(t)};var s=["animationstart","MSAnimationStart","webkitAnimationStart"];return new Promise(function(r){var l=function n(l){l.target===t&&l.animationName===i.camelCase(a)&&(i.forEach(s,function(e){o.removeEventListener(e,n)}),t.classList.remove(a),e(r))};i.forEach(s,function(e){o.addEventListener(e,l,!1)}),n(),t.classList.add(a)})},getDocumentHeight:function(e){var t=e||Cbola.Env.viewportWindow;if(!t)return null;var i=t.document.body,o=t.document.documentElement;return Math.max(i.scrollHeight,o.scrollHeight,i.offsetHeight,o.offsetHeight,i.clientHeight,o.clientHeight)},getElementPixelsFromTop:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e||!t.document.body.contains(e)||!Cbola.Env.viewportWindow)return null;var i=d.cumulativeOffset(e).top;return i>d.getDocumentHeight(t)||0>i?0:t===Cbola.Env.viewportWindow?i:i+this.getElementPixelsFromTop(t.frameElement,t.parent)},createAdIframe:function(e){var t=e.width,i=void 0===t?0:t,o=e.height,n=void 0===o?0:o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,a=document.createElement("iframe"),s="allow-scripts allow-forms allow-same-origin allow-popups";return this.chromeVersion()>=58&&(s+=" allow-top-navigation-by-user-activation"),r&&a.setAttribute("sandbox",s),a.setAttribute("scrolling","no"),a.setAttribute("marginwidth","0"),a.setAttribute("marginheight","0"),a.setAttribute("frameborder","0"),a.style.setProperty("border","0","important"),a.style.setProperty("margin","0","important"),a.style["vertical-align"]="bottom",a.style["width"]=i+"px",a.style["height"]=n+"px",a},push:[].push,slice:[].slice,noOp:function(){}};return d}(),window.Cbola=window.Cbola||{},Cbola.TaskManager=function(){var e=250,t=Cbola,i=t._,o={},n=function(){this.loopIteration=null,this.isRunning=!1,this.loopIterationsCounter=0,this.deferredTasksQueue=[]};return n.prototype.executeTask=function(e,t,i){"undefined"==typeof i&&(i=window),e.apply(i,t)},n.prototype.taskExecutionLoop=function(){this.isRunning=!0,this.loopIteration=null,this.loopIterationsCounter++;var t=this.deferredTasksQueue.length;if("undefined"==typeof this.deferredTasksQueue)return Cbola.Logger.getInstance().warnOnceM("TaskManager.taskExecutionLoop","TaskManager::taskLoop -> deferredTasksQueue is undefined"),void(this.isRunning=!1);for(var i=0;t>i;i++){var o=this.deferredTasksQueue.shift();this.executeTask.apply(this,o)}this.deferredTasksQueue.length>0?this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e):(this.loopIteration=null,this.isRunning=!1)},n.prototype.addTask=function(t,i,o,n){var r=[t,i,o,n];this.deferredTasksQueue.push(r),this.isRunning||this.loopIteration||(this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),e))},n.prototype.removeTask=function(e){var t=this;Cbola._.remove(this.deferredTasksQueue,function(i){return"undefined"!=typeof i[3]&&t.getTaskName(i)===e})},n.prototype.getTaskName=function(e){var t=e[3],i=e[0];return t?t:i?i.name?i.name:"function":""},n.prototype.addExpBackoffTask=function(e){function t(){if(i.isArray(a))return a.shift();var e=a;return a=l>a?Math.floor(a)+1:a,1e3*Math.pow(e,2)}var n=e.fn,r=e.backoff,a=void 0===r?.6:r,s=e.maxBackoffGrowth,l=void 0===s?4:s,d=e.maxBackoffIterations,c=void 0===d?4:d,h=e.name,m=void 0===h?null:h;if("function"==typeof n){var p=1;c=i.isArray(a)?a.length+1:c,function e(){if(p>c||n(p,c===p)===!1)return void(m&&(o[m]=null));p+=1;var i=window.setTimeout(e,t());m&&(o[m]=i)}()}},n.prototype.removeExpBackoffTask=function(e){var t=o[e];delete o[e],t&&clearTimeout(t)},new n}(),window.Cbola=window.Cbola||{},Cbola.Logger=window.Cbola.Logger||function(){function e(){var e=Date.now(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)});return t}function t(){function t(e){if(!(v.length<1||_))if(_=!0,"undefined"==typeof e&&(e=v.splice(0,Math.min(5,v.length)),e.retries=0),e.retries<Cbola.Logger.MAX_RETRIES_PER_LOG)if(0===e.retries)s(e);else{var i=Math.min(Math.pow(2,e.retries-1),16);setTimeout(function(){return s(e)},1e3*i)}else l("Logger -> Sending log to server failed "+Cbola.Logger.MAX_RETRIES_PER_LOG+" times, discarding log entry: {"+e+"}",Cbola.Logger.Levels.WARNING),_=!1,t()}function i(){y=Cbola.Env.clientVersion?", version: "+Cbola.Env.clientVersion:"";for(var e=0;e<u.length;e++){var i=u[e];a(i[0],i[1],i[2])}u=[],_||t()}function a(t,i,o){i+=""+Cbola.Logger.serverSuffix()+y+", uuid: "+e()+"]";var n={payload:{LogType:t===Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER?Cbola.Logger.Levels.ALERT:t,Message:i,MethodName:o||r.callingMethod,ClassName:"abtest_"+Cbola.Config.abTestId},level:t,retries:0};v.push(n)}function s(e){function i(){if(!n){n=!0,_=!1,e.retries++;var i=Math.min(Math.pow(2,e.retries-1),16);l("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+p.name+": "+p.message+"), retrying in "+i+" seconds...",Cbola.Logger.Levels.DEBUG),t(e)}}for(var n=!1,r=e.map(function(e){return e.payload}),a="",s=r.length-1;s>=0;s--){var d=r[s];1===e.retries?d.Message=d.Message.substring(0,d.Message.length-1)+", retries: "+e.retries+"]":e.retries>1&&(d.Message=d.Message.substring(0,d.Message.length-2)+e.retries+"]");for(var c in d)a+="Logs["+s+"]["+c+"]="+encodeURIComponent(d[c])+"&"}a=a.substr(0,a.length-1);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(4===h.readyState)if(200===h.status||204===h.status)l("Logger -> Log succesfully sent to server: { "+a+" }",Cbola.Logger.Levels.DEBUG_LOGGER),_=!1,t();else if(!n){n=!0,e.retries++;var i=Math.min(Math.pow(2,e.retries-1),16);l("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+h.status+": "+h.statusText+"), retrying in "+i+" seconds...",Cbola.Logger.Levels.DEBUG),_=!1,t(e)}};try{var m=w||Cbola.Config.Defaults.loggingServer+"AddLogs";if(o.isEmpty(Cbola.Config.Defaults.loggingServer)&&o.isEmpty(w))return void i();h.open("POST",m,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onerror=i,h.send(a)}catch(p){i()}}function l(){var e="CBOLA::",t=n.slice.call(arguments),i=t.length>1?t.pop():Cbola.Logger.DEFAULT_LEVEL;if(f>=i){if("[*]"===t[0]&&(e+=t[0],t.shift()),t[0]&&t[0].hasOwnProperty("LoggerColor")){e="%c"+e;var r=t.shift().style;t[0]=e+" "+t[0],t.splice(1,0,r)}else t.unshift(e);i<=Cbola.Logger.Levels.WARNING&&!o.isEmpty(Cbola.Logger.getInstance().callingMethod)&&(t.shift(),t.unshift(Cbola.Logger.getInstance().callingMethod+"(): "),t.unshift(e)),i===Cbola.Logger.Levels.WARNING?console.warn.apply(console,t):i===Cbola.Logger.Levels.ERROR||i===Cbola.Logger.Levels.CRITICAL?console.error.apply(console,t):console.log.apply(console,t)}}function d(e){return function(){var t=n.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();return i.callingMethod="",i.log.apply(i,t),i}}}function c(e){return function(){var t=n.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var o=Cbola.Logger.getInstance();return o.callingMethod=i,t.push(e),o.log.apply(o,t),o}}}}function h(e){return function(){var t=n.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var i=Cbola.Logger.getInstance();i.callingMethod="";var o=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return b.indexOf(o)>-1?i:(b.push(o),i.log.apply(i,t),i)}}}function m(e){return function(){var t=n.slice.call(arguments);if(null!==t){var i=t.shift();if(null!==i&&0!==t.length){var o=Cbola.Logger.getInstance();t.push(e),o.callingMethod=i;var r=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return b.indexOf(r)>-1?o:(b.push(r),o.log.apply(o,t),o)}}}}var p=!1,u=[],b=[],f=Cbola.Env&&Cbola.Env.DEBUG?Cbola.Logger.Levels.TRACE:Cbola.Logger.Levels.OFF,g=Cbola.Logger.Levels.ERROR,y="",v=[],w=null,_=!1;return{log:function(){var e=n.slice.call(arguments);if(null!==e&&0!==e.length){1===e.length&&e.push(Cbola.Logger.DEFAULT_LEVEL);var i=e[e.length-1],o=g>=i||i===Cbola.Logger.Levels.TRACE;if(o&&e.unshift("[*]"),l.apply(r,e),o){e.shift(),e.pop(),e[0].hasOwnProperty("LoggerColor")&&e.shift();var s=e.reduce(function(e,t){return e+" "+JSON.stringify(t)});p?(a(i,s),_||t()):u.push([i,s,r.callingMethod])}return r}},alwaysSend:d(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),critical:d(Cbola.Logger.Levels.CRITICAL),error:d(Cbola.Logger.Levels.ERROR),warn:d(Cbola.Logger.Levels.WARNING),notify:d(Cbola.Logger.Levels.NOTICE),info:d(Cbola.Logger.Levels.INFO),debug:d(Cbola.Logger.Levels.DEBUG),trace:d(Cbola.Logger.Levels.TRACE),alwaysSendOnce:h(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnce:h(Cbola.Logger.Levels.ERROR),warnOnce:h(Cbola.Logger.Levels.WARNING),notifyOnce:h(Cbola.Logger.Levels.NOTICE),infoOnce:h(Cbola.Logger.Levels.INFO),debugOnce:h(Cbola.Logger.Levels.DEBUG),traceOnce:h(Cbola.Logger.Levels.TRACE),alwaysSendM:c(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),criticalM:c(Cbola.Logger.Levels.CRITICAL),errorM:c(Cbola.Logger.Levels.ERROR),warnM:c(Cbola.Logger.Levels.WARNING),notifyM:c(Cbola.Logger.Levels.NOTICE),alwaysSendOnceM:m(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnceM:m(Cbola.Logger.Levels.ERROR),warnOnceM:m(Cbola.Logger.Levels.WARNING),notifyOnceM:m(Cbola.Logger.Levels.NOTICE),enableServer:function(){p=!0,i()},set level(e){f=e},get level(){return f},set serverLevel(e){g=e},get serverLevel(){return g},get queue(){return v},set serverUrl(e){w=e},get serverUrl(){return w}}}var i=Cbola,o=i._,n=i.Utils,r=void 0;
return{getInstance:function(){return r||(r=t()),r}}}(),Cbola.Logger.MAX_RETRIES_PER_LOG=10,Cbola.Logger.Levels={ALWAYS_SEND_TO_SERVER:-999,ALERT:1,CRITICAL:2,ERROR:3,WARNING:4,NOTICE:5,INFO:6,DEBUG:7,TRACE:8,DEBUG_LOGGER:9,NONE:999},Cbola.Logger.DEFAULT_LEVEL=Cbola.Logger.Levels.INFO,Cbola.Logger.Colors={YELLOW:{LoggerColor:"yellow",style:"background: rgba(245, 210, 6, 1); color: black;font-size:13px"},RED:{LoggerColor:"red",style:"background: #8C0000; color: white;font-size:13px"},PALE_RED:{LoggerColor:"pale_red",style:"background: #FE4444; color: black;font-size:13px"},PALE_YELLOW:{LoggerColor:"pale_yellow",style:"background: rgb(250, 255, 202); color: black;font-size:13px"},PALE_GREEN:{LoggerColor:"pale_green",style:"background: rgb(229, 255, 215); color: black;font-size:13px"},PALE_BLUE:{LoggerColor:"pale_blue",style:"background: #98BDF1; color: black;font-size:13px"},PALE_PURPLE:{LoggerColor:"pale_purple",style:"color: #ce93d8;"},BLUE:{LoggerColor:"blue",style:"color: #2196f3;"},ORANGE:{LoggerColor:"orange",style:"color: rgb(255,140,0);"},GREEN:{LoggerColor:"green",style:"color: #0f9d58"}},Cbola.Env=Cbola.Env||{},Cbola.Env.domainId=Cbola.Env.domainId||0,Cbola.Env.activePid=Cbola.Env.activePid||0,Cbola.Env.wid=Cbola.Env.wid||0,Cbola.Logger.serverSuffix=Cbola._.memoize(function(){var e=Cbola.Utils.isMobile?"1":"0",t=Cbola.Utils.isTablet()?"1":"0";return"[did: "+Cbola.Env.domainId+", pid: "+Cbola.Env.activePid+", wid: "+Cbola.Env.wid+", pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+", abtestid: "+Cbola.Config.abTestId+", ismobile: "+e+", istablet: "+t}),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.LocalStorageService=Cbola.Common.LocalStorageService||function(){var e=Cbola,t=e._,i=e.Logger.Colors,o=Cbola.Logger.getInstance(),n=function(){var e="Cbola_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return o.info(i.PALE_RED,"localStorage is not available in this device"),!1}}(),r=n,a=function(e){return function(){if(r)try{for(var t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];return e.apply(this,i)}catch(n){}return null}},s=function(){};s.prototype={setItem:a(function(e,t){return!localStorage.setItem(e,t)}),getItem:a(function(e){return localStorage.getItem(e)}),removeItem:a(function(e){return!localStorage.removeItem(e)}),clear:function(){if(n)try{t.forEach(this.KEYS,function(e){return localStorage.removeItem(e)})}catch(e){}},setEnablement:function(e){r=n&&e}};var l=new s;return l.KEYS={CUID:"cbola_userId",CBOLA_ITEMS_HISTORY:"cbola_itemsArrayHistoryUser",ENABLE_TIMELINE:"cbola_timeline"},l}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.TimelineService=function(){var e=.05,t=Cbola,i=t._,o=t.Common.LocalStorageService,n=Cbola.Logger.getInstance(),r=!i.isEmpty(o.getItem(o.KEYS.ENABLE_TIMELINE)),a=!i.isUndefined(window.performance&&window.performance.now),s=function(){this.counter=0,this.setEnabled(i.random(1,!0)<=e||r),this.isEnabled&&n.info(Cbola.Logger.Colors.BLUE,"TimelineService is active")};return s.prototype.mark=function(e,t){if(this.isEnabled){var o=performance.now();o=i.round(o,2);var r='timeline - "'+e+'" marked on: '+o+" ms ("+this.counter++ +")";n.alwaysSend(Cbola.Logger.Colors.BLUE,r),i.isUndefined(performance.mark)||performance.mark(e),t&&this.lastMark&&performance.measure&&performance.measure("cbola - "+e,this.lastMark,e),this.lastMark=e}},s.prototype.markStart=function(e){this.isEnabled&&this.mark(e+" started")},s.prototype.markEnd=function(e){if(this.isEnabled){this.mark(e+" completed");try{performance.measure&&performance.measure("cbola - "+e,e+" started",e+" completed")}catch(t){}}},s.prototype.record=function(e,t){return function(){Cbola.Common.TimelineService.markStart(t);for(var i=arguments.length,o=Array(i),n=0;i>n;n++)o[n]=arguments[n];e.apply(this,o),Cbola.Common.TimelineService.markEnd(t)}},s.prototype.setEnabled=function(e){this.isEnabled=a&&e},new s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.CDN=Cbola.Common.CDN||function(){var e=Cbola,t=e._,i=e.Env,o=e.Utils,n=e.Enums,r=e.Config,a=e.Common.TimelineService,s=e.Logger.Colors,l=Cbola.Logger.getInstance(),d="CDN",c=5e3,h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.noOp,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=i.PageProperties.hostname,s=function(e){return function(){l.errorM(d+"."+r,"Request to CDN failed, due to: "+e+". path: "+a+" "+(navigator&&navigator.userAgent?", User Agent: "+navigator.userAgent:"")),n()}},h=new XMLHttpRequest;h.onload=function(){if(h.status>=200&&h.status<300){var e=JSON.parse(h.response);t(e)}else n()},h.open("GET",e,!0),h.timeout=c,h.onerror=s("error"),h.ontimeout=s("timeout"),h.send()};return{_getPageElements:function(e,c){return new Promise(function(m,p){var u="_getPageElements",b=i.activePid,f=i.domainId,g=i.PageProperties,y=""+r.Defaults.CDN+o.getCurrentAbTestId()+"/"+b+"/"+(0===f?"all":f)+"/"+g.urlHashMD5+"_"+g.urlHashSHA1+"_incontent_unified";g.isTablet?y+="_tablet":g.isMobile&&(y+="_mobile"),y+=0===parseInt(e)?"":"_"+e,y+=c?"_fallback_"+c:"",y+=".json";var v=function(i){var r=t.get(i,"Status");1===r?(i.widgetId=e,o.updateEnv(i),"undefined"!=typeof i.PageId&&l.info(s.PALE_YELLOW,"Page Id: "+i.PageId),g.IsServerCall=i.IsServerCall=n.isServerCallTypes.FROM_CDN,a.markEnd(d+"."+u),m(i)):r?(l.info(s.PALE_YELLOW,d+"."+u+" failed due to content server bad status: "+i.Status+". Not calling server."),Cbola.Common.AnalyticsService.setPageRequest(i.Status,n.isServerCallTypes.FROM_CDN),p(!0)):(l.info(d+"."+u+" returned bad response."),p())};h(y,v,p,u)})},_getIndices:function(e,n,s,l,c){return new Promise(function(m,p){var u=i.activePid,b=i.domainId,f="_getIndices",g=r.Defaults.EX_CDN+"GetIndices/"+o.getCurrentAbTestId()+"/"+u+"/"+(0===b?"all":b)+"/"+e+"/"+n+"/"+c+"/"+l,y=function(e){var i=t.get(e,"Status");1===i?(a.markEnd(d+"."+f),m(e)):i?(Cbola.Common.AnalyticsService.setPageElementRequest({elementId:s,loadStatus:i}),m()):p()};h(g,y,p,f)})}}}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.UserService=function(){function e(){y[n.Language.english]={ad:"Ad",add:"add",addThisWidgetToYourSite:"add this widget to your site",addWidgetToYourSite:"add widget to your site",addThisToYourSite:"add this to your site",advertisement:"Advertisement",anotherQuiz:"another quiz",backToGame:"back to game",canYouBeatThat:"Can you beat that?",challenge:"Challenge",correct:"Correct",discoverTheMost:"Discover the most mind-blowing facts out there!",falseButton:"False",iScored:"I scored",nextQuiz:"Next quiz",playingIn:"playing in",promotedBy:"promoted by",poweredBy:"powered by",question:"Question",score:"Score",seconds:"seconds",skip:"Skip",start:"Start",startsIn:"starts in:",thankYouForPlaying:"Thank you for playing !",toYourSite:"to your site",trueButton:"True",trueOrFalse:"True or False?",upNext:"Up next: ",whatsNext:"whats next ?",wrong:"Wrong",youMayLike:"You May Like...",yourFriends:"your friends",yourScore:"Your score",YouScoredaFair:"You Scored a Fair",YouScoredaLame:"You Scored a Lame",YouScoredanAwesome:"You Scored an Awesome",YouScoredaMighty:"You Scored a Mighty",youScoredaPerfect:"You Scored a Perfect",YouScoredaRidiculous:"You Scored a Poor"},y[n.Language.spanish]={ad:"Anuncio",add:"Aade",addThisWidgetToYourSite:"Aade este widget a tu sitio",addWidgetToYourSite:"aade este widget a tu sitio",advertisement:"Publicidad",anotherQuiz:"otro juego",backToGame:"volver al juego",canYouBeatThat:"Puedes vencerme?",challenge:"Desafa",correct:"Correcto",discoverTheMost:"Descubre las curiosidades ms interesantes!",falseButton:"Falso",iScored:"Obtuve un puntaje de",nextQuiz:"Prximo Juego",playingIn:"jugando",question:"Pregunta",score:"Puntaje",seconds:"segundos",skip:"Omitir",start:"comienza",startsIn:"comienza en:",thankYouForPlaying:"gracias por jugar !",toYourSite:"a tu sitio",trueButton:"Verdadero",trueOrFalse:"Verdadero o Falso?",upNext:"Siguiente: ",wrong:"Incorrecto",youMayLike:"te puede interesar",yourFriends:"a tus amigos",yourScore:"Tu Puntaje",YouScoredaFair:"Tu Puntaje Final es",YouScoredaLame:"Tu Puntaje Final es",YouScoredanAwesome:"Tu Puntaje Final es",YouScoredaMighty:"Tu Puntaje Final es",youScoredaPerfect:"Tu Puntaje Final es",YouScoredaRidiculous:"Tu Puntaje Final es"},y[n.Language.portuguese]={ad:"anncio",advertisement:"publicidade",addThisWidgetToYourSite:"adicione este widget ao seu site",addWidgetToYourSite:"adicione este widget ao seu site",anotherQuiz:"outro jogo",backToGame:"voltar ao jogo",canYouBeatThat:"Voc pode me vencer?",challenge:"Desafie",correct:"Correto",falseButton:"Falso",iScored:"Obtive uma pontuao",nextQuiz:"Prximo Jogo",playingIn:"jogando",question:"Pergunta",score:"Pontuao",seconds:"segundos",skip:"pular",start:"comea",startsIn:"comea em:",thankYouForPlaying:"obrigado por jogar !",toYourSite:"ao seu site",trueButton:"Verdadeiro",trueOrFalse:"Verdadeiro ou Falso?",upNext:"Seguinte: ",wrong:"Incorreto",youMayLike:"voc pode se interessar",yourFriends:"os seus amigos",yourScore:"Sua Pontuao",YouScoredaFair:"Sua Pontuao Final ",YouScoredaLame:"Sua Pontuao Final ",YouScoredanAwesome:"Sua Pontuao Final ",YouScoredaMighty:"Sua Pontuao Final ",youScoredaPerfect:"Sua Pontuao Final ",YouScoredaRidiculous:"Sua Pontuao Final "},y[n.Language.russian]={ad:"",add:"",addThisWidgetToYourSite:"     ",advertisement:"",addWidgetToYourSite:"    ",anotherQuiz:" ",backToGame:"  ",canYouBeatThat:"   ?",challenge:" ",correct:"",falseButton:"",iScored:" ",nextQuiz:" ",playingIn:",  ",question:"",score:"",sconds:"",skip:"",start:"",startsIn:" ",thankYouForPlaying:"  ",toYourSite:"  ",trueButton:"",trueOrFalse:"  ?",upNext:"",whatsNext:" ",wrong:"",youMayLike:"  ",yourFriends:" ",yourScore:" ",YouScoredaFair:" ",YouScoredaLame:" ",YouScoredanAwesome:" ",YouScoredaMighty:" ",youScoredaPerfect:" ",YouScoredaRidiculous:" "},y[n.Language.french]={ad:"Publicit",advertisement:"Publicit",canYouBeatThat:"Tu peux me battre?",challenge:"Dfiez ",correct:"Correct",falseButton:"Faux",iScored:"J`ai totalis",nextQuiz:"Prochain quiz",playingIn:"en jouant au Quiz",question:"Question",score:"Score",start:"Dbut",trueButton:"Vrai",trueOrFalse:"Vrai ou Faux",wrong:"Incorrect",yourFriends:"Vos amis",yourScore:"Votre score",YouScoredaFair:"Votre score est de",YouScoredaLame:"Votre score est de",YouScoredanAwesome:"Votre score est de",YouScoredaMighty:"Votre score est de",youScoredaPerfect:"Votre score est de",YouScoredaRidiculous:"Votre score est de"},y[n.Language.german]={ad:"Werbung",advertisement:"Werbung"}}var t=Cbola,i=t._,o=t.EventBus,n=t.Config,r=t.Common.LocalStorageService,a=r.KEYS,s=o.Events,l=Cbola.Logger.getInstance(),d="12345678",c=function(e){r.setEnablement(e),e||r.clear()},h=n.Language.english,m=a.CUID,p=a.CBOLA_ITEMS_HISTORY,u=!1,b="0",f=null,g=h,y={},v=null;e();var w=function(){this._vocabulary=y[h],b=r.getItem(m)||"0",c(!this.isEUUser())};return w.prototype.getItemsHistory=function(){if(f)return f;var e=r.getItem(p);return e?(e=i.trimEnd(e,","),f=i.split(e,",")):[0]},w.prototype.addItemsToHistory=function(e){var t=this.getItemsHistory();t&&(e=i.union(t,e));var o=i.trimEnd(i.join(i.uniq(e),","),",");f=e,r.setItem(p,o)},w.prototype.clearItemsHistory=function(){f=null,r.removeItem(p)},w.prototype.getUserId=function(){return b},w.prototype.isEUUserAsync=function(){var e=this;return u?Promise.resolve(this.isEUUser()):(v||(v=new Promise(function(t){o.addEventListener(s.USER_ID_SET,function(){t(e.isEUUser())})})),v)},w.prototype.setUserId=function(e){b=e,u=!0,c(!this.isEUUser()),r.setItem(m,e),o.fire(s.USER_ID_SET)},w.prototype.isEUUser=function(){return b===d||"0"===b},w.prototype.getLanguage=function(){return g},w.prototype.setLanguage=function(e){e!==g&&(y.hasOwnProperty(e)?(g=e,this._vocabulary=y[g]):l.warnM("UserService.setLanguage","UserService Failed to set language: "+e))},w.prototype.vocabulary=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];var n=i.length;return i.reduce(function(t,i,o){return""+t+e.getWard(i)+(o!==n-1?" ":"")},"")},w.prototype.getWard=function(e){return this._vocabulary[e]||y[h][e]||""},w.prototype.wasItemAlreadyViewed=function(e){if(e.IgnoreUserHistory)return!1;var t=e.ParentId?e.ParentId:e.Id;return this.getItemsHistory().indexOf(t.toString())>-1},w.prototype.dictionaryReport=function(){var e={},t=i.keys(y[h]);return i.forEach(y,function(o,n){n!==h&&(e[n]=i.difference(t,i.keys(o)))}),e},new w}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.RequestHandler=function(){var _Cbola=Cbola,_=_Cbola._,Config=_Cbola.Config,EventBus=_Cbola.EventBus,Utils=_Cbola.Utils,_Cbola$Common=_Cbola.Common,CDN=_Cbola$Common.CDN,TimeLine=_Cbola$Common.TimelineService,UserService=_Cbola$Common.UserService,_Cbola$Enums=_Cbola.Enums,isServerCallTypes=_Cbola$Enums.isServerCallTypes,LoadStatusTypes=_Cbola$Enums.LoadStatusTypes,PageRequestTypes=_Cbola$Enums.PageRequestTypes,ProductTypes=_Cbola$Enums.ProductTypes,LoggerColors=_Cbola.Logger.Colors,Logger=Cbola.Logger.getInstance(),MAX_RETRIES=10,CLASS_NAME="RequestHandler",parseJSON=function(e){return e.json()},checkStatus=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},RequestHandler=function(){};return RequestHandler.prototype.dispatch=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];return this.dispatchCDN.apply(this,i).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;return t?Promise.reject():e.dispatchServer.apply(e,i)})},RequestHandler.prototype.dispatchCDN=function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var o=t.shift();return _.isFunction(CDN[o])?(TimeLine.markStart("CDN."+o),CDN[o].apply(CDN,t)):Promise.reject()},RequestHandler.prototype.dispatchServer=function(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var o=t[0];return TimeLine.markStart(CLASS_NAME+"."+o),this.promiseWithRetry.apply(this,t.concat([0]))},RequestHandler.prototype.promiseWithRetry=function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];var n="promiseWithRetry",r=_.first(i),a=_.last(i);return this[r].apply(this,i.slice(1)).catch(function(e){return new Promise(function(t,i){if(a>=MAX_RETRIES||_.isError(e))i(e);else{var o=Math.min(Math.pow(2,a),16);o=1===o?250:1e3*o,Logger.warnM(CLASS_NAME+"."+n+r,r+"() failed, retrying in "+o/1e3+" seconds... ("+a+"/"+MAX_RETRIES+")"),setTimeout(function(){return i(e)},o)}})}).catch(function(t){return _.isError(t)?(Logger.errorM(CLASS_NAME+"."+n+r,CLASS_NAME+"."+n+" failed firing "+r+"(). due to error: ",t),Promise.reject(t)):a>=MAX_RETRIES?(Logger.errorM(CLASS_NAME+"."+n+r,CLASS_NAME+"."+n+" failed firing "+r+"() after "+MAX_RETRIES+" errors."),_.isFunction(t)&&t(),Promise.reject()):(i.splice(-1,1,a+1),e.promiseWithRetry.apply(e,i))})},RequestHandler.prototype.getPageElements=function(e,t){return this.dispatch("_getPageElements",e,t)},RequestHandler.prototype.getMoreContent=function(e){return this.dispatch("_getMoreContent",e)},RequestHandler.prototype.getAds=function(e,t,i){return this.dispatch("_getAds",e,t,i)},RequestHandler.prototype.getLayerScript=function(e){return this.dispatch("_getLayerScript",e)},RequestHandler.prototype.getJsBundle=function(e){return this.dispatch("_getJsBundle",e)},RequestHandler.prototype.getIndices=function(e,t,i,o,n){return this.dispatch("_getIndices",e,t,i,o,n)},RequestHandler.prototype._getPageElements=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o="_getPageElements",n=Cbola,r=n.Env,a=r.PageProperties,s=r.categoryId,l=r.tags,d=r.title,c=r.body,h=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageRequest(e,isServerCallTypes.FROM_SERVER)},m=Utils.initPayload();return m=_.extend(m,{WidgetId:parseInt(e),CategoryId:s,FallbackMinimalWidth:t||0,Tags:l,Title:d,Body:c}),_.isEmpty(a.SrcUrl)||(m.SrcUrl=a.SrcUrl),Logger.info("getPageElements start. json: ",m),new Promise(function(t,n){fetch(Config.Defaults.queryServer+"GetInContentInfo",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(m)}).then(checkStatus).then(parseJSON).then(function(r){r.widgetId=e,Utils.updateEnv(r),a.IsServerCall=isServerCallTypes.FROM_SERVER,1===r.Status?("undefined"!=typeof r.PageId&&Logger.info(LoggerColors.PALE_YELLOW,"Page Id: "+r.PageId),i>0&&Logger.alwaysSendM(CLASS_NAME+"."+o,CLASS_NAME+"."+o+" succeeded on "+i+" attempts. url: "+a.originalPathNameHost+", pageviewid: "+a.cbola_pageViewId),r.IsServerCall=a.IsServerCall,TimeLine.markEnd(CLASS_NAME+"."+o),t(r)):2===r.Status||3===r.Status?(Config.errorMessage="In automation",n(function(){h(r.status)})):(h(r.Status),n(new Error("Content server bad status: "+r.Status+". URL: "+a.originalPathNameHost)))}).catch(function(){n(function(){h(PageRequestTypes.INITIALIZE_FAILED)})})})},RequestHandler.prototype._getMoreContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Logger.info(LoggerColors.PALE_GREEN,"Start to GetMoreContent for elementId"+e.ElementId+": "+Utils.getRunTimeInMilis());var i={UserId:UserService.getUserId(),UserHistory:UserService.getItemsHistory()};_.extend(e,i);var o=_.isEmpty(e.CurrentSession);o&&(e.CurrentSession=[0]);var n=_.extend(Utils.initPayload(),e);return new Promise(function(i,r){fetch(Config.Defaults.queryServer+"GetMoreContent",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(n)}).then(checkStatus).then(parseJSON).then(function(o){_.isEmpty(o)?0===t?(UserService.clearItemsHistory(),r()):r(new Error("Failed to get more content after history cleaning")):(Logger.info(LoggerColors.PALE_GREEN,"End of GetMoreContent for elementId"+e.ElementId+": "+Utils.getRunTimeInMilis()),TimeLine.markEnd(CLASS_NAME+"._getMoreContent"),i(o))}).catch(function(e){return r(3===t&&o||e)})})},RequestHandler.prototype._getAds=function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n="_getAds",r=Cbola,a=r.Env,s=a.PageProperties,l=a.PageId,d=a.activePid,c=a.Domain,h=a.Category,m={PageId:l,PublisherPublicKey:d,UrlData_Url:s.hostname,UrlData_Hash_128_Bit:s.urlHashMD5,UrlData_Hash_160_Bit:s.urlHashSHA1,AbTestId:Config.abTestId,ProductType:ProductTypes.IN_CONTENT,WidgetId:e,LayoutTypes:[i],IsMobile:s.isMobile,IsTablet:s.isTablet,DomainId:c,CategoryId:h,IsSsl:/https:/gi.test(document.location.protocol)},p=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageElementRequest({elementId:t,loadStatus:e})};return new Promise(function(e,i){var r=new Promise(function(e,t){setTimeout(function(){var e=new Error("request timeout");e.isTimeout=!0,t(e)},1e3*Config.getAdsCheckElementRetries)}),a=fetch(""+Config.Defaults.adServer+Config.Defaults.adServer_method,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:Utils.encodePayload(m)});Promise.race([r,a]).then(checkStatus).then(parseJSON).then(function(r){1===r.Status?(o>0&&Logger.alwaysSendM(CLASS_NAME+"."+n,CLASS_NAME+"."+n+" succeeded on "+o+" attempts. url: "+s.originalPathNameHost+", pageviewid: "+s.cbola_pageViewId),TimeLine.markEnd(CLASS_NAME+"."+n),EventBus.fire(EventBus.Events.GET_ADS_READY,{elementId:t,data:r}),e(r)):i(new Error("Ad server bad status: "+r.Status+". url: "+s.originalPathNameHost+", pageviewid: "+s.cbola_pageViewId))}).catch(function(e){var t=null;500===_.get(e,"request.status")?t=LoadStatusTypes.AD_SERVER_DOWN:e.isTimeout?t=LoadStatusTypes.GET_ADS_MAX_RETRY:_.isNil(e.request)&&(t=LoadStatusTypes.GET_ADS_FAILED),2===o&&p(t),i(function(){return p(t)})})})},RequestHandler.prototype._getLayerScript=function(layerType){var _retryAttempt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(resolve,reject){var METHOD="_getLayerScript",url=Cbola.Env.clientPath+"container/layer_"+layerType+"/cbola_layer_"+layerType+Cbola.Env.clientPathType+".js",xhttp=new XMLHttpRequest,onFailure=function(e){(0===_retryAttempt||2===_retryAttempt)&&Logger.alwaysSendM(CLASS_NAME+"."+METHOD,"Failed getting script for layer "+layerType+" on attempt: "+(_retryAttempt+1)+" due to: "+_.get(e,"message","")+". URL: "+Cbola.Env.PageProperties.originalPathNameHost),reject()};xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()):onFailure(new Error("response status "+xhttp.status))},xhttp.open("GET",url,!0),xhttp.onerror=onFailure,xhttp.send()})},RequestHandler.prototype._getJsBundle=function(filename){return new Promise(function(resolve,reject){var METHOD="_getJsBundle",url=""+Cbola.Env.clientPath+filename;if(Cbola.Env.DEBUG){var script=document.createElement("script");script.onload=function(){TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()},script.onerror=function(){reject(new Error("Failed loading path: "+filename+" by script tag attachment"))};var node=document.querySelector("script");node.parentNode.insertBefore(script,node),script.src=url}else{var logJSBundleLoadFailure=function(){Logger.errorM(CLASS_NAME+"."+METHOD,CLASS_NAME+"."+METHOD+" failed loading file from path "+filename)},xhttp=new XMLHttpRequest;xhttp.onload=function(){200===xhttp.status&&xhttp.response?(eval(xhttp.response),TimeLine.markEnd(CLASS_NAME+"."+METHOD),resolve()):reject(logJSBundleLoadFailure)},xhttp.open("GET",url,!0),xhttp.onerror=function(){reject(logJSBundleLoadFailure)},xhttp.send()}})},RequestHandler.prototype._getIndices=function(e,t,i,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a="_getIndices",s=Cbola,l=s.Env,d=l.activePid,c=l.DEBUG,h=l.domainId,m=l.PageProperties,p=function(e){_.isNil(e)||Cbola.Common.AnalyticsService.setPageElementRequest({elementId:i,loadStatus:e})},u={AbTestId:Utils.getCurrentAbTestId(),Did:h,IndicesPerPage:n,LocationID:e,Language:t,Pid:d,Wid:parseInt(o)};return c&&(u.Debug=!0),Logger.info("getIndices start. payload: ",u),new Promise(function(e,t){fetch(Config.Defaults.extraContent+"GetIndices",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then(checkStatus).then(parseJSON).then(function(i){m.IsServerCall=i.IsServerCall=isServerCallTypes.FROM_SERVER,1===i.Status?(r>0&&Logger.alwaysSendM(CLASS_NAME+"."+a,CLASS_NAME+"."+a+" succeeded on "+r+" attempts. url: "+m.originalPathNameHost+", pageviewid: "+m.cbola_pageViewId),TimeLine.markEnd(CLASS_NAME+"."+a),e(i)):(p(i.Status),t(new Error("External content server bad status: "+i.Status+". URL: "+m.originalPathNameHost)))}).catch(function(){p(LoadStatusTypes.EXTERNAL_CONTENT_FAILED),t(new Error("External content server failed. URL: "+m.originalPathNameHost))})})},new RequestHandler}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AnalyticsService=function(){function e(e){return e.json()}function t(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function i(e){var t={ClientVersion:h.clientVersion,PageViewId:h.PageProperties.cbola_pageViewId,PageId:h.PageId,UserId:s.getUserId(),PublisherId:h.activePid,Second:c.getRunTimeInSecs(),categoryId:h.Category,domainId:h.Domain,IsMobile:h.PageProperties.isMobile,IsTablet:h.PageProperties.isTablet,isPortrait:h.PageProperties.isPortrait,AbTestId:p.abTestId};return e&&m.extend(t,e),m.defaults(t,b),t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.analyticsName,r=e.additionalParams,a=e.onError,s=void 0===a?!1:a,m=e.onSuccess,u=void 0===m?!1:m,b=e.includeCredentials,f=void 0===b?!1:b;l.info(d.PALE_PURPLE,n+"::"+o);var g=i(r),y={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.encodePayload(g)};f&&(y.credentials="include"),fetch(""+p.Defaults.analyticsServer+o,y).then(t).then(function(e){l.info(d.PALE_PURPLE,"fired "+o+" analytics to server.",g),h.DEBUG&&console.table&&g.Items&&console.table(g.Items),u&&u(e)}).catch(function(e){s?s(e.response):l.trace(d.PALE_RED,o+" failed.")})}var n="AnalyticsService",r=Cbola.Enums,a=r.SetClickTypes,s=Cbola.Common.UserService,l=Cbola.Logger.getInstance(),d=Cbola.Logger.Colors,c=Cbola.Utils,h=Cbola.Env,m=Cbola._,p=Cbola.Config,u=Cbola.Common.RequestHandler,b={WidgetId:0,PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},f=function(){};f.prototype.setPageRequest=function(t,i,n){var a="SetPageRequestGeo";h.PageStatus=t;var u=0;try{u=Math.floor(100*Math.abs(h.PageProperties.secondGlobal/1e3))/100}catch(b){}var f=0;try{0!==h.PageProperties.publisherScriptExecutionTime&&null!==h.PageProperties.publisherScriptExecutionTime&&(f=Math.floor(100*Math.abs((h.PageProperties.publisherScriptExecutionTime-window.performance.timing.connectStart)/1e3))/100)}catch(b){}var g={PageStatus:t,IsServerCall:i,SecondFromPageLoad:f,SecondGlobal:u,WidgetId:h.widgetId,ScriptDomainId:h.domainId,IntegrationType:h.IntegrationType||0,ProductType:r.ProductTypes.IN_CONTENT};t!==r.PageRequestTypes.DIV_TOO_SMALL&&t!==r.PageRequestTypes.HIDDEN_IFRAME||!n?(g.ScreenWidth=h.topWindow.innerWidth,g.ScreenHeight=h.topWindow.innerHeight):(g.ScreenHeight=n.height,g.ScreenWidth=n.width),c.isInIframe()&&!c.isWindowTopSupported()||m.isEmpty(window.top.document.referrer)||(g.ReferrerURL=window.top.document.referrer),p.ignoreQueryString&&(g.QueryString=encodeURIComponent(p.queryString));var y=function(t){e(t).then(function(e){var t=m.get(e,"UserId","0");h.userId=t,s.setUserId(t),l.info(d.PALE_PURPLE,a+" -> UserId: "+h.userId)})},v=function(){s.setUserId("0"),l.trace(d.PALE_RED,a+" failed to set user Id")};o({analyticsName:a,additionalParams:g,onError:v,onSuccess:y,includeCredentials:!0})};var g=function(e,t,i){var o=Cbola.InContent.Manager.getLayerByElementId(e);return{ElementId:e,Ads:[{TagId:t,ProviderId:"",TriggerType:i}],WidgetId:o.widgetId,ProductType:r.ProductTypes.IN_CONTENT,LayoutType:o.type,ItemType:o.itemType,HbToken:o.hbToken}};f.prototype.setAdsRequest=function(e,t,i,n){var r=g(e,t,i);"undefined"!=typeof n&&(r.HbCpm=n),o({analyticsName:"SetAdsRequest",additionalParams:r})},f.prototype.setBlockedAdRequest=function(e,t,i){var n=g(e,t,i);o({analyticsName:"SetBlcAr",additionalParams:n})},f.prototype.setPageElementRequest=function(e){var o=e.elementId,a=e.layer,s=e.loadStatus,u=e.isServerCall,b="SetPageElementsRequestNew";if(l.info(d.PALE_PURPLE,n+"::"+b),a?o=a.elementId:o&&(a=Cbola.InContent.Manager.getLayerByElementId(o)),!m.isNil(a)&&s){var f=null;try{h.PageProperties.secondGlobal>0&&(f=c.getRunTimeInSecs()+Math.floor(100*Math.abs(h.PageProperties.secondGlobal/1e3))/100)}catch(g){}var y={ElementId:o,LoadStatus:s,PageStatus:h.PageProperties.PageStatus,IsServerCall:m.get(a,"data.IsServerCall",u),Width:a.container?a.container.offsetWidth:0,Height:a.container?a.container.offsetHeight:0,WidgetId:a.widgetId,ItemType:a.itemType||0,LayoutType:a.type||0,ProductType:r.ProductTypes.IN_CONTENT,HbToken:a.hbToken,SecondGlobal:f},v=c.getDocumentHeight();null!==v&&(y.PageHeight=v||0);var w=c.getElementPixelsFromTop(a.element);null!==w&&(y.PixelsFromTop=w||-1),y=i(y);var _={Elements:[y]};fetch(""+p.Defaults.analyticsServer+b,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.encodePayload(_)}).then(t).then(function(){l.info(d.PALE_PURPLE,n+"."+b+" success.")}).catch(function(){l.trace(d.PALE_RED,b+" failed.")})}},f.prototype.setPageElementView=function(e,t,i,n){var a=Cbola.InContent.Manager.getLayerByElementId(e);if(!m.isNil(a)){var s={ElementId:a.elementId,ElementViewId:m.isFunction(a.getViewId)?a.getViewId():0,TeaserType:0,OpenType:t,CloseType:i,WidgetId:a.widgetId,LayoutType:a.type,ProductType:r.ProductTypes.IN_CONTENT,Duration:m.isUndefined(n)?a.isViewable()?0:a.getViewDuration():n,HbToken:a.hbToken};o({analyticsName:"SetPageElementView",additionalParams:s})}},f.prototype.setClick=function(e,t,i){var n="SetClick";if(!c.isGoogleWebLightAgent()){var s=Cbola.InContent.Manager.getLayerByElementId(e),h=0;i&&(h=i.Id,s.isMobile()||t===a.SHARE_BEFORE_FACEBOOK||t===a.SHARE_BEFORE_TWITTER?h=i.Id:(t===a.SHARE_AFTER_TWITTER||t===a.SHARE_AFTER_FACEBOOK)&&(h=i.ParentId));var p={ElementId:e,ElementViewId:m.result(s,"getViewId",0),ClickType:t,ItemId:h,WidgetId:s.widgetId,LayoutType:s.type,ProductType:r.ProductTypes.IN_CONTENT,HbToken:s.hbToken};o({analyticsName:n,additionalParams:p,onError:function(){l.traceOnce(d.PALE_RED,n+" failed.")}})}},f.prototype.setClientError=function(e){var t={PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},i={Url:window.location.href.toLowerCase(),FileName:e.filename,Line:e.lineno,Col:e.colno,ErrorMessage:e.message,Type:e.type};m.defaults(i,t),o({analyticsName:"SetClientError",additionalParams:i})},f.prototype.setPageClose=function(){var e="SetPageClose";l.info(d.PALE_PURPLE,n+"::"+e);var t=i(),o=new XMLHttpRequest,r=""+p.Defaults.analyticsServer+e,a=function(){return l.trace(d.PALE_RED,e+" failed.")};o.open("POST",r,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status||204===o.status?(l.info(d.PALE_PURPLE,"fired "+e+" analytics to server.",t),h.DEBUG&&console.table&&t&&console.table(t)):a())},o.onerror=a,o.send(c.encodePayload(t))},f.prototype.setItemsView=function(e,t){var i=Cbola.InContent.Manager.getLayerByElementId(e);if(!m.isNil(i)){var n={ElementId:e,ElementViewId:m.result(i,"getViewId",0),Items:m.map(t,function(e){return{Id:e.Id||0,OpenType:e.openType,CloseType:e.closeType,DisplayOrder:e.displayOrder,ViewOrder:e.viewOrder,Duration:e.isViewable?0:e.getViewableDuration(),AnswerId:e.userAnswerId}}),WidgetId:i.widgetId,LayoutType:i.type,HbToken:i.hbToken};o({analyticsName:"SetItemsView",additionalParams:n})}},f.prototype.setConsentStatus=function(e){o({analyticsName:"SetConsentStatus",additionalParams:{ConsentStatus:e}})},f.prototype.setClickTracker=function(e){var t="SetClickTracker";l.info(d.PALE_PURPLE,n+"::"+t),e?fetch(e).then(function(){l.info(d.PALE_PURPLE,n+"."+t+" succeeded for url: "+e)}):l.trace(n+".setClickTracker",n+".setClickTracker failed to set URL for click tracker")};var y=!1,v=[],w=null,_=null,C={nested:{SetHbBidRequestParams:{fields:{base:{type:"Base",id:1},BidRequests:{rule:"repeated",type:"HbBidRequest",id:2}},nested:{Base:{fields:{ClientVersion:{type:"string",id:1},PageViewId:{type:"string",id:2},PageId:{type:"int64",id:3},DomainId:{type:"int32",id:4},CategoryId:{type:"int32",id:5},PublisherId:{type:"string",id:6},AbTestId:{type:"int32",id:7},UserId:{type:"string",id:8},Second:{type:"float",id:9},ProductType:{type:"ProductTypeEnum",id:10},IsMobile:{type:"bool",id:11},IsTablet:{type:"bool",id:12},isPortrait:{type:"bool",id:13},WidgetId:{type:"int32",id:14},HbToken:{type:"string",id:15},SecondGlobal:{type:"float",id:16}},nested:{ProductTypeEnum:{values:{Unknown:0,InImage:1,InContent:2,AnayticsScript:3}}}},HbBidRequest:{fields:{TagId:{type:"int32",id:1},Cpm:{type:"float",id:2},Duration:{type:"float",id:3},Status:{type:"int32",id:4},TimeInPocket:{type:"float",id:5},AuctionCpm:{type:"float",id:6},PocketCpm:{type:"float",id:7},TimeToRespond:{type:"float",id:8},PocketUsageType:{type:"PocketUsageTypeEnum",id:9},PocketSizeHT:{type:"int32",id:10},PocketSizeLT:{type:"int32",id:11}},nested:{PocketUsageTypeEnum:{values:{Unknown:0,FromAuction:1,FromHighTierPocket:2,FromLowTierPocket:3}}}}}}}};f.prototype.setHbBidRequestProto=function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];window.Cbola.protobuf?I(e):(y||(y=!0,u.getJsBundle("external/protobuf.min.js").then(function(){for(;v.length>0;)I(v.shift())}).catch(c.noOp)),v.push(e))};var I=function(e){var o="SetHbBidRequestProto";m.isNil(w)&&(w=new Cbola.protobuf.Root,Cbola.protobuf.Root.fromJSON(C,w),_=w.lookupType("SetHbBidRequestParams"));var a=i();m.extend(a,{DomainId:a.domainId,CategoryId:a.categoryId,ProductType:r.ProductTypes.IN_CONTENT,PageId:Cbola.protobuf.util.LongBits.fromNumber(a.PageId).toLong()}),delete a.domainId,delete a.categoryId;var s={base:a,BidRequests:e},c=_.verify(s);if(c)return void l.errorM(n+"."+o,o+" failed on message verification, error: "+c);var h=_.create(s),u=_.encode(h).finish(),b={method:"POST",headers:{"Content-Type":"text/plain;charset=UTF-8"},body:u};fetch(""+p.Defaults.analyticsServer+o,b).then(t).then(function(){return l.info(d.PALE_PURPLE,"fire "+o+" analytics to server. payload: ",s)}).catch(function(){return l.trace(o+" failed.")})};return f.prototype.setLastMile=function(e){var i="SetLastMile";l.info(d.PALE_PURPLE,n+"::"+i);var o={public_key:h.activePid,domain_id:h.Domain,product_type:r.ProductTypes.IN_CONTENT,is_mobile:h.PageProperties.isMobile?1:0};m.extend(o,e),fetch(""+p.Defaults.analyticsServer+i+"?"+m.reduce(o,function(e,t,i){return""+e+(e?"&":"")+i+"="+t},""),{method:"GET"}).then(t).then(function(){return l.info(d.PALE_PURPLE,"fired "+i+" analytics to server.",o)}).catch(function(){return l.trace(d.PALE_RED,i+" failed.")})},new f}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders._Base=Cbola.Common.ConsentProviders._Base=function(){var e=Cbola,t=e._,i=Cbola.Logger.getInstance(),o=.5,n=32,r=function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;t()?i():setTimeout(function(){return e(t,i,Math.min(2*r,n))},1e3*r)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ConsentProviderBase";this.initialized=!1,this.name=e};return a.prototype={_waitForProvider:function(e){var o=this,n=void 0;return this.initialized?t.isFunction(e)||(n="Tester is not a function"):n="Not initialized",n?(i.errorM(this.name+"._waitForProvider",this.name+"._waitForProvider:: "+n),Promise.reject(new Error(n))):new Promise(function(t){r(e,function(){t(o)})})},init:function(){this.initialized=!0},getProviderPromise:function(){return Promise.reject("getProviderAsync not implemented")},hasConsentPromise:function(){return Promise.reject("testConsentAsync not implemented")}},a}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.GoogleFC=Cbola.Common.ConsentProviders.GoogleFC||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common,n=o.AnalyticsService,r=o.ConsentProviders._Base,a=e.Enums.ConsentStatusTypes,s=null,l=null,d=null,c=null,h=function(){var e=i.isInIframe();return e&&i.isWindowTopSupported()?s=window.top:e||(s=window),!!s},m=function(){return!l&&s&&s.googlefc&&(l=s.googlefc,n.setConsentStatus(a.GOOGLE_FUNDING_CHOICES_FOUND)),!!l},p=function(e){var i=t.get(l,"ConsentStatusEnum",{}),o=e!==i.CONTRIBUTOR&&e!==i.NO_CONSENT;return n.setConsentStatus(e),o},u=function(){r.call(this,"GoogleFC")};return u.prototype=Object.create(r.prototype),u.constructor=u,u.prototype.init=function(){this.initialized=h()},u.prototype.getProviderPromise=function(){return d||(d=this._waitForProvider(m)),d},u.prototype.hasConsentPromise=function(){if(!c){var e=t.result(l,"getConsentStatus",-1);c=-1!==e?p(e)?Promise.resolve():Promise.reject():new Promise(function(e,i){l.callbackQueue.push(function(){p(t.result(l,"getConsentStatus",-1))?e():i()})})}return c},new u}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.StandardCMP=Cbola.Common.ConsentProviders.StandardCMP||function(){var e=Cbola,t=e.Common,i=t.AnalyticsService,o=t.ConsentProviders._Base,n=e.Enums.ConsentStatusTypes,r=null,a=null,s=null,l=function e(){for(var t=window;!r&&!a;){try{r=t.__cmp,a=t.frames["__cmpLocator"]}catch(o){}if(t===window.top)break;t=t.parent}var e=!(!r&&!a);return e&&i.setConsentStatus(n.IAB_STANDARD_CMP_FOUND),e},d=function(){o.call(this,"StandardCMP")};return d.prototype=Object.create(o.prototype),d.constructor=d,d.prototype.getProviderPromise=function(){return s||(s=this._waitForProvider(l)),s},d.prototype.hasConsentPromise=function(){return Promise.resolve()},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.ConsentProviders=Cbola.Common.ConsentProviders||{},Cbola.Common.ConsentProviders.Manager=Cbola.Common.ConsentProviders.Manager||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common.ConsentProviders,n=o.GoogleFC,r=o.StandardCMP,a={gfc:n,cmp:r},s=void 0,l=void 0,d=function(){this.activeProviders={}};return d.prototype={init:function(e){var i=this;t.extend(e,{cmp:!0}),t.forEach(e,function(e,t){e&&a[t]&&(i.activeProviders[t]=a[t],i.activeProviders[t].init())})},consentProviderFound:function(){if(!s){var e=t.map(this.activeProviders,function(e){return e.getProviderPromise()});s=Promise.race(e)}return s},hasConsent:function(){return l||(l=this.consentProviderFound().then(function(e){return e.hasConsentPromise()},i.noOp)),l}},new d}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.AdsService=function(){var e=Cbola.Logger.getInstance(),t=window;try{window.top.document&&(t=window.top)}catch(i){}var o={},n={},r={},a=!1,s=function(){};s.prototype={registerLayerManager:function(t,i,o){if(n.hasOwnProperty(o)&&n[o])return void e.errorM("AdsService.registerLayerManager","Cbola.Globals.AdsService failed, trying to assign ad triggers manager to the same element ID.");if(n[o]=t,r[o]=i,this.onlyOneRegistration)for(var a in n)n.hasOwnProperty(a)&&a!==o.toString()&&this.unRegisterLayerManager(a)},unRegisterLayerManager:function(e){n.hasOwnProperty(e)&&n[e]&&(n[e].endAdsProcess(),delete n[e],delete r[e])},getTriggersManagerByElementId:function(e){return n[e]},getAllTriggersManagers:function(){return n},getAdsStoreByElementId:function(e){return r[e]},freezeAds:function(){for(var e in n)this.freezeAdsByElementId(e)},freezeAdsByElementId:function(e){n.hasOwnProperty(e)&&n[e]&&n[e].freezeAdsState()},addSovrnBeacon:function(i){try{if(!a&&i&&i.SovrnBeaconSrc&&i.SovrnBeaconId){a=!0;var o=t.document.createElement("script");o.id=i.SovrnBeaconId;var n=t.document.getElementsByTagName("head")[0];n&&(n.appendChild(o),o.src=i.SovrnBeaconSrc)}}catch(r){e.alwaysSendM("AdsService.addSovrnBeacon","Sovrn beacon injection failed.")}}};try{t!==window?(t.Cbola=t.Cbola||{},t.Cbola.Globals=t.Cbola.Globals||{},t.Cbola.Globals.AdsService=t.Cbola.Globals.AdsService||new s,o=t.Cbola.Globals.AdsService):o=new s}catch(l){o=new s,e.errorM("AdService","Failed to add AdService initialization process")}return o}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.TemplatesManagerBase=function(){var e=Cbola.Logger.getInstance(),t=Cbola,i=t._,o=t.Logger.Colors;return function(){function t(){_classCallCheck(this,t),this.Compiled={}}return _createClass(t,[{key:"getCompiledTemplate",value:function(t){return this.Compiled&&i.isFunction(this.Compiled[t])?this.Compiled[t]:i.isString(this[t])?(e.alwaysSend(o.PALE_RED,"Templates.getCompiledTemplate, failed to find compiled template for "+t+"."),this.Compiled[t]=i.template(this[t],{variable:"data"}),this.Compiled[t]):null}}]),t}()}(),Cbola.Styles=function(){var e=Cbola,t=(e._,e.TemplatesManagerBase),i=e.Utils,o=Cbola.Logger.getInstance(),n="Styles",r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"injectMainStyle",value:function(e,t){var i=Math.min(Math.floor(window.devicePixelRatio||1),3),o={clientPath:Cbola.Env.clientPath,retina:i>1?"@"+i+"x":""};return this.injectThemeStyle(e,t,o)}},{key:"injectThemeStyle",value:function(e,t,r){var a="injectMainStyle",s=this.getCompiledTemplate(t),l="";try{l=s(r)}catch(d){return o.errorM(n+","+a,""+n+a+" failed generating style for: "+t+", url: "+Cbola.Env.PageProperties.hostname),null}return i.injectStyle(e,l)}}]),t}(t);return new r}(),Cbola.Templates=function(){var e=Cbola,t=e._,i=e.TemplatesManagerBase,o=Cbola.Logger.getInstance(),n="Templates",r=function(e){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return _inherits(i,e),_createClass(i,[{key:"createElement",value:function(e){if(this[e]){var t=document.createElement("div");return t.innerHTML=this[e],t=t.children[0]}return null}},{key:"createWrappedDOMFromTemplate",value:function(e,t){var i="createWrappedDOMFromTemplate",r=this.getCompiledTemplate(e);if(r){var a="";try{a=r(t)}catch(s){return o.errorM(""+n+i,""+n+i+" failed generating template for: "+e+", url: "+Cbola.Env.PageProperties.hostname),null}var l=document.createElement("div");return l.innerHTML=a,l}return null}},{key:"createElementFromTemplate",value:function(e,i){var o=this.createWrappedDOMFromTemplate(e,i);return t.get(o,"children[0]",null)}},{key:"createFragmentFromTemplate",value:function(e,t){var i=this.createWrappedDOMFromTemplate(e,t);if(i){for(var o=document.createDocumentFragment();i.childNodes.length;)o.appendChild(i.childNodes[0]);return o}return null}}]),i}(i);return new r}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["a9_dfp_banner.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n  <meta charset="UTF-8">\r\n  <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>\r\n  <script>\r\n	  var Cbola_pbjs = Cbola_pbjs || {};\r\n	  Cbola_pbjs.que = Cbola_pbjs.que || [];\r\n  </script>\r\n  <script type="text/javascript" src="'+(null==(t=e.clientPath)?"":t)+'external/prebid.min.js" async></script>\r\n  <script>\r\n	  !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");\r\n\r\n	  var googletag = googletag || {};\r\n	  googletag.cmd = googletag.cmd || [];\r\n\r\n\r\n	  googletag.cmd.push(function() {\r\n		  googletag.defineSlot(\''+(null==(t=e.slotName)?"":t)+"', [["+(null==(t=e.width)?"":t)+", "+(null==(t=e.height)?"":t)+"]], '"+(null==(t=e.slotID)?"":t)+"').addService(googletag.pubads());\r\n		  googletag.pubads().disableInitialLoad();\r\n		  googletag.pubads().enableSingleRequest();\r\n		  googletag.enableServices();\r\n	  });\r\n\r\n	  apstag.init({\r\n		  pubID:  '0b2db9a2-c936-4557-a140-fbff93318c8c',\r\n		  adServer: 'googletag'\r\n	  });\r\n  </script>\r\n</head>\r\n<body>\r\n  <div id=\""+(null==(t=e.slotID)?"":t)+"\">\r\n    <script>\r\n		  googletag.cmd.push(function(){googletag.display('"+(null==(t=e.slotID)?"":t)+"');});\r\n    </script>\r\n  </div>\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["advertisement_title.html"]="<div style=\"font-family:'Open Sans',sans-serif; font-size: 14px; font-weight:normal;color: rgb(200, 200, 200);text-align: center;height: 20px;margin:0;padding:0;\">- Advertisement -</div>",Cbola.Templates["ad_banner_sponsored_loading.html"]='<div class="cbola-banner-preload">\n  <div class="cbola-banner-preload__spinner">\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n    <div class="cbola-banner-preload-spinner__path"></div>\n  </div>\n  <div class="cbola-banner-preload__sponsored-text">\n    sponsored\n  </div>\n</div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["ad_banner_structure.html"]=function(e){var t,i="";Array.prototype.join;return i+='<div  id="cbola-banner-structure'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'" class="cbola-banner-structure cbola-banner-structure'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+' unselectDrag">\r\n  <div class="cbola-banner-preload">\r\n    <div class="cbola-banner-preload__spinner">\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n    </div>\r\n    <div class="cbola-banner-preload__sponsored-text">\r\n      sponsored\r\n    </div>\r\n  </div>\r\n  <div class="cbola-banner-structure__advertisement-title ',e.showAdvertisementTitle||(i+="cbola-fade-out"),i+='">'+(null==(t=e.advertisement)?"":t)+'</div>\r\n  <div class="hide-ad-button cbola-fade-out"></div>\r\n  <div id="cbola-banner'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'" class="cbola-banner cbola-banner'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.apperance)?"":t)+'"></div>\r\n</div>\r\n'}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["ad_lightning_iframe.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n  <meta charset="UTF-8">\r\n  <script src="https://tagan.adlightning.com/carambola/blacklist_script.js" type="text/javascript"></script>\r\n  <script src="https://tagan.adlightning.com/carambola/blocking_script.js" type="text/javascript"></script>\r\n  <script type="text/javascript">\r\n		function createTagDetails() {\r\n			var tagDetails = {};\r\n			tagDetails.w = '+(null==(t=e.width)?"":t)+";\r\n			tagDetails.h = "+(null==(t=e.height)?"":t)+";\r\n			tagDetails.dfpDetails = {advertiserId: '"+(null==(t=e.adId)?"":t)+"', creativeId: '"+(null==(t=e.adId)?"":t)+"'};\r\n			tagDetails.au = '"+(null==(t=e.adId)?"":t)+"';\r\n			tagDetails.markupInDom = true;\r\n            tagDetails.refreshMessage = '"+(null==(t=e.message)?"":t)+'\';\r\n\r\n			var random = Math.round(Math.random() * 1e8);\r\n			tagDetails.currentTagId = "adltag_" + (((new Date()) * 1)) + "_" + random;\r\n			return tagDetails;\r\n		}\r\n		var random = "" + Math.round(Math.random() * 1e8);\r\n		var site_id = random + "_" + "carambola";\r\n		window[site_id]={};\r\n		window[site_id].tagDetails=createTagDetails();\r\n		blocker(site_id, "<!--ADL_WRAPPED-->", false, window);\r\n  </script>\r\n  <title>ad lighting</title>\r\n</head>\r\n<body>\r\n  '+(null==(t=e.tag)?"":t)+"\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["desktop_trivia_container.html"]='<div class="cbola-layer cbola-in-content-trivia-container">\n  <div class="cbola-in-content-trivia-container__inner layer-container">\n\n  </div>\n</div>\n',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["devcon_iframe.html"]=function(e){var t,i="";return i+='<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\r\n    <title>devcon</title>\r\n    <script id="ns_script_dc" data-key="29c43597-b2f7-401d-9548-b20ba4a8504e" data-e="5"\r\n            data-h="'+(null==(t=e.height)?"":t)+'" data-w="'+(null==(t=e.width)?"":t)+'" data-cr="'+(null==(t=e.tagType)?"":t)+'" data-a="'+(null==(t=e.providerId)?"":t)+'" data-unit="'+(null==(t=e.adId)?"":t)+'"\r\n            src="//d25dfknw9ghxs6.cloudfront.net/cb/cbpw.js" type="text/javascript" async></script>\r\n</head>\r\n<body>\r\n     '+(null==(t=e.tag)?"":t)+"\r\n</body>\r\n</html>\r\n"}}(),Cbola.Templates["framed_in_content_container.html"]='<div class="cbola-layer cbola-in-content-container cbola-in-content-container--framed">\n  <div class="cbola-in-content-container__frame">\n    <div class="cbola-in-content-container__frame-inner layer-container">\n\n    </div>\n  </div>\n</div>\n',Cbola.Templates["in_content_container.html"]='<div class="cbola-layer cbola-in-content-container">\n  <div class="cbola-in-content-container__inner layer-container">\n\n  </div>\n</div>\n',Cbola.Templates["mobile_container.html"]='<div class="cbola-mobile-container">\n	<div class="cbola-mobile-container__inner layer-container">\n	</div>\n</div>\n',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["mobile_in_item_banner_structure.html"]=function(e){var t,i="";Array.prototype.join;return i+='<div id="cbola-box-item-ad_'+(null==(t=e.elemId)?"":t)+"_"+(null==(t=e.adId)?"":t)+'" data-ad-id="'+(null==(t=e.adId)?"":t)+'" class="cbola-box-item-ad">\r\n  <div class="cbola-banner-preload">\r\n    <div class="cbola-banner-preload__spinner">\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n      <div class="cbola-banner-preload-spinner__path"></div>\r\n    </div>\r\n    <div class="cbola-banner-preload__sponsored-text">\r\n      sponsored\r\n    </div>\r\n  </div>\r\n  <div class="cbola-banner-structure__advertisement-title ',e.showAdvertisementTitle||(i+="cbola-fade-out"),i+='">'+(null==(t=e.advertisement)?"":t)+'</div>\r\n  <div class="cbola-banner">\r\n\r\n  </div>\r\n</div>'}}(),Cbola.Templates["sidebar_container.html"]='<div class="cbola-layer cbola-sidebar-container">\n  <div class="cbola-sidebar-container__inner layer-container">\n\n  </div>\n</div>\n',Cbola.Templates["width_check.html"]='<div id="carambola_InContent_checkWidth" style="width:100%"></div>',function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbolaStyle.css"]=function(e){var t,i="";return i+=".cbola-icon,.hide-ad-button:before{text-rendering:auto;-moz-osx-font-smoothing:grayscale}.cbola-no-select,.cbola-no-select>*,.unselectDrag{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.cbola-disable-transition,.cbola-disable-transition *{transition:none!important}.cbola-clearfix{overflow:auto;zoom:1}.cbola-loader{position:absolute;top:50%;left:50%;margin-left:-19px!important;margin-top:-19px!important;height:38px;width:38px;border:4px solid rgba(100,100,100,.3);border-top:4px solid rgba(100,100,100,.9);border-radius:50%;animation:cbola-rotation 1.2s infinite linear;box-sizing:border-box}@keyframes cbola-rotation{from{transform:rotate(0)}to{transform:rotate(360deg)}}span.cbola-clamped-text{overflow:hidden;position:relative;line-height:1.4em;max-height:2.8em;text-align:justify;display:block;padding-right:1em;margin-left:1em}span.cbola-clamped-text:before{content:'...';position:absolute;right:0;bottom:0}span.cbola-clamped-text:after{content:'';position:absolute;right:0;width:1em;height:1em;margin-top:.2em;background:#fff}.cbola-fade-out{opacity:0!important;pointer-events:none}.cbola-fade-in{opacity:1!important;pointer-events:auto}.cbola-hidden{visibility:hidden!important;pointer-events:none}.cbola-hide{display:none!important}.cbola-hide-scrollbars::-webkit-scrollbar{display:none}.cbola-ghost-center-container:before,.cbola-ghost-center-inner{display:inline-block;vertical-align:middle}.cbola-ghost-center-container{position:relative;font-size:0}.cbola-ghost-center-container:before{content:' ';height:100%}.cbola-separated{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center!important;align-items:center!important;-ms-flex-pack:center!important;justify-content:center!important}.cbola-separated:after,.cbola-separated:before{content:' ';display:block;width:100%;height:20px;border-color:#b6b6b6;box-sizing:border-box}.cbola-separated:before{border-top-style:solid;border-top-width:1px}.cbola-separated:after{border-bottom-style:solid;border-bottom-width:1px}.cbola-in-content-container{position:relative;line-height:normal;width:100%;display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start}.cbola-in-content-container--framed{display:block;clear:both}.cbola-in-content-container__frame,.cbola-in-content-container__inner{max-width:700px;min-width:440px;position:relative}.cbola-in-content-container__inner{width:100%;transition:height .6s ease;opacity:0}.cbola-in-content-container__frame{border:2px solid #c3c3c3;border-radius:8px;padding:5px;box-shadow:3px 3px 3px 0 rgba(220,220,220,.8);margin:20px auto 0}.cbola-mobile-container__inner,.cbola-sidebar-container__inner{opacity:0;position:relative;padding-top:0;box-sizing:content-box}.cbola-in-content-container__frame-inner{margin:0 auto;position:relative;transition:height .6s ease;opacity:0}.cbola-in-content-trivia-container{position:relative;line-height:normal;clear:both}.cbola-in-content-trivia-container__inner{box-sizing:content-box;margin:0 auto;position:relative;opacity:0;padding:0;transition:height .6s ease}.cbola-sidebar-container{position:relative;line-height:normal;display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start}.cbola-mobile-container{line-height:normal;clear:both}.cbola-mobile-container__inner{float:none;width:100%;margin:0 auto}.cbola-banner-structure{position:absolute;font-size:10px;color:#999;text-align:center;opacity:1;font-family:'Open Sans';cursor:default;padding:0;z-index:3;line-height:normal!important;overflow:hidden}.hide-ad-button{position:absolute;cursor:pointer;top:1px;right:1px;margin-top:0;z-index:999999;width:18px;height:18px;background-color:#000;border-radius:50%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;overflow:hidden}.hide-ad-button:before{font:normal normal normal 12px/1 cbolaIcons;font-family:cbolaIcons!important;speak:none;content:\"\\f00d\";text-transform:none;-webkit-font-smoothing:antialiased;color:#FFF}.cbola-banner-structure__advertisement-title{z-index:999999;position:absolute;left:0;top:0;background-color:rgba(0,0,0,.4);color:#fff;padding:1px 4px 2px 3px!important;font-size:8px!important;font-weight:600;text-transform:capitalize;font-family:\"Open Sans\",Arial,sans-serif!important;border-bottom-right-radius:8px;letter-spacing:.1em;pointer-events:none;line-height:normal}.cbola-banner{position:relative;z-index:5;opacity:1;height:100%;overflow:visible;text-align:center;transform-origin:50% 0 0;margin-right:auto!important;margin-left:auto!important}.cbola-banner iframe{max-width:none;border:0}.cbola-banner__tag{position:absolute;top:0;left:50%;transform:translateX(-50%)}.cbola-banner__tag--front{z-index:10}.cbola-banner__tag--back{z-index:5}.cbola-banner-preload--active{height:90%;width:90%;top:5%;left:5%;background-color:#c3d9ff}.cbola-banner-preload{width:100%;height:100%;position:absolute;top:0;left:0;z-index:0;background-color:#f6f6f6;overflow:hidden;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.cbola-banner-preload__spinner{height:25px;width:25px;position:relative}.cbola-banner-preload-spinner__path{height:11px;width:4px;position:absolute;top:0;left:calc(50% - 3px);transform-origin:center bottom}.cbola-banner-preload-spinner__path:before{content:' ';display:block;height:8px;width:100%;border-radius:30%;background-color:#c5c5c5;opacity:.5;position:absolute;top:-2px;animation:bgColorChange 1.2s linear infinite;will-change:opacity}.cbola-banner-preload-spinner__path:nth-child(1){transform:rotate(45deg)}.cbola-banner-preload-spinner__path:nth-child(2):before{animation-delay:.15s}.cbola-banner-preload-spinner__path:nth-child(2){transform:rotate(90deg)}.cbola-banner-preload-spinner__path:nth-child(3):before{animation-delay:.3s}.cbola-banner-preload-spinner__path:nth-child(3){transform:rotate(135deg)}.cbola-banner-preload-spinner__path:nth-child(4):before{animation-delay:.45s}.cbola-banner-preload-spinner__path:nth-child(4){transform:rotate(180deg)}.cbola-banner-preload-spinner__path:nth-child(5):before{animation-delay:.6s}.cbola-banner-preload-spinner__path:nth-child(5){transform:rotate(225deg)}.cbola-banner-preload-spinner__path:nth-child(6):before{animation-delay:.75s}.cbola-banner-preload-spinner__path:nth-child(6){transform:rotate(270deg)}.cbola-banner-preload-spinner__path:nth-child(7):before{animation-delay:.9s}.cbola-banner-preload-spinner__path:nth-child(7){transform:rotate(315deg)}.cbola-banner-preload-spinner__path:nth-child(8):before{animation-delay:1.15s}@keyframes bgColorChange{0%{opacity:.5}12.5%{opacity:1}25%,37.5%{opacity:.9}50%{opacity:.8}62.5%{opacity:.6}100%,75%{opacity:.5}}.cbola-banner-preload__sponsored-text{margin-top:2px;font-family:Roboto;font-size:14px;letter-spacing:-.2px;color:#bebebe;text-transform:capitalize}@font-face{font-family:cbolaIcons;src:url('"+(null==(t=e.clientPath)?"":t)+"css/fonts/cbolaIcons.woff?phtwnv') format(\"woff\"),url('"+(null==(t=e.clientPath)?"":t)+"css/fonts/cbolaIcons.ttf?phtwnv') format(\"truetype\"),url('"+(null==(t=e.clientPath)?"":t)+'css/fonts/cbolaIcons.svg?phtwnv#cbolaIcons\') format("svg");font-weight:400;font-style:normal}.cbola-icon{display:inline-block;font:normal normal normal 14px/1 cbolaIcons;font-family:cbolaIcons!important;speak:none;font-size:inherit;text-transform:none;-webkit-font-smoothing:antialiased;transform:translate(-1px,1px);font-style:inherit!important}.cbola-icon-check:before{content:"\\f00c"}.cbola-icon-times:before{content:"\\f00d"}.cbola-icon-chevron-left:before{content:"\\f053"}.cbola-icon-chevron-right:before{content:"\\f054"}.cbola-icon-twitter:before{content:"\\f099"}.cbola-icon-facebook:before{content:"\\f09a"}.cbola-icon-hand-o-up:before{content:"\\f0a6"}.cbola-icon-angle-left:before{content:"\\f104"}.cbola-icon-angle-right:before{content:"\\f105"}.cbola-icon-share-alt-thick:before{content:"\\f1e0"}.cbola-icon-whatsapp:before{content:"\\f232"}.cbola-icon-share-alt-thin:before{content:"\\e900"}.cbola-icon-retweet:before{content:"\\f079"}.cbola-icon-star:before{content:"\\f005"}.cbola-icon-arrow-left:before{content:"\\f060"}.cbola-icon-arrow-right:before{content:"\\f061"}.cbola-inserted{animation-duration:1ms;animation-name:cbolaInserted;visibility:hidden}@keyframes cbolaInserted{from{opacity:.99}to{opacity:1}}'}}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.IframeBuster=function(){var e=Cbola,t=e._,i=e.Config,o=Cbola.Logger.getInstance();return function(){function e(i,o,n){_classCallCheck(this,e),this.iframeBusterOptions={hasLocationSelectors:!t.isEmpty(t.result(i,"LocationSelector",{})),iFrameAdjust:t.result(i,"iFrameAdjustForTablet",!1)&&Cbola.Env.PageProperties.isTablet||t.result(i,"iFrameAdjust",!1),mobileiFrameAdjust:t.result(i,"mobileiFrameAdjust",!1),iFrameBusterWidth:i.iFrameBusterWidth,fixedHeight:t.result(i,"iFrameFixedHeight",null),fixedWidth:t.result(i,"iFrameFixedWidth",null),advertisementTitleHeight:t.result(i,"IncludeAdvertisementTitle",!1)?20:0},this.layerType=n,this.widgetId=o,this.iFrameElement=null,this.iframePropertiesSet=!1}return _createClass(e,null,[{key:"pushScriptAboveIframe",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=window,n=o.frameElement;n&&o.parent&&o.parent!==o.top;)o=o.parent,n=o.frameElement;if(t.isNil(n))return!1;n.insertAdjacentHTML("beforebegin",'<script class="'+i.inContentClass+'" cbola_wid="'+e+'" data-manual-build="true"></script>'),n.style["height"]="0";var r=document.createElement("script");r.src=Cbola.Env.proxyElem.src,r.id=i.proxyId,r.setAttribute("mediatype","InContent");var a=parent.document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(r,a),!0}}]),_createClass(e,[{key:"init",value:function(){if(this.findIframeElement().checkIframeDimension(),this.iframeBusterOptions.fixedHeight||this.iframeBusterOptions.fixedWidth){var e=this.getIframe();e&&(this.iframeBusterOptions.fixedHeight&&(e.style["height"]=this.iframeBusterOptions.fixedHeight+this.iframeBusterOptions.advertisementTitleHeight+"px"),this.iframeBusterOptions.fixedWidth&&(e.style["width"]=this.iframeBusterOptions.fixedWidth+"px")),this.setIframeProperties()}return 112566===Cbola.Env.domainId&&this.prizeGrabHack(),this}},{key:"checkIframeDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="IframeBuster.checkIframeDimension",n=this.iframeBusterOptions;if(!this.shouldBust())return this;var r=n.iFrameBusterWidth||0,a=this.getIframe(),s=a.getBoundingClientRect();try{var l=i.getLayersDefaultSizeForIframe(this.layerType);l.height+e+n.advertisementTitleHeight>s.height&&(o.info("Iframe's height was change from: "+s.height+" to "+(l.height+e+n.advertisementTitleHeight)),a.style["height"]=l.height+e+n.advertisementTitleHeight+"px"),a.style["width"]="100%",0!==r?(a.style["min-width"]=r+"px",o.info("Iframe's min-width was change to: "+r)):-1!==l.width&&(a.style["min-width"]=l.width+"px",o.info("Iframe's min-width was change to: "+l.width)),this.setIframeProperties()}catch(d){o.errorM(t,t+" failed, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid)}return this}},{key:"setIframeSize",value:function(e,t){if(!this.shouldBust())return this;var i=this.getIframe();if(!i)return this;var o="undefined"!=typeof e?e:window.parent.innerWidth,n="undefined"!=typeof t?t:0;return i.style["width"]=o+"px",0!==n&&(i.style["height"]=n+this.iframeBusterOptions.advertisementTitleHeight+"px"),this}},{key:"setIframeProperties",value:function(){var e="IframeBuster.setIframeProperties",t=this.getIframe();if(!this.iframePropertiesSet&&t)try{t.setAttribute("scrolling","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),
t.setAttribute("frameborder","0");var i=t.contentDocument||t.contentWindow.document||document;i&&(i.body.style["margin"]=0,i.body.style["overflow"]="hidden"),this.iframePropertiesSet=!0}catch(n){o.errorM(e,e+" failed setting iframe attributes and style")}return this}},{key:"prizeGrabHack",value:function(){var e=this.getIframe();if(e){var t=e.contentDocument.head.querySelector("style");e.contentDocument.head.removeChild(t)}}},{key:"findIframeElement",value:function(){var e="IframeBuster.findIframeElement";try{this.iFrameElement=window.frameElement||null}catch(t){o.errorOnceM(e,e+" failed getting iframe element, wid: "+this.widgetId+", e:",t)}return this}},{key:"shouldBust",value:function(){var e=this.iframeBusterOptions,i=Cbola.Env.PageProperties.isMobile;return!e.hasLocationSelectors&&(e.iFrameAdjust&&!i||e.mobileiFrameAdjust&&i)&&!t.isNil(this.iFrameElement)}},{key:"getIframe",value:function(){return this.iFrameElement}}]),e}()}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Item=function(){var e=Cbola,t=e.Utils,i=e._,o=function e(t){i.extend(this,t),this.Type===e.Types.TWEET&&(i.extend(this,this.Tweet),delete this.Tweet),this.becameViewableAt=0,this.lastViewableDuration=0,this.viewOrder=1,this.displayOrder=1,this.isViewable=!1,this.userAnswerId=0};return o.prototype.setOpenType=function(e){this.openType=e},o.prototype.setCloseType=function(e){this.closeType=e},o.prototype.setDisplayOrder=function(e){this.displayOrder=e},o.prototype.setViewOrder=function(e){this.viewOrder=e},o.prototype.setUserAnswerId=function(e){this.userAnswerId=e||0},o.prototype.setViewable=function(e){if(this.isViewable=e,e)this.becameViewableAt=t.getRunTimeInSecs();else{var i=t.getRunTimeInSecs()-this.becameViewableAt;this.lastViewableDuration=Math.round(100*i)/100}},o.prototype.getViewableDuration=function(){return this.isViewable?t.getRunTimeInSecs()-this.becameViewableAt:this.lastViewableDuration},o.prototype.isAd=function(){return this.type===o.Types.AD},o.prototype.getType=function(){return this.type||this.Type},o.Types={FACT:1,TIP:2,QUOTE:3,ON_THIS_DAY:4,TRIVIA:5,DIED_THIS_DAY:6,TRIVIA_MULTI:7,TRIVIA_MULTI_PAIRS:8,GAME_SET:254,CHART:255,TWEET:9,AD:-1e3},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.BasicService=function(){var e=Cbola,t=e._,i=e.Common,o=i.RequestHandler,n=i.UserService,r=e.InContent.Layers.Item,a=Cbola.Logger.getInstance(),s={},l=function(){this.pendingItems=[],this.historicallyViewedItems=[]};return l.prototype.getMoreItems=function(e,i,n){var r=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=[],h=this.getSession(e),m=this.getOrCreatePendingItems(i),p=function(){var o=r.getHistoricallyViewedItems(i);if(!o.length||h.length)return o.splice(0),[];var n=t.differenceBy(o,h,"Id");return o.splice(0),s[e]=t.unionBy(h,n,"Id"),n||[]},u=function(){c=m.splice(0,Math.max(l,5));var i=t.differenceBy(c,h,"Id");s[e]=t.unionBy(h,i,"Id"),n(i)};if(m.length>=l)u();else{if(a.debug(this.name+"::getMoreItems -> quering server for more items..."),d+=1,d>1)return void(m.length>0?u():n(p()));var b=this.extendParams({WidgetId:i,ElementId:e,CurrentSession:t.map(h,function(e){return e.Id})});o.getMoreContent(b).then(function(o){if(a.debug(r.name+"::getMoreItems -> got more items from server"),t.isEmpty(o))return void n(p());var s=r.transformServerResponse(o),c=t.unionBy(m,s,"Id");c.unshift(0,m.length),m.splice.apply(m,c),r.getMoreItems(e,i,n,l,d)}).catch(function(){return n(p())})}},l.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},l.prototype.transformServerResponse=function(e){return e.map(function(e){return new r(e)})},l.prototype.clearSession=function(e){return s[e]=[],this},l.prototype.getSession=function(e){return"undefined"==typeof s[e]&&(s[e]=[]),s[e]},l.prototype.addItem=function(e,t){e&&!n.wasItemAlreadyViewed(e)?this.getOrCreatePendingItems(t).push(e):e&&this.getHistoricallyViewedItems(t).push(e)},l.prototype.getOrCreatePendingItems=function(e){var i=parseInt(e);return t.isArray(this.pendingItems[i])||(this.pendingItems[i]=[]),this.pendingItems[i]},l.prototype.getHistoricallyViewedItems=function(e){var i=parseInt(e);return t.isArray(this.historicallyViewedItems[i])||(this.historicallyViewedItems[i]=[]),this.historicallyViewedItems[i]},l.prototype.getAll=function(){return this.pendingItems},l.prototype.getAllByWidgetId=function(e){var t=parseInt(e);return this.pendingItems[t]},l}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisDayService=function(){function e(e){return e&&e.OnThisDayDate?t(i,new Date(e.OnThisDayDate)):!1}function t(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var i=new Date,o=Cbola,n=o._,r=o.InContent.Layers.Services.BasicService,a=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),s=function(){r.call(this),this.name="DiedThisDayService"};return n.extend(s.prototype,r.prototype),s.prototype.extendParams=function(e){return r.prototype.extendParams.call(this,e),e.ClientDate=a,e},s.prototype.transformServerResponse=function(t){var i=r.prototype.transformServerResponse.call(this,t),o=n.filter(i,e);return o.sort(),o},s.prototype.addItem=function(t,i){e(t)&&r.prototype.addItem.call(this,t,i)},s.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},s.prototype.setTotalItemsForToday=function(e){var o=0;n.forEach(e,function(e){t(i,new Date(e.Day))&&(o=e.ItemCount)}),this.totalItemsAvailableOnServer=o},s.prototype.getDateDay=function(){return i.getDate()},new s}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisWeekService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="DiedThisWeekService",this.totalItemsAvailableOnServer=0};return t.extend(i.prototype,e.prototype),i.prototype.getTotalItemsAvailableForThisWeek=function(){return this.totalItemsAvailableOnServer},i.prototype.setTotalItemsForThisWeek=function(e){this.totalItemsAvailableOnServer=e.reduce(function(e,i){return e+t.result(i,"ItemCount",0)},0)},new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.FactsService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,i=function(){e.call(this),this.name="FactsService"};return t.extend(i.prototype,e.prototype),new i}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.IndicesService=Cbola.InContent.Layers.Services.IndicesService||function(){var e=Cbola,t=e._,i=e.Env,o=e.Utils,n=e.Common,r=n.RequestHandler,a=n.UserService,s=e.InContent.Layers.Item,l=Cbola.Logger.getInstance(),d="cbola_loc",c=2,h={Items:[]},m=t.memoize(function(){try{return i.topWindow.location.href.pathname.split("/")}catch(e){return[]}}),p=function(){function e(){_classCallCheck(this,e),this.setPageParamsOnce=t.once(function(){var e=null,n=null;if(i.DEBUG){var r=o.getUrlParams(),s=r.cbolalanguage,l=r.cbolalocationkey;e=s,n=l}var c=e||t.get(i.topWindow,d+".lang")||m()[1]||a.getLanguage();this.language=t.first(c.split("-")),a.setLanguage(this.language),this.locationKey=n||t.get(i.topWindow,d+".key")||m()[6]}),this.name="IndicesService",this.language="",this.locationKey=""}return _createClass(e,[{key:"getMoreItems",value:function(e,t){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;return this.setPageParamsOnce(),l.debug(this.name+"::getMoreItems -> quering server for more items..."),r.getIndices(this.locationKey,this.language,e,t,o).then(function(e){return i.handleResponse(e,o)},function(){return Promise.resolve(h)})}},{key:"handleResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];l.debug(this.name+"::handleResponse -> data: "+e);var o=e.Items,n=void 0===o?[]:o;return e.Items=n.reduce(function(e,o){return t.isArray(o.Indices)&&o.Indices.length===i&&(o.Indices=o.Indices.map(function(e){return new s(e)}),e.push(o)),e},[]),Promise.resolve(e)}}]),e}();return new p}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.OnThisDayService=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Services.BasicService,o=new Date,n=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),r=!1,a={es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],pt:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],ja:["1","2","3","4","5","6","7","8","9","10","11","12"]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(/(\d+)/g);return t.length>=3?new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2])):null},l=function(e){var t=s(e.OnThisDayDate);t&&(o=t,n=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate())},d=function(e){if(r)return!0;if(e){var t=s(e.OnThisDayDate);if(t)return c(o,t)}return!1},c=function(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},h=function(){i.call(this),this.name="OnThisDayService"};return t.extend(h.prototype,i.prototype),h.prototype.extendParams=function(e){return i.prototype.extendParams.call(this,e),e.ClientDate=n,e},h.prototype.transformServerResponse=function(e){var o=i.prototype.transformServerResponse.call(this,e);return t.filter(o,d).sort()},h.prototype.addItem=function(e,t){d(e)&&i.prototype.addItem.call(this,e,t)},h.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},h.prototype.setTotalItemsForToday=function(e){var t=0;for(var i in e){var n=e[i],r=new Date(n.Day);c(o,r)&&(t=n.ItemCount)}this.totalItemsAvailableOnServer=t},h.prototype.getDateDay=function(){return o.getDate()},h.prototype.getMonthName=function(e){return e=a.hasOwnProperty(e)?e:"en",a[e][o.getMonth()]},h.prototype.setIgnoreClientDate=function(e,t){r=Cbola.Utils.parseBool(e),"undefined"!=typeof t&&l(t)},new h}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TriviaService=function(){var e=1,t=Cbola.Common.UserService,i=Cbola.InContent.Layers.Item,o=Cbola.Logger.getInstance(),n={},r=Cbola.InContent.Layers.Item.Types,a={TRUE_FALSE:[r.TRIVIA],MULTI_ANSWER:[r.TRIVIA_MULTI,r.TRIVIA_MULTI_PAIRS]},s={},l={},d=0,c=Cbola._,h=Cbola.EventBus,m=Cbola.Common.RequestHandler,p=function(){this.triviaTypes={};for(var e in a)a.hasOwnProperty(e)&&(this.triviaTypes[e]=e)};p.prototype.setFirstItemId=function(e){d=e},p.prototype.getNewGame=function(t,i,n,r,a){if("undefined"==typeof a&&(a=0),a>e)return void r(null);a++;var c=this.getPendingGamesByTriviaType(n),h=this.getOrCreateSession(t);if(c.length>0&&!d){var m=c.shift();delete s[m.id],m.widgetId=i,m.elementId=t,h.push(m),l[t]=h,r(m)}else o.debug("TriviaService::getNewGame -> quering server for more items..."),this.getMoreFromServer(t,i,n,function(){this.getNewGame(t,i,n,r,a)}.bind(this))},p.prototype.prepareNewGame=function(e,t,i){var o=this.translateItemToTriviaType(i);this.getPendingGamesByTriviaType(o).length>0||this.getMoreFromServer(e,t,o)},p.prototype.getMoreFromServer=function(e,n,r,a){var l=this,h=this.getOrCreateSession(e);o.debug("TriviaService::getNewGame -> quering server for more items...");var p={WidgetId:n,ElementId:e,CurrentSession:c.map(h,function(e){return e.id}),UserHistory:t.getItemsHistory(),FirstItemId:d};p=this.extendParams(p),m.getMoreContent(p).then(function(e){var t=e.map(function(e){return new i(e)}),n=l.getPendingGamesByTriviaType(r);o.debug("TriviaService::getMoreFromServer -> got more items from server");var h=c.groupBy(t,"ParentId");c.forEach(h,function(e,i){var o=s[i];o&&!o.hasAllItems()?o.items=c.unionBy(o.items,e,"Id"):o||(o=new f(e)),d?(d=0,n.unshift(o)):n.push(o),s[i]=o,a&&a(t)})}).catch(function(){a&&a([])})},p.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(t){e.FallbackMinimalWidth=0}return e},p.prototype.clearSession=function(e){l[e]=[]},p.prototype.getOrCreateSession=function(e){var t=null;return"undefined"==typeof l[e]?(t=[],l[e]=t):t=l[e],t},p.prototype.addItem=function(e){var i=e.ParentId,o=e.Type,n=s[i];if(!t.wasItemAlreadyViewed(e))if(n)n.hasAllItems()||(n.items=c.unionBy(n.items,[e],"Id"));else{var r=new f([e]),a=this.getPendingGamesByTriviaType(this.translateItemToTriviaType(o));a.push(r),s[i]=r}},p.prototype.getAll=function(){return n},p.prototype.getPendingGamesByTriviaType=function(e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]},p.prototype.translateItemToTriviaType=function(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t].indexOf(e)>-1)return t};var u=function(e){for(var t="",i=0;i<e.length;i++)if(!c.isEmpty(e[i].ChartTitle)){t=e[i].ChartTitle;break}return t},b=function(e){for(var t="",i=0;i<e.length;i++)if(!c.isEmpty(e[i].Title)){t=e[i].Title;break}return t},f=function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.id=e[0].ParentId,t.gameType=e[0].Type,t.title=u(e),t.shortTitle=b(e),t.items=e,t.currItemIdx=0,t.score=0,t.firstItem=e[0].Id,t.isCompleted=!1,t.historized=!1,t}return _inherits(i,e),_createClass(i,[{key:"getQuestionItem",value:function(e){return this.items[e]}},{key:"getCurrentQuestionItem",value:function(){return this.items[this.currItemIdx]}},{key:"getNextQuestionItem",value:function(){return this.items[this.currItemIdx+1]}},{key:"getCurrentQuestionNumber",value:function(){return this.currItemIdx+1}},{key:"hasEnded",value:function(){return this.isCompleted}},{key:"answerCurrentQuestion",value:function(e){if(this.isCompleted)return null;var i=this.items[this.currItemIdx],o=!1;0===e||this.historized||(this.historized=!0,t.addItemsToHistory([this.id]));for(var n=0;n<i.Answers.length;n++){var r=i.Answers[n];if(parseInt(e)===r.Id){1===r.Type&&(this.score+=1,o=!0);break}}return this.currItemIdx++,this.isAboutToEnd()&&Cbola.InContent.Layers.Services.TriviaService.prepareNewGame(this.elementId,this.widgetId,this.gameType),this.currItemIdx===this.items.length&&(this.isCompleted=!0,this.currItemIdx=this.items.length-1),o}},{key:"getCurrentQuestionCorrectAnswerIdx",value:function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++)if(1===e.Answers[t].Type)return t}},{key:"getCurrentQuestionCorrectAnswerId",value:function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++){var i=e.Answers[t];if(1===i.Type)return i.Id}}},{key:"restart",value:function(){this.score=0,this.currItemIdx=0,this.isCompleted=!1}},{key:"hasAllItems",value:function(){return this.gameType===Cbola.InContent.Layers.Item.Types.TRIVIA?10===this.items.length:!1}},{key:"isAboutToEnd",value:function e(){var e=this.currItemIdx+2===this.items.length;return e&&h.fire(""+h.Events.TRIVIA_BEFORE_END+this.id),e}}]),i}(i);return new p}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TweetsService=function(){function e(e){if(o.isEmpty(e))return"";var t=Date.parse(e),i=r-t;return 0>i?"":6e4>i?o.round(i/1e3,0)+"s":36e5>i?o.round(i/6e4,0)+"m":864e5>i?o.round(i/36e5,0)+"h":2592e6>i?o.round(i/864e5,0)+"d":31104e6>i?o.round(i/2592e6,0)+"mo":o.round(i/10368e5)+"y"}function t(e){return 1e3>e?e:e>=1e3&&1e6>e?o.round(e/1e3,e>=1e5?0:1)+"k":o.round(e/1e6,e>=1e7?0:1)+"M"}var i=Cbola,o=i._,n=i.InContent.Layers.Services.BasicService,r=Date.now(),a=function(){n.call(this),this.name="TweetsService"};return o.extend(a.prototype,n.prototype),a.prototype.transformServerResponse=function(i){var r=n.prototype.transformServerResponse.call(this,i);return o.map(r,function(i){return i.Favs=t(i.Favs),i.Retweets=t(i.Retweets),i.elapsedTime=e(i.PostDate||""),i.HasImage=!!i.HasImage,i})},a.prototype.addItem=function(e,t){n.prototype.addItem.apply(this,[o.head(this.transformServerResponse([e])),t])},new a}(),Cbola.Common=Cbola.Common||{},Cbola.Common.FontsManager=Cbola.Common.FontsManager||function(){function e(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),r.appendChild(t);try{if(a){var i=t.cloneNode();a.appendChild(i)}}catch(o){}}var t=Cbola._,i=Cbola.Env,o={},n={OpenSans:"Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,300,700,800",Oswald:"Oswald:400,700,300",Nunito:"Nunito:500,600,300,700,400",Roboto:"Roboto:500,300,700,400",Heebo:"Heebo:400,500"},r=document.getElementsByTagName("head")[0],a=null;try{a=window!==window.top?window.top.document.getElementsByTagName("head")[0]:null}catch(s){}var l={getKnowledge:t.once(function(){if(112441===i.domainId){var e=i.protocol+"//static.reutersmedia.net/resources_v2/fonts/Knowledge";o["Knowledge"]=!0;var t=document.createElement("style");t.appendChild(document.createTextNode("\n				@font-face {font-family: 'knowledge-regular';	src: url('"+e+"-Regular.woff') format('woff');	font-weight: normal; font-style: normal;}\n				@font-face {font-family: 'knowledge-medium'; src: url('"+e+"-Medium.woff') format('woff'); font-weight: normal; font-style: normal;}")),document.head.appendChild(t)}})};return t.forEach(n,function(i,o){l["get"+o]=t.once(function(){e("https://fonts.googleapis.com/css?family="+i)})}),l}(),window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},Cbola.Globals.ElementIdFactory=Cbola.Globals.ElementIdFactory||function(){var e=void 0,t=0,i=window;try{window.top.document&&(i=window.top)}catch(o){}var n=function(){};n.prototype={getGlobalElementId:function(){return t++,-1*t},getElementId:function(){return t}};try{i!==window?(i.Cbola=i.Cbola||{},i.Cbola.Globals=i.Cbola.Globals||{},i.Cbola.Globals.ElementIdFactory=i.Cbola.Globals.ElementIdFactory||new n,e=i.Cbola.Globals.ElementIdFactory):e=new n}catch(o){e=new n}return e}(),Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Factory={},Cbola.InContent.Layers.Factory=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common,n=o.RequestHandler,r=o.TimelineService,a=e.InContent.Layers,s=Cbola.Logger.getInstance(),l="LayersFactory",d=function(){};return d.prototype.create=function(e){s.info(l+".create -> creating layer "+e);var i=a.TYPES_TO_NAMES_MAP[e];return t.isEmpty(i)?(s.info(l+".create","No layer prototype found for layer "+e),null):new a[i]},d.prototype.shouldFetch=function(e){var i=a.TYPES_TO_NAMES_MAP[e];return t.isNil(a[i])},d.prototype.createAsync=function(e,t){var i=this,o=Cbola.Env;if(r.markStart(l+" -> creating layer "+e),this.shouldFetch(e))if(o.DEBUG){var a=document.createElement("script");a.onload=function(){t&&t(i.create(e))};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d),a.src=o.clientPath+"container/layer_"+e+"/cbola_layer_"+e+o.clientPathType+".js"}else n.getLayerScript(e).then(function(){r.markEnd(l+" -> creating layer "+e),t&&t(i.create(e))}).catch(function(){s.errorM(l+".createAsync",l+".createAsync failed fetching layer "+e)});else r.markEnd(l+" -> creating layer "+e),t&&t(this.create(e))},d.prototype.createLayerContainers=function(e){var o="";switch(e.type){case 100:case 101:case 110:Cbola.Env.DEBUG&&(e.data.DefaultSettings.FramedLayer=!0),o="in_content_container.html",Cbola.Utils.checkImageLoaded(e.data.Image);break;case 102:case 112:o=(t.get(e,"data.DefaultSettings.FramedLayer")?"framed_":"")+"in_content_container.html",i.checkImageLoaded(e.data.Image);break;case 120:case 121:o="desktop_trivia_container.html";break;case 130:case 131:case 132:case 133:case 134:case 135:case 136:case 137:case 138:case 139:case 140:case 150:case 151:case 152:case 153:o="sidebar_container.html";break;case 160:case 170:o="in_content_container.html";break;case 1e3:case 1100:case 1400:o="mobile_container.html";break;default:throw s.errorM(l+".createLayerContainers",l+"->createLayerContainers failed to build container due to unknown layer type: "+e.type),new Error("Unknown layer type")}e.topContainer=Cbola.Templates.createElement(o),e.container=e.topContainer.querySelector(".layer-container"),e.container.classList.remove("layer-container"),160===e.type&&(e.container.style["max-width"]=null),e.topContainer.setAttribute("layerType",e.type.toString()),e.topContainer.classList.add("cbola-wid-"+e.widgetId),e.topContainer.classList.add("cbola-elem-id-"+e.elementId),i.isFirefox?e.topContainer.classList.add("cbola-ua-ff"):i.isIE&&e.topContainer.classList.add("cbola-ua-ie")},new d}(),Cbola.InContent.Layers.TYPES_TO_NAMES_MAP={100:"DesktopInContentSliderFactsLayer",101:"DesktopInContentSliderReadMoreLayer",102:"DesktopFactsCoverLayer",110:"DesktopInContentSliderOnThisDayLayer",112:"DesktopOnThisDayCoverLayer",120:"DesktopTriviaLayer",121:"DesktopTriviaMultiLayer",130:"SidebarFactsLayer",131:"SidebarFactsReadMoreLayer",132:"SidebarFactsWithSliderLayer",133:"SponsoredSidebarFactsLayer",134:"SidebarDiedOnThisDayLayer",135:"SidebarOnThisDayLayer",136:"SidebarSlideshowFactsLayer",137:"SidebarSlideshowOnThisDayLayer",138:"StoriesSlideshowFacts",139:"StoriesSlideshowOTD",140:"SidebarTriviaLayer",150:"SlideshowDiedOnThisDayLayer",151:"SlideshowDiedOnThisWeekLayer",152:"SlideshowFactsLayer",153:"SlideshowOnThisDayLayer",160:"DesktopTwitterLayer",170:"DesktopIndicesSlideshowLayer",1e3:"MobileFactsLayer",1100:"MobileOnThisDayLayer",1400:"MobileTriviaLayer"};var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.HasViewability=Cbola.Common.HasViewability||function(){var e=Cbola,t=e._,i=e.Utils,o=e.EventBus,n=e.Env,r=e.Enums.ItemViewTypes,a=o.Events,s=Cbola.Logger.getInstance(),l=8,d=2e3,c=t.memoize(function(){for(var e=["","webkit","moz","ms"],t=0;t<e.length;t++){var i=e[t],o=""===i?"hidden":i+"Hidden";if(o in document)return{hidden:o,changeEventName:i+"visibilitychange"}}return null}),h=function(){};h.prototype.init=function(e){this.becameViewableAt=0,this.viewableDuration=0,this.viewable=!1,this.element=e,this.viewId=null,this.observer=null,this.viewableEvent=""+a.LAYER_IS_VIEWABLE+this.elementId},h.prototype.updateViewability=function(){m.isViewabilityTestable()?this.observer=new m(this.element,this.elementId):p.isViewabilityTestable()&&(this.observer=new p(this.element,this.elementId)),o.addEventListener(""+a.OBSERVER_VIEWABLE+this.elementId,this.onObserverViewable.bind(this)),o.addEventListener(""+a.OBSERVER_NON_VIEWABLE+this.elementId,this.onObserverNonViewable.bind(this)),this.observer&&this.observer.init()||(this.viewable=!0,this.onBecameViewable(r.IN_IFRAME))},h.prototype.onObserverViewable=function(){this.viewId=i.generateViewId(),this.viewable=!0,this.onBecameViewable(r.VIEWABILITY)},h.prototype.onObserverNonViewable=function(){this.viewId=i.generateViewId(),this.viewable=!1,this.onBecameUnviewable()},h.prototype.isViewable=function(){return this.viewable},h.prototype.getViewId=function(){return this.viewId},h.prototype.getViewDuration=function(){return this.viewable?i.getRunTimeInSecs()-this.becameViewableAt:this.viewableDuration},h.prototype.onBecameViewable=function(){s.info("element became viewable.",this),o.fire(this.viewableEvent),this.becameViewableAt=i.getRunTimeInSecs()},h.prototype.onBecameUnviewable=function(){s.info("element became unviewable.",this),this.viewableDuration=i.getRunTimeInSecs()-this.becameViewableAt};var m=function(){function e(t,i){_classCallCheck(this,e),this.observed=t,this.elemId=i,this.ignoreIntersectionChanges=!1,this.observedViewable=!1}return _createClass(e,null,[{key:"isViewabilityTestable",value:function(){return!t.isNil(window.IntersectionObserver)}}]),_createClass(e,[{key:"init",value:function(){var e=g.init().isVisible();return t.isNil(e)?!1:(this.observer=new IntersectionObserver(this.onObserverChange.bind(this),{root:null,rootMargin:"0px",threshold:.5}),this.observer.observe(this.observed),o.addEventListener(a.PAGE_VISIBILITY_CHANGE,this.onVisibilityChange.bind(this)),!0)}},{key:"onObserverChange",value:function(e){var t=this;if(!this.ignoreIntersectionChanges){var i=e.shift(),n=i.intersectionRatio>.5;clearTimeout(this.intersectionTestTimeout),n!==this.observedViewable&&(this.intersectionTestTimeout=setTimeout(function(){var e=n?a.OBSERVER_VIEWABLE:a.OBSERVER_NON_VIEWABLE;t.observedViewable=n,o.fire(""+e+t.elemId)},d))}}},{key:"onVisibilityChange",value:function(e){var t=this,i=e.detail;i?(this.ignoreIntersectionChanges=!1,this.testViewabilityOnReturn&&(this.intersectionTestTimeout=setTimeout(function(){t.observedViewable=!0,o.fire(""+a.OBSERVER_VIEWABLE+t.elemId)},d))):(clearTimeout(this.intersectionTestTimeout),this.ignoreIntersectionChanges=!0,this.observedViewable&&(this.testViewabilityOnReturn=!0,this.observedViewable=!1,o.fire(""+a.OBSERVER_NON_VIEWABLE+this.elemId)))}}]),e}(),p=function(){function e(i,o){_classCallCheck(this,e),this.observed=i,this.observedWindow=t.result(this.observed,"ownerDocument.defaultView"),this.observedViewable=!1,this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=0,this.elemId=o,this.observedWindow||(s.errorM("ElementViewabilityObserver.ctor","ElementViewabilityObserver.ctor failed to get default view from element"),window.document.contains(this.observed)?this.observedWindow=window:s.errorM("ElementViewabilityObserver.ctor","ElementViewabilityObserver.ctor failed to get default view from element"))}return _createClass(e,null,[{key:"isViewabilityTestable",value:function(){return!t.isNil(n.viewportWindow)}}]),_createClass(e,[{key:"init",value:function(){var e=b.init().isFocused();return t.isNil(e)?!1:(o.addEventListener(a.FOCUS_CHANGE,this.onFocusChange.bind(this)),e&&this.testViewability(),!0)}},{key:"onFocusChange",value:function(e){var t=e.detail;t?this.testViewability():this.stopViewabilityTesting()}},{key:"testViewability",value:function(){this.isElementInViewport()?(this.viewabilityTestCounter=this.viewabilityTestCounter<l?this.viewabilityTestCounter+1:l,this.outOfViewabilityTestCounter=0):(this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=this.outOfViewabilityTestCounter<l?this.outOfViewabilityTestCounter+1:l);var e=null;this.observedViewable||this.viewabilityTestCounter!==l?this.observedViewable&&this.outOfViewabilityTestCounter===l&&(e=a.OBSERVER_NON_VIEWABLE):e=a.OBSERVER_VIEWABLE,e&&(this.observedViewable=!this.observedViewable,o.fire(""+e+this.elemId)),this.nextViewabilityTesting=setTimeout(this.testViewability.bind(this),d/l)}},{key:"stopViewabilityTesting",value:function(){clearTimeout(this.nextViewabilityTesting),this.viewabilityTestCounter=0,this.outOfViewabilityTestCounter=0,this.observedViewable&&(this.observedViewable=!1,o.fire(""+a.OBSERVER_NON_VIEWABLE+this.elemId))}},{key:"isElementInViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.observed.getBoundingClientRect().height,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.observed,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.observedWindow,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!o||t.isNil(o.offsetParent)||!r||"hidden"===r.getComputedStyle(o).visibility)return!1;try{var s=r.scrollY||r.pageYOffset,l=i.cumulativeOffset(o).top+a,d=l+e/2>=s&&s+r.innerHeight>l+e/2;return d&&r!==n.viewportWindow?this.isElementInViewport(e,r.frameElement,r.parent,l-s):d}catch(c){return!1}}}]),e}(),u=function(){this.focused=null,this.isInitialized=!1};u.prototype={init:function(){if(!this.isInitialized&&this.addFocusEvents()){var e=c()||{},t=e.hidden;this.focused=!document[t]&&n.viewportWindow.document.hasFocus(),this.isInitialized=!0}return this},isFocused:function(){return this.focused},addFocusEvents:function(){var e=this,t=c()||{},i=t.hidden,o=t.changeEventName;if(document.hasFocus&&i){var r="onfocusin"in window?"focusin":"focus",a="onfocusout"in window?"focusout":"blur",s=n.viewportWindow,l=function(t){t.type===r?setTimeout(function(){return e.updateFocus(!document[i]&&s.document.hasFocus())},300):e.updateFocus(!document[i]&&s.document.hasFocus())};try{return s.addEventListener(r,l),s.addEventListener(a,l),document.addEventListener(o,l),!0}catch(d){}}return!1},updateFocus:function(e){e!==this.focused&&(this.focused=e,o.fire(a.FOCUS_CHANGE,e))}};var b=new u,f=function(){this.visible=null,this.isInitialized=!1};f.prototype={init:function(){if(!this.isInitialized&&this.addVisibilityEvents()){var e=c()||{},t=e.hidden;this.visible=!document[t],this.isInitialized=!0}return this},addVisibilityEvents:function(){var e=this,t=c()||{},i=t.hidden,o=t.changeEventName;if(i)try{return document.addEventListener(o,function(){return e.updateVisibility(!document[i])}),!0}catch(n){}return!1},updateVisibility:function(e){e!==this.visible&&(this.visible=e,o.fire(a.PAGE_VISIBILITY_CHANGE,e))},isVisible:function(){return this.visible}};var g=new f;return h}(),Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Types={FACTS:[100,101,102,110,130,131,132,133,136,138,152,1e3],TRIVIA:[120,121,140,1400],ON_THIS_DAY:[110,135,137,139,153,1100],TWITTER:[160],INDICES:[170],DIED_ON_THIS_DAY:[134,150],DIED_ON_THIS_WEEK:[151],SIDEBAR:Cbola.Config.layouts.sideBars.all,SIDEBAR_SLIDESHOW:Cbola.Config.layouts.sideBars.sidebarSlideshow,PLAYBOX_SLIDESHOW:Cbola.Config.layouts.sideBars.slideShow,STORIES_SLIDESHOW:Cbola.Config.layouts.sideBars.storiesSlideshow,IN_CONTENT:Cbola.Config.layouts.inContent.all},Cbola.InContent.Layers.FormFactors={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},Cbola.InContent.Layers.Base=Cbola.InContent.Layers.Base||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.InContent.Layers.Types,o=function(){t.debug("Layers.Base::ctor"),this.formFactor=Cbola.InContent.Layers.FormFactors.DESKTOP};return e.extend(o.prototype,Cbola.Common.HasViewability.prototype),o.prototype.init=function(){var e=Cbola.Common.HasViewability.prototype;
t.debug("Layers.Base::init"),e.init.call(this,this.container)},o.prototype.setOptions=function(e){t.debug("Layers.Base::setOptions"),this.options=e||{}},o.prototype.applyOptions=function(){t.debug("Layers.Base::applyOptions"),e.assign(this.container.style,{"margin-top":this.options.MarginTopCover+"px","margin-bottom":this.options.MarginBottomCover+"px","padding-bottom":this.options.PaddingBottomCover+"px"})},o.prototype.onBeforeLoad=function(){t.debug("Layers.Base::onBeforeLoad")},o.prototype.onLoad=function(){t.debug("Layers.Base::onLoad")},o.prototype.onAfterLoad=function(){t.debug("Layers.Base::onAfterLoad",this),Cbola.taskManager.addTask(this.updateViewability,[],this)},o.prototype.bindEvents=function(){t.debug("Layers.Base::bindEvents")},o.prototype.unbindEvents=function(){t.debug("Layers.Base::bindEvents")},o.prototype.destroy=function(){t.debug("Layers.Base::destroy"),this.unbindEvents()},o.prototype.isMobile=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.MOBILE},o.prototype.isTablet=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.TABLET},o.prototype.isDesktop=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.DESKTOP},o.prototype.isSidebar=function(){var e=this;return i.SIDEBAR.some(function(t){return t===e.type})},o.prototype.isSidebarSlideshow=function(){var e=this;return i.SIDEBAR_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isStoriesSlideshow=function(){var e=this;return i.STORIES_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isPlaybox=function(){var e=this;return i.PLAYBOX_SLIDESHOW.some(function(t){return t===e.type})},o.prototype.isInContent=function(){var e=this;return i.IN_CONTENT.some(function(t){return t===e.type})},o.prototype.isFacts=function(){var e=this;return i.FACTS.some(function(t){return t===e.type})},o.prototype.isTrivia=function(){var e=this;return i.TRIVIA.some(function(t){return t===e.type})},o.prototype.isOnThisDay=function(){var e=this;return i.ON_THIS_DAY.some(function(t){return t===e.type})},o.prototype.isTwitter=function(){var e=this;return i.TWITTER.some(function(t){return t===e.type})},o.prototype.isIndices=function(){var e=this;return i.INDICES.some(function(t){return t===e.type})},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.OptionsBase=function(){var e=Cbola._,t={MarginTopCover:0,MarginBottomCover:0,PaddingBottomCover:0,ShowAdAnimation:!0,DesktopInContentMinWidth:null,ResetOnReAttach:!1,SidebarTopContainerTextAlign:null,RemovePoweredByCarambola:!1,ShowAdvertisementTitleOnAds:!1,WithSeparators:!1};return function i(o,n){_classCallCheck(this,i),e.extend(this,o.DefaultSettings),e.defaults(this,t),(0===this.ShowAdAnimation||"false"===this.ShowAdAnimation)&&(this.ShowAdAnimation=!1),this.themeColor=e.get(o,"DefaultSettings.InContentThemeColor",null)||e.get(o,"DefaultSettings.ThemeColor","rgb(62,209,217)");var r=Cbola.Config.getLayersDefaultSize(n),a=r.height,s=r.width;this.layerHeight=a,this.layerWidth=s}}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopFactsOptions=function(){var e=Cbola,t=e._,i=Cbola.InContent.Layers.Options.OptionsBase,o={InContentTitleBGColor:null,WidgetTitleFontColor:null,InContentTitleFontColor:null,RemoveInContentHeader:null,InContentTimerBackgroundColor1:"rgb(178,42,80)",InContentTimerBackgroundColor2:"rgb(167,38,76)",FramedLayer:!1,InContentAlignment:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={HideSocialButtons:!1,BrandImg:null,BrandRedirect:null,DesktopTriviaTimerDuration:10,DesktopTriviaTimerDisabled:!1,InContentThemeColor:"rgb(62, 209, 217)",InContentThemeHoverColor:"rgb(56, 185, 193)"};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r.InContentThemeColor=r.InContentThemeColor||t.result(e,"DefaultSettings.ThemeColor",null),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.TriviaOptions,o={showTriviaButtonIcons:!0,TriviaColorSkin:null,inContentTriviaFloatType:null,MaxInContentTriviaWidth:650};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),"false"===r.showTriviaButtonIcons&&(r.showTriviaButtonIcons=!1),("undefined"==typeof r.DesktopInContentMinWidth||null===r.DesktopInContentMinWidth)&&(r.DesktopInContentMinWidth=500),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaMultiOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.TriviaOptions,o={DesktopMultiTriviaBorderColor:null,DesktopMultiTriviaDisplayAnswerLetters:!0,DesktopMultiTriviaAdvertisementTitle:!1,MaxInContentTriviaWidth:640,DesktopMultiTriviaInGameTimerDuration:15,DesktopMultiTriviaEndGameTimerDuration:15,DesktopMultiTriviaEndGameImg:null,DesktopMultiTriviaEndGameLink:null,DesktopMultiTriviaBackgroundColor:null,DesktopMultiTriviaFontColor:null,MultiTriviaProgressFontColor:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),t.isNil(r.MultiTriviaProgressFontColor)&&(r.MultiTriviaProgressFontColor=r.InContentThemeColor),("undefined"==typeof r.DesktopInContentMinWidth||null===r.DesktopInContentMinWidth)&&(r.DesktopInContentMinWidth=480),Cbola.Env.DEBUG,r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.IndicesOptions=function(){var e,t,i=Cbola,o=i._,n=Cbola.InContent.Layers.Options.OptionsBase,r={ARROW:1},a={IndicesActiveProgressColor:"#07aebc",IndicesButtonColor:"#ff9838",IndicesSlideshowAutoplayDuration:4,InContentAlignment:null};return t=e=function(e){function t(e,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.defaults(n,a),n}return _inherits(t,e),t}(n),e.ButtonsStyle=r,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={MobileFontSize:null,MobileClippedHeight:0,MobilePaddingBottomCover:null,mobileThemeColor:"rgb(243,100,99)",mobileTitleFontSize:null,mobileFullScreen:{mode:"portrait",outsideIframe:!1},MobileInContentColorSkin:null,mobileTranslateZ:null,mobileCompressedHeight:!0,mobileShareEnabled:!0,BrandImg:null,BrandRedirect:null,mobileItemCount:null,mobileResizeCount:4};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r.mobileShareEnabled=Cbola.Utils.parseBool(r.mobileShareEnabled),r.mobileItemCount&&(r.mobileItemCount=parseInt(r.mobileItemCount)),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileFactsOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.MobileOptions,o={mobileTitleImage:null,mobileTitleFontSize:null,mobileThemeColor:"#f36463",mobileAutoplayDuration:4};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileTriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options,o=i.TriviaOptions,n=i.MobileOptions,r={MobileTriviaColorSkin:null,mobileThemeColor:"#19C2CC"};return function e(i,a){_classCallCheck(this,e),t.extend(this,new o(i,a)),t.defaults(this,r),t.extend(this,new n(i,a))}}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarDiedOnOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={InContentTitleBGColor:null,InContentTitleFontColor:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarTriviaOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.TriviaOptions,o={SbTriviaEndGameImgBottom:null,SbTriviaEndGameImgTop:null,SbTriviaScoreTextColor:null,SbTriviaEndGameImgLink:null,BrandClickTracker:null,SbTriviaEndGameClickTracker:null,SBTriviaPaddingBottomCover:25};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}(),Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SlideshowOptions=function(){var e,t,i=Cbola._,o=Cbola.Utils,n=Cbola.InContent.Layers.Options.OptionsBase,r={ArrowTeaser:1,SlideshowAutoplayDuration:4,SideboxStyleGuide:null,SideboxShareEnable:!0,PlayboxBrandImg:null,PlayboxBrandRedirect:null,PlayboxTextualHeader:null,PlayboxReutersStyleGuide:null},a={BASIC:1,HIDDEN_BUTTONS:2,EXTENDED:3};return t=e=function(e){function t(e,n){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.defaults(s,r),o.isMobile&&(s.themeColor=i.result(e,"DefaultSettings.InContentThemeColor",i.result(e,"DefaultSettings.ThemeColor",i.result(e,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),s.ArrowTeaser=o.parseBool(s.ArrowTeaser),s.PlayboxReutersStyleGuide===a.EXTENDED&&152===n&&(s.layerHeight=280),s}return _inherits(t,e),t}(n),e.ReutersStyleGuides=a,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.StoriesSlideshow=function(){var e,t,i=Cbola,o=i._,n=i.Utils,r=i.InContent.Layers.Options.OptionsBase,a={SHARP:1,SHARP_LEFT:2,ROUND:3},s={SlideshowAutoplayDuration:10,StoriesSlideshowStyleGuide:a.ROUND,StoriesSlideshowBackgroundColor:"transparent",LayerExposureOnAdsReady:!0};return t=e=function(e){function t(e,i){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.defaults(r,s),n.isMobile&&(r.themeColor=o.get(e,"DefaultSettings.InContentThemeColor",o.get(e,"DefaultSettings.ThemeColor",o.get(e,"DefaultSettings.mobileThemeColor","rgb(62,209,217)")))),r}return _inherits(t,e),t}(r),e.StyleGuides=a,t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TwitterOptions=function(){var e=Cbola,t=e._,i=e.InContent.Layers.Options.OptionsBase,o={SlideshowAutoplayDuration:5,TwitterColorSkin:null,TwitterBgColor:null,InContentAlignment:null};return function(e){function i(e,n){_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,n));return t.defaults(r,o),r}return _inherits(i,e),i}(i)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.Factory=function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.InContent.Layers.Options,o=function(i){if(e.isNil(i))return i;var o=t.getUrlParams();for(var n in i)i.hasOwnProperty(n)&&!e.isNil(o["cbola"+e.toLower(n)])&&(i[n]=o["cbola"+e.toLower(n)]);return i},n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e){var t=null;switch(e.type){case 100:case 101:case 102:case 110:case 112:t=new i.DesktopFactsOptions(e.data,e.type);break;case 120:t=new i.DesktopTriviaOptions(e.data,e.type);break;case 121:t=new i.DesktopTriviaMultiOptions(e.data,e.type);break;case 130:case 131:case 132:case 133:case 134:t=new i.OptionsBase(e.data,e.type);break;case 135:t=new i.SidebarDiedOnOptions(e.data,e.type);break;case 136:case 137:t=new i.SlideshowOptions(e.data,e.type);break;case 138:case 139:t=new i.StoriesSlideshow(e.data,e.type);break;case 140:t=new i.SidebarTriviaOptions(e.data,e.type);break;case 150:case 151:case 152:case 153:t=new i.SlideshowOptions(e.data,e.type);break;case 160:t=new i.TwitterOptions(e.data,e.type);break;case 170:t=new i.IndicesOptions(e.data,e.type);break;case 1e3:case 1100:t=new i.MobileFactsOptions(e.data,e.type);break;case 1400:t=new i.MobileTriviaOptions(e.data,e.type);break;default:Cbola.Logger.getInstance().warnM("OptionsFactory.create","No options prototype found for layer "+e.type),t=null}return t=o(t)}}]),e}();return n}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Manager=function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.EventBus,o=Cbola.Config,n=Cbola.Env,r=Cbola.Templates,a=Cbola.TaskManager,s=Cbola.Enums.PageRequestTypes,l=Cbola.Enums.LoadStatusTypes,d=Cbola.Enums.AbTests,c=Cbola.Enums.IntegrationTypes,h=Cbola.Enums.UnitLoadTypes,m=Cbola.Common.AnalyticsService,p=Cbola.Common.FontsManager,u=Cbola.Common.IframeBuster,b=Cbola.Common.RequestHandler,f=Cbola.Common.TimelineService,g=Cbola.Globals.AdsService,y=Cbola.Globals.ElementIdFactory,v=Cbola.Logger.Colors,w=Cbola.InContent.Layers.Base,_=Cbola.InContent.Layers.Factory,C=Cbola.InContent.Layers.Options.Factory,I=i.Events,x=Cbola.Logger.getInstance(),E="InContentManager",S=function(e){var t=e.type;try{f.markStart("layer "+t+" -> setOptions"),e.setOptions(C.create(e)),f.markEnd("layer "+t+" -> setOptions"),f.markStart("layer "+t+" -> init"),e.init(),f.markEnd("layer "+t+" -> init"),f.markStart("layer "+t+" -> onBeforeLoad"),e.onBeforeLoad(),f.markEnd("layer "+t+" -> onBeforeLoad"),f.markStart("layer "+t+" -> onLoad"),e.onLoad()}catch(i){x.errorM("runLayerLifecycle","Layer "+t+" failed on lifecycle loading flow")}},T=function(i){var o=i.detail;f.markEnd("layer "+o.type+" -> onLoad"),x.info(v.YELLOW,"WidgetLoad: "+t.getRunTimeInSecs()+"; for elementId: "+o.elementId+"; widgetId: "+o.widgetId,o.container),o.isSidebar()&&A(o),O(o);var r=f.record(o.onAfterLoad.bind(o),"layer "+o.type+" -> onAfterLoad");return e.result(o,"isAdOnly",!1)?void r():(L(o).then(r),n.PageProperties.PageStatus=1,void m.setPageElementRequest({layer:o,loadStatus:l.SUCCESS}))},A=function(t){for(var i=t.topContainer.parentElement,n=o.getLayersDefaultSize(t.type),r=!1,a={width:["left","right"],height:["top","bottom"]},s=function(){r=!0;var t=window.getComputedStyle(i),o=i.getBoundingClientRect();e.forEach(n,function(e,n){var s="border-box"===t["boxSizing"]?a[n].reduce(function(e,i){return e+=parseInt(t["padding-"+i])||0},0):0;parseInt(o[n],10)-s<e&&(i.style["min-"+n]=e+s+"px",r=!1)}),i=i.parentElement};i&&!r;)s()},L=function(i){return t.toggleTransition(i.container,!1).then(function(){if(e.get(i,"options.LayerExposureOnAdsReady",!1)){var t=g.getTriggersManagerByElementId(i.elementId);if(!e.isNil(t)){var o=[];return o.push(t.managerReady()),o.push(new Promise(function(t){return setTimeout(t,e.get(i,"options.DelayLayerExposure")||3e3)})),Promise.race(o)}}return Promise.resolve()}).then(function(){return t.toggleTransition(i.container,!0)}).then(function(){i.container.style["opacity"]="1"})},O=function(t){e.get(t,"options.WithSeparators")&&t.topContainer.classList.add("cbola-separated")},k=function(e){return!t.isInIframe()&&!t.isElementDisplayed(e)},P=e.memoize(function(e){return w.prototype.isSidebar.apply(e)},function(e){return e.type}),N=function(){function r(){_classCallCheck(this,r),this.enabled=!1,this.inProcessByWidgetId={},this.layerByElementId={},this.layerByWidgetId={},this.activeLayersCounter=1,i.addEventListener(I.LAYER_READY,T)}return _createClass(r,[{key:"init",value:function(e){this.bootstrapper=e,this.enabled=!0}},{key:"createWidgetForPlaceholder",value:function(e,i){var o=this;this.enabled&&b.getPageElements(i).then(function(t){o.bootstrapper.initializeServices({detail:t}),o.processPageElementsResponse(t,e)}).catch(t.noOp)}},{key:"processPageElementsResponse",value:function(t,i){if(n.IntegrationType===c.SAFE_FRAME&&!e.get(t,"DefaultSettings.EnableLoadOnKnownSafeFrame",!1))return m.setPageRequest(s.BLOCKED_KNOWN_SAFE_FRAME,t.IsServerCall),x.info(Cbola.Logger.Colors.RED,"Bootstrapper.onPageElementsRecieved stopped due to blocking known safe frame."),void(this.enabled=!1);this.bootstrapper.initPlatform(t);var o=t.widgetId;e.isNil(o)||(this.inProcessByWidgetId[o]=new B(this,i,t))}},{key:"destroyInProcessWidget",value:function(e){delete this.inProcessByWidgetId[e]}},{key:"onProcessSuccess",value:function(e){var i=E+".onLayerScriptFetched";e?(x.info(v.PALE_GREEN,"Finished uploading layer "+e.type+": "+t.getRunTimeInMilis()),this.layerByElementId[e.elementId]=e,this.layerByWidgetId[e.widgetId]=e,this.destroyInProcessWidget(e.widgetId),S(e)):x.errorM(i,i+" "+e.type+" has not known layer")}},{key:"getLayerByElementId",value:function(e){return this.layerByElementId[e]}},{key:"getLayerByWidgetId",value:function(e){return this.layerByWidgetId[e]}},{key:"checkMaxWidgets",value:function(){return this.activeLayersCounter<o.MaxWidgets?(this.activeLayersCounter+=1,this.activeLayersCounter):0}}]),r}(),B=function(){function c(o,r,a){var d=this;_classCallCheck(this,c),this.start=f.record(function(){var o="WidgetPreLoadProcess.start",r=isNaN(d.data.widgetId)?"0":d.data.widgetId;d.widgetId=r,n.widgetId=r;var a=y.getGlobalElementId();d.elementId=a;var c=d.manager.checkMaxWidgets();if(!c)return x.info("elementId: "+a+", failed because maxOfElements in page"),i.fire(I.ELEMENT_FAILED,{elementId:a,loadStatus:l.MAX_ELEMS_REACHED}),void d.manager.destroyInProcessWidget(r);var h="true"===t.dataset(d.placeholder,"manualBuild");if(h&&t.datasetRemove(d.placeholder,"status"),!e.isNil(t.dataset(d.placeholder,"status")))return void d.manager.destroyInProcessWidget(r);t.dataset(d.placeholder,"status","started"),t.dataset(d.placeholder,"elementId",a),t.dataset(d.placeholder,"activeId",c);var p={type:e.get(d.data,"DefaultSettings.Layouts[0].LayoutType"),itemType:e.get(d.data,"DefaultSettings.Layouts[0].ItemType")};return e.isNil(p.type)||e.isNil(p.itemType)?(x.errorM("WidgetPreLoadProcess.start","initialize InContent layer type error"),void d.manager.destroyInProcessWidget(r)):void(!h&&e.get(d.data,"DefaultSettings.outsideIframe",!1)&&t.isFriendlyIframe()?u.pushScriptAboveIframe(r)||(m.setPageRequest(s.INITIALIZE_FAILED,d.data.IsServerCall),d.manager.destroyInProcessWidget(r)):(d.withLocationSelector="undefined"!=typeof d.data.DefaultSettings.LocationSelector,d.withLocationSelector&&m.setPageRequest(s.PAGE_VIEW,d.data.IsServerCall),e.extend(p,{activeId:c,elementId:a,widgetId:r,data:d.data,scriptElement:d.placeholder,element:null,hbToken:t.dataset(d.placeholder,"modelsToken")}),p.iframeBuster=new u(d.data.DefaultSettings,r,p.type),p.iframeBuster.init(),d.layer=p,d.attachElementToSelector().then(d.testCompatibleContainer.bind(d),function(){x.info(v.PALE_RED,"findICSelectorElement was failed. elementId:"+a),i.fire(I.ELEMENT_FAILED,{elementId:a,loadStatus:l.SELECTOR_NOT_FOUND}),d.manager.destroyInProcessWidget(r)}).catch(function(e){m.setPageRequest(s.INITIALIZE_FAILED,p.data.IsServerCall),x.criticalM(o,"failed: initialize of IC was failed at "+o+". url: "+n.PageProperties.hostname,e),d.manager.destroyInProcessWidget(r)})))},"WidgetPreLoadProcess.start"),this.manager=o,this.placeholder=r,this.data=a,this.preBuild()}return _createClass(c,[{key:"preBuild",value:function(){var i=t.getUrlParams()["cbolaloadtype"]||(o.abTestId===d.LAYER_ON_PAGE_LOAD?h.PAGE_LOAD:e.get(this.data,"DefaultSettings.LoadType"))||h.ASYNC;switch(i){case h.DOM_LOADED:t.documentReady(this.start.bind(this));break;case h.PAGE_LOAD:t.pageReady(this.start.bind(this));break;default:this.start()}}},{key:"attachElementToSelector",value:function(){var e=this;return this.withLocationSelector?new Promise(function(i,n){var r=function r(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(l>=o.findICSelectorElementMaxRetries)return void n();x.debug("retry of SelectorElement for elementId: "+e.elementId+", cbola_findICSelectorElement function, retries: "+l);for(var d=0;d<s.length;d++){var c=s[d],h=document.querySelectorAll(c.SelectorValue);if(h.length>0){var m=h[Math.min(c.AppearancePosition,h.length-1)];return 1===c.LocationType?t.preappend(m,e.placeholder):m.appendChild(e.placeholder),void i()}}l+=1,x.warn("Selector element was not found"),a.addTask(r,[s,l],e)};r(e.data.DefaultSettings.LocationSelector)}):Promise.resolve()}},{key:"testCompatibleContainer",value:function(){var i=this,l="WidgetPreLoadProcess.testCompatibleContainer",d=r.createElement("width_check.html"),c=t.isFriendlyIframe()&&!t.isElementDisplayed(window.frameElement),h=k(d),p=[];t.after(this.placeholder,d),a.addExpBackoffTask({fn:function(r,a){for(var u=d.clientWidth,b=d,f=0,g=!1;0===u&&f<=o.maxParentElementsCheckWidth&&b;)try{"undefined"==typeof p[f]&&(p[f]=b.parentElement),b=p[f],f+=1,b&&(u=b.clientWidth,b.tagName&&"head"===b.tagName.toLowerCase()&&(g=!0))}catch(y){return m.setPageRequest(s.INITIALIZE_FAILED,i.data.IsServerCall),x.criticalM(l,"Initialize of IC was failed at "+l+" width element parents iteration. url: "+n.PageProperties.hostname,y),i.manager.destroyInProcessWidget(i.widgetId),!1}if(g)return m.setPageRequest(s.INITIALIZE_FAILED,i.data.IsServerCall),x.criticalM(l,"Script injected in page's head. url: "+n.PageProperties.hostname+", pageviewid: "+n.PageProperties.cbola_pageViewId),i.manager.destroyInProcessWidget(i.widgetId),!1;if(u>0)return d.remove(),i.checkMinWidth(u),!1;if(P(i.layer)&&!h&&!c&&!t.isInIframe())return i.buildStructure(),!1;if(a){var v="";h?v="In hidden containing element.":c?v="In hidden iFrame.":t.isInIframe()&&(v="In non-friendly iFrame."),x.errorM(l,"IC too small - div width is 0. "+v+" url: "+n.PageProperties.hostname),m.setPageRequest(c||h?s.HIDDEN_IFRAME:s.DIV_TOO_SMALL,i.data.IsServerCall,{width:0,height:e.get(d,"parentElement.clientHeight",0)}),d.remove(),i.manager.destroyInProcessWidget(i.widgetId)}},backoff:[500,1e3,2500,5e3]})}},{key:"checkMinWidth",value:function(t){var r="WidgetPreLoadProcess.checkMinWidth";try{var a=o.getLayerMinSizes(this.layer.type).width,d=e.get(this.placeholder,"parentElement"),c=k(d);if(t=Math.max(e.get(d,"clientWidth")||0,t+e.get(this.data,"DefaultSettings.MaxWidthCompensation",0)),a>t&&(c||!P(this.layer))){if(this.tryFallbackWidth(t))return;return this.withLocationSelector?(x.errorM(r,"ICsmall, selector element too small. Width: "+t+", url: "+n.PageProperties.hostname),i.fire(I.ELEMENT_FAILED,{elementId:this.elementId,loadStatus:l.SELECTOR_TOO_SMALL})):(x.errorM(r,"ICsmall, width too small for IC. Width: "+t+", url: "+n.PageProperties.hostname),m.setPageRequest(c?s.HIDDEN_IFRAME:s.DIV_TOO_SMALL,this.data.IsServerCall,{width:t,height:e.get(d,"clientHeight",0)})),void this.manager.destroyInProcessWidget(this.widgetId)}this.buildStructure()}catch(h){m.setPageRequest(s.INITIALIZE_FAILED,this.data.IsServerCall),x.criticalM(r,"failed: initialize of IC was failed at "+r+". url: "+n.PageProperties.hostname,h),this.manager.destroyInProcessWidget(this.widgetId)}}},{key:"tryFallbackWidth",value:function(e){for(var i=0;i<o.inContentFallbackWidths.length;i++){var n=o.inContentFallbackWidths[i];if(e>=n)return x.info(v.PALE_YELLOW,"trying fallback width "+n),this.layer.fallbackMinimalWidth=n,b.getPageElements(this.widgetId,n).then(this.fallbackLayerReset.bind(this)).catch(t.noOp),!0}return!1}},{key:"fallbackLayerReset",value:function(t){var i="WidgetPreLoadProcess.fallbackLayerReset";if(this.layer){Cbola.bootstrapper.initializeServices({detail:t}),this.data=this.layer.data=t;try{return this.layer.type=this.layer.iframeBuster.layerType=e.get(t,"DefaultSettings.Layouts[0].LayoutType"),this.layer.itemType=e.get(t,"DefaultSettings.Layouts[0].ItemType"),void this.buildStructure()}catch(o){x.info("initialize InContent layer type error")}}else x.errorM(i,i+" failed to reset layer");this.manager.destroyInProcessWidget(this.widgetId)}},{key:"buildStructure",value:function(){var e="WidgetPreLoadProcess.buildStructure";this.withLocationSelector||m.setPageRequest(s.PAGE_VIEW,this.data.IsServerCall);try{_.createLayerContainers(this.layer),t.after(this.placeholder,this.layer.topContainer),this.layer.topContainer.style["z-index"]=t.getZIndexForElement(),this.fetchLayerScript()}catch(i){x.criticalM(e,"failed: initialize of IC was failed at "+e+". url: "+n.PageProperties.hostname,i)}}},{key:"fetchLayerScript",value:function(){var t=this;n.adsDisabled||this.adsProcessInit(),_.createAsync(this.layer.type,function(i){t.manager.onProcessSuccess(e.extend(i,t.layer))})}},{key:"adsProcessInit",value:function(){if(o.abTestId!==d.NO_ADS){g.addSovrnBeacon(this.data.DefaultSettings);var t=new Cbola.Common.AdTriggersManager({elementId:this.elementId,widgetId:this.widgetId,layerType:this.layer.type,footerBackground:e.get(this.data,"DefaultSettings.FooterFixedAdBackground")}),i=new Cbola.Common.Ads.Stores.Manager(this.elementId,this.widgetId,this.layer.type);g.registerLayerManager(t,i,this.elementId),p.getRoboto()}}}]),c}();return new N}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),cbolaStartDateFileUploaded=new Date;window.Cbola=window.Cbola||{},window.Cbola.Bootstrapper=window.Cbola.Bootstrapper||function(){var e=Cbola,t=e._,i=e.Utils,o=e.Config,n=e.Enums,r=e.EventBus,a=e.Env,s=void 0===a?{}:a,l=e.Common,d=l.AnalyticsService,c=l.TimelineService,h=l.LocalStorageService,m=l.UserService,p=e.InContent,u=p.Manager,b=p.Layers,f=b.Item,g=b.Services,y=g.FactsService,v=g.OnThisDayService,w=g.DiedThisDayService,_=g.DiedThisWeekService,C=g.TriviaService,I=g.TweetsService,x=Cbola.Logger.getInstance(),E=t.once(function(){d.setPageClose();try{t.result(window.top,"Cbola.Globals.ReportersManager.isPrimary",!1)&&(window.top.Cbola.Globals.ReportersManager.stopReporting(),delete window.top.Cbola.Globals.ReportersManager)}catch(e){}}),S=function(e){try{var t={};"undefined"!=typeof e&&(t.filename=e.filename||"",t.lineno=e.lineno||"",t.colno=e.colno||"",t.message=e.message||"",t.type=e.type||"",t.filename.toLowerCase().indexOf("carambo.la")>-1&&(x.info("ER of cbola was found"),d.setClientError(t)))}catch(i){}},T=function(e){var t=e.detail;x.info("Element fail: "+t.elementId+" \n",t);try{d.setPageElementRequest(t);var i=u.getLayerByElementId(t.elementId);i&&i.parentNode&&i.parentNode.removeChild(i)}catch(o){}},A=function(){var e=i.getUrlParams()["cboladebug"];e||(e=i.getParamsFromUrl(s.proxyElem.getAttribute("src"))["cbola_d"],e||(e=!1)),e=e&&"0"!==e?"1":h.getItem("cbolaDebug")||"0",s.DEBUG=1===parseInt(e),s.DEBUG&&(x.level=Cbola.Logger.Levels.TRACE)},L=function(){var e=i.getParamsFromUrl(s.proxyElem.getAttribute("src")),t=i.getUrlParams();s.queryServer=t["queryserver"]||e["queryserver"]||"0",s.activePid=t["cbolapid"]||e["pid"],s.wid=t["wid"]||e["wid"];var n=t["clientpath"]||e["clientpath"],r=o.clientPaths[n]||o.clientPaths["0"];r.alias&&(r=o.clientPaths[r.alias]);var a=r.withVersion?s.clientVersion:"";s.clientPath=""+r.path+a+"/",s.safeFramePath=""+(r.sfPath||r.path)+a+"/",s.clientPathType=r.isMin?".min":"",s.domainId=parseInt(e["did"])||0,s.adsDisabled=t["cbolanoads"]||!1,s.widgetLoadAlert=t["cbolaalert"]||!1,s.categoryId=e["categoryid"]||"",s.tags=e["tags"]||"",s.title=e["title"]||"",s.body=e["body"]||"",s.url=e["pageurl"]||"",s.hbToken=e["hb_token"]||void 0,s.proxyPageViewId=e["pvid"]||void 0,s.protocol=/^https?.*/g.test(window.location.protocol)?window.location.protocol:"https:",s.clientPath=""+s.protocol+s.clientPath,s.IntegrationType=i.integrationTypeCheck(),s.topWindow=i.isWindowTopSupported()?window.top:window,s.viewportWindow=i.isWindowTopSupported()||!i.isInIframe()?window.top:null,x.info("Working Path:"+s.clientPath+", QueryServer:"+s.queryServer+", ClientVer: "+s.clientVersion+", Pid: "+s.activePid)},O=function(){var e=s.proxyElem.getAttribute("mt"),t=s.proxyElem.getAttribute("mediatype"),i=s.proxyElem.getAttribute("cbola");return"ic"===e||"InContent"===t||"ic"===i?n.ProductTypes.IN_CONTENT:null},k=function(e){var i=e.getAttribute("srcurl");return t.isEmpty(i)?null:decodeURIComponent(i)},P=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;t.isEmpty(e)?t.isNil(s.PageProperties.cbola_pageViewId)&&(t.isNil(s.topWindow.cbola_pageViewId)&&(s.topWindow.cbola_pageViewId=i.generateDoubleRandomViewID()),s.PageProperties.cbola_pageViewId=s.topWindow.cbola_pageViewId):(s.PageProperties.cbola_pageViewId=e,!t.isNil(s.topWindow.cbola_pageViewId)&&s.topWindow.cbola_pageViewId!==e&&o&&x.alwaysSendM("Bootstrapper.setPageViewId","Bootstrapper.setPageViewId overridden existing page view id ("+s.topWindow.cbola_pageViewId+") with header bidding page view id ("+e+")"))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Cbola.PageAnalytics.ReportersManager.isPrimary()){var i=t.get(e,"DefaultSettings.ActivePageReporters",null);Cbola.PageAnalytics.ReportersManager.init(i?i+",pageLoad":"pageLoad",t.result(e,"widgetId",0))}},B=function(){
function e(){var a=this;_classCallCheck(this,e),this.init=c.record(function(){if(s.proxyElem=document.getElementById(o.proxyId),!s.proxyElem)return void x.info(Cbola.Logger.Colors.PALE_RED,"CbolaScriptIsMissing");if(s.proxyElem.getAttribute("status")&&0===document.querySelectorAll(".cbolaExtension").length)return void x.info(Cbola.Logger.Colors.PALE_RED,"CbolaScriptAgain");s.proxyElem.setAttribute("status","started"),s.clientVersion="2.24.5",s.proxyId=o.proxyId,s.userId=0,A(),L(),o.init(),P(s.proxyPageViewId),x.enableServer(),x.alwaysSendM("Bootstrapper.init","first log. pid: "+s.activePid+", did: "+s.domainId+", wid: "+(t.isEmpty(s.wid)?"0":s.wid)+" , abTestId: "+o.abTestId+", pageViewId: "+s.PageProperties.cbola_pageViewId+", randomLogId: "+Math.floor(899*Math.random()+100)+", ClientVersion: "+s.clientVersion);var e=s.PageProperties;if(e.startDateFileUploaded=cbolaStartDateFileUploaded,e.checkInContentLocation=i.checkUrlParamExist("icshow"),e.activeDomain=document.domain,e.originalPathNameHost=i.getLocationHref(),t.isArray(o.srcUrlEnabledDids)&&o.srcUrlEnabledDids.some(function(e){return e===s.domainId})&&(e.SrcUrl=i.getLocationHref()),e.hostname=i.queryStringCutRegex(),e.secondGlobal=i.setGlobalRedirectTime(),!t.isEmpty(s.url)&&!/^([[{])/g.test(s.url)){var r="";t.forEach({CategoryId:s.categoryId,Tags:s.tags,Title:s.title,Body:s.body},function(e,i){t.isEmpty(r)||(r+="&"),t.isEmpty(e)||(r+=i+"="+e)}),e.hostname=(""+decodeURIComponent(s.url)+(t.isEmpty(r)?"":"?"+r)).toLowerCase()}return e.isMobile=i.isMobile,e.isTablet=i.isTablet(),i.detectDeviceOrientation(),e.urlHashMD5=CryptoJSCbola.MD5(e.hostname).toString(),e.urlHashSHA1=CryptoJSCbola.SHA1(e.hostname).toString(),x.info("hostname: "+e.hostname),x.info("MD5 hash: "+e.urlHashMD5+" SHA1 hash: "+e.urlHashSHA1+" pid: "+s.activePid),o.abTestId===n.AbTests.NO_LAYER?void N():(u.init(a),a.bindEvents(),void a.checkForPendingScripts())},"Bootstrapper.init"),this.loadLayerFromScript=c.record(function(){if(0!==a.deferredLayerScriptTags.length&&O()===n.ProductTypes.IN_CONTENT)for(;a.deferredLayerScriptTags.length>0;){var e=a.deferredLayerScriptTags.shift(),o=parseInt(e.getAttribute("cbola_wid"));if(o||(o=0,e.setAttribute("cbola_wid","0")),a.isExistingWidgetId(o))d.setPageElementRequest({layer:{widgetId:o},loadStatus:n.LoadStatusTypes.SAME_ID_WIDGETS}),x.info(Cbola.Logger.Colors.PALE_RED,"There are scripts with the same wid: "+o);else{a.widgetIdArray.push(o),t.isEmpty(s.PageProperties.SrcUrl)&&(s.PageProperties.SrcUrl=k(e));var r=i.dataset("modelsPvid");r&&P(r),i.fixPixelHeight(e),u.createWidgetForPlaceholder(e,o)}}},"Bootstrapper.loadLayerFromScript"),this.initializeServices=c.record(function(e){var o=e.detail,n=f.Types;if(o){o.Language&&m.setLanguage(o.Language),o.Items&&t.get(o,"DefaultSettings.OTDIgnoreClientDate")&&v.setIgnoreClientDate(!0,o.Items[0]);var r=t.get(o,"DailyItemsCount");if(r&&(v.setTotalItemsForToday(r),w.setTotalItemsForToday(r),_.setTotalItemsForThisWeek(r)),o.Items){var a=o.widgetId;o.Items=t.map(o.Items,function(e){return new f(e)});for(var l=0;l<o.Items.length;l++){var d=o.Items[l];d.Type===n.FACT||d.Type===n.TIP?y.addItem(d,a):d.Type===n.ON_THIS_DAY?v.addItem(d,a):d.Type===n.DIED_THIS_DAY?(w.addItem(d,a),_.addItem(d)):d.Type===n.TRIVIA||d.Type===n.TRIVIA_MULTI||d.Type===n.TRIVIA_MULTI_PAIRS?C.addItem(d):d.Type===n.TWEET&&I.addItem(d,a)}}var c=i.getParamsFromUrl(s.PageProperties.originalPathNameHost.toLowerCase())["cbolagameset"];C.setFirstItemId(c)}},"Bootstrapper.initializeServices"),this.initPlatform=t.once(c.record(function(e){var i=Cbola.Styles;s.PageProperties.Domain=t.get(e,"Domain",0),s.PageProperties.Category=t.get(e,"Category",0),s.PageProperties.PageId=t.get(e,"PageId",0);var n=i.injectMainStyle(document,"cbolaStyle.css");if(n&&s.topWindow!==window)i.injectMainStyle(s.topWindow.document,"cbolaStyle.css");else if(!n){var a=document.createElement("link");a.rel="stylesheet",a.href=s.clientPath+"css/cbolaStyle.min.css";var l=document.querySelector("head");l&&l.appendChild(a)}e.DefaultSettings=e.DefaultSettings||{},o.MaxWidgets=e.DefaultSettings.MaxWidgets||9999,o.ZIndexLayer=e.DefaultSettings.ZIndexLayer||999999999,Cbola.Globals.AdsService.onlyOneRegistration=t.get(e,"DefaultSettings.AllowSingleAdServiceRegistration",!1),Cbola.Common.ConsentProviders.Manager.init({gfc:t.get(e,"DefaultSettings.EnableGFC",!1)}),N(e),r.fire(r.Events.PLATFORM_INITIALIZED)},"Bootstrapper.initPlatform")),Cbola.Env=s||{},t.defaults(Cbola.Env,{PageProperties:{optOutCookie:!1,IsServerCall:n.isServerCallTypes.FROM_CDN,PageStatus:0,unloadAlreadyDetected:!1,startTime:new Date,clientIP:""}}),this.deferredLayerScriptTags=[],this.widgetIdArray=[]}return _createClass(e,[{key:"bindEvents",value:function(){r.addEventListener(r.Events.PAGE_ELEMENTS_DATA_RECEIVED,this.initializeServices.bind(this)),r.addEventListener(r.Events.ELEMENT_FAILED,T),window.addEventListener("error",S),window.addEventListener("beforeunload",E),window.addEventListener("unload",E)}},{key:"checkForPendingScripts",value:function(){var e=this,r=t.filter(document.querySelectorAll("."+o.inContentClass),function(e){return"script"===e.tagName.toLowerCase()});return 0===r.length&&(r=document.querySelectorAll("."+o.placeholderClass),0===r.length)?(d.setPageRequest(n.PageRequestTypes.NO_PLACEHOLDER_FOUND,n.isServerCallTypes.FROM_CDN),void x.info(Cbola.Logger.Colors.PALE_RED,"No placeholder found in page - terminating load process")):(r=t.filter(r,function(e){return null===i.dataset(e,"queued")}),t.forEach(r,function(t){i.dataset(t,"queued",!0),e.deferredLayerScriptTags.push(t)}),this.deferredLayerScriptTags.length>0&&this.loadLayerFromScript(),void(i.getRunTimeInSecs()<o.checkPendingICscriptsTimeLength&&Cbola.taskManager.addTask(this.checkForPendingScripts,[],this,"checkForPendingScripts")))}},{key:"isExistingWidgetId",value:function(e){return this.widgetIdArray.some(function(t){return t===e})}}]),e}();return B}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.PrebidAdaptor=Cbola.Common.PrebidAdaptor||function(){var e=Cbola,t=e._,i=e.EventBus,o=i.Events,n=Cbola.Common,r=n.AnalyticsService,a=n.RequestHandler,s=n.UserService,l=Cbola.Logger.getInstance(),d=Cbola.Logger.Colors.ORANGE,c=Cbola.Enums.HeaderBiddingRequestStatus,h="PrebidAdaptor",m=2e3,p=window.Cbola_pbjs||null,u=0,b=function(){return u+=1},f=!1,g=[{promise:null,getReady:function(){if(!this.promise){var e=new Promise(function(e){i.addEventListener(o.GET_ADS_READY,t.once(function(i){var o=i.detail.data;e(t.get(o,"PbConfigType1"))}))});this.promise=Promise.all([s.isEUUserAsync(),e])}return this.promise}},{promise:null,getReady:function(){var e=this;return p?Promise.resolve():(this.promise||(this.promise=a.getJsBundle("external/prebid.min.js").then(function(){p=p||window.Cbola_pbjs},function(){return delete e.promise,Promise.reject()})),this.promise)}}];t.first(g).getReady();var y=t.once(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=t.last(e),o=t.first(e),n={};i&&(l.info(d,"Prebid config: setting user sync for bidders -> "+i),n.userSync={syncEnabled:!0,syncDelay:6e3,filterSettings:{iframe:{bidders:i.split(",").map(function(e){return e.trim()}),filter:"include"}}}),o&&(l.info(d,"Prebid config: setting consent management"),n.consentManagement={cmpApi:"iab",timeout:8e3}),t.isEmpty(n)?l.info(d,"Prebid config: none"):p.setConfig(n)}),v=function(e,i){var o="executeAuction";if(t.isEmpty(e))return Promise.reject(new Error("No bid instances provided"));var n=t.result(e,"[0].getTranslatedSizes",{width:0,height:0}),r=n.width,a=n.height;if(!r||!a)return Promise.reject(new Error("No valid size for auction"));var s=w(e),d=t.reduce(s,function(e,t,i){return e.push({code:i,mediaTypes:{banner:{sizes:[[r,a]]}},bids:t.map(function(e){return e.getBidRequest()})}),e},[]);return _(d,i).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[],n=[];return l.info("cbolaPbjs bid response: ",e),t.forEach(e,function(e,r){var a=t.get(e,"bids")||[];t.forEach(a,function(e){var a=e.bidder,d=t.remove(s[r],function(e){return e.getBidder()===a});if(0===d.length)return void l.alwaysSendM(h+"."+o,h+"."+o+" failed to match bid to ad object, bidder: "+a);d.length>1&&l.alwaysSendM(h+"."+o,h+"."+o+" multiple bidders for ad unit, bidder: "+a);var m=t.head(d);if(e.cpm&&e.cpm>0){var p=e.ad||(e.adUrl?'<IFRAME SRC="'+e.adUrl+'" width="'+e.width+'" height="'+e.height+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true"></IFRAME>':null);p&&(m.setCPM(e.cpm),m.setTag(p),m.setResponseTimestamp(e.responseTimestamp||Date.now()),m.setTimeToRespond(e.timeToRespond))}i.push(m),n.push({TagId:m.getID(),Cpm:m.getCPM(),Status:c.SUCCESS})})}),t.forEach(s,function(e){t.forEach(e,function(e){i.push(e),n.push({TagId:e.getID(),Cpm:0,Status:c.TIMEOUT})})}),C(n),Object.keys(s).forEach(function(e){return p.removeAdUnit(e)}),Promise.resolve(i)})},w=function(e){var i=t.groupBy(e,function(e){return e.getBidder()}),o=[],n={};return t.forEach(i,function(e){t.forEach(e,function(e,i){if("undefined"==typeof o[i]){var r="cbola_code_"+t.random(10,1e3)+"-"+b();o[i]=r,n[r]=[]}n[o[i]].push(e)})}),n},_=function(e,t){var i=new Promise(function(i){p.requestBids({bidsBackHandler:i,timeout:t,adUnits:e})}),o=new Promise(function(e){setTimeout(e,t+50)});return Promise.race([i,o])},C=function(e){e&&e.length>0&&(e.push({TagId:t.head(e).TagId,Status:c.REQUEST_MADE}),r.setHbBidRequestProto(e))},I=function(){};return I.prototype={auction:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return f?v(e,i):Promise.all(g.map(function(e){return e.getReady()})).then(function(o){return y(t.head(o)),f=!0,v(e,i)})}},new I}(),Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.Factory=Cbola.Common.Ads.Writers.Factory||function(){function e(e){return e=t(e),n.isNil(d[e])?(i(e)?(s.alwaysSend(c+".getAsync fetching bundle. Type:"+e),d[e]=a.getJsBundle("external/ad_writers_bundle.js").then(function(){return Promise.resolve(o(e))}).catch(function(){return Promise.reject(new Error(" "+c+" failed to fetch ad writers bundle."))})):d[e]=Promise.resolve(o(e)),d[e]):d[e]}function t(e){return n.isNil(l.TYPES_TO_NAMES_MAP[e])?(s.alwaysSendOnce(c+" adjusted deprecated writer type: "+e),r.defaultAdsExtractType):e}function i(e){var t=l.TYPES_TO_NAMES_MAP[e];return n.isNil(l[t])}function o(e){s.info(c+".getWriter. getting writer type: "+e);var t=l.TYPES_TO_NAMES_MAP[e];return n.isEmpty(t)?(s.errorM(c+".getWriter","No Writer prototype found for writer "+e),null):l[t]}var n=Cbola._,r=Cbola.Config,a=Cbola.Common.RequestHandler,s=Cbola.Logger.getInstance(),l=Cbola.Common.Ads.Writers,d={},c="WritersFactory";return{getAsync:e}}(),Cbola.Common.Ads.Writers.TYPES_TO_NAMES_MAP={0:"IframeWriter",5:"IframeSrcdocWriter",7:"IframeWriter",8:"ConfiantIframeWriter",9:"AdLightningIframeWriter",10:"SafeFrameWriter",11:"StandardSafeFrameWriter",12:"DevConWriter",13:"MConfiantIframeWriter"},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.IframeWriter=function(){var e=Cbola,t=e.Utils,i=e.Env,o=function(){this.name="iframe_write"};return o.prototype.write=function(e,o,n){var r=t.createAdIframe(n.getTranslatedSizes());e.appendChild(r);var a=r.contentDocument;a.open(),a.write("<head>"+("https:"!==i.topWindow.location.protocol||t.isIE?"":'<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">')+"</head><body>"+o+"</body>"),a.close()},new o}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.ConfiantIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Env,i=Cbola.Logger.getInstance(),o=Cbola.Common.AnalyticsService,n=Cbola.Enums.BlockedAdTriggerTypes,r=Cbola.Enums.AdTriggerTypes,a="clarium.global.ssl.fastly.net",s="kj7Ux6NuzZRX9RuZUDxzW2kAL60",l=function(e,t,i,o,n){function r(e){return(m(e)||"")[y]("/","_")[y]("+","-")}function a(t,i,o){var n=C+p(t)+"&d="+i,r="err__"+1*new Date;c[r]=o;var a="<"+f+" on"+v+'="void('+r+'())" '+g+'="'+n+'" type="text/java'+f+'" ></'+f+">";e[_](a)}function s(){var i=r(o+"/"+I.k.hb_bidder[0]+":"+I.k.hb_size[0]),s={wh:i,wd:h.parse(h[w](I)),wr:0};a(i,r(h[w](s)),function(){e[_](t.ad)});var l={prebid:{adId:t.adId,cpm:t.cpm}},d={d:s,t:t.ad,cb:n,id:l};c[o]={},c[o][i]=d}var l=t.bidder,d=t.size,c=e.parentWindow||e.defaultView,h=c.JSON,m=c.btoa,p=c.encodeURIComponent;if(!h||!m)return!1;var u="t",b="i",f="script",g="src",y="replace",v="error",w="stringify",_="wr"+b+u+"e",C="https://"+i+"/?wrapper="+p(o)+"&tpid=",I={k:{hb_bidder:[l],hb_size:[d]}};return s(),e.close(),!0},d=function(){this.name="confiant_write"};return d.prototype.write=function(d,c,h){var m=h.getTranslatedSizes(),p=e.createAdIframe(m);d.appendChild(p);var u=p.contentDocument;u.open(),"https:"!==t.topWindow.location.protocol||e.isIE||u.write('<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"></head>');var b=h.getID(),f={ad:c,bidder:b,size:m.width+"x"+m.height,cpm:0,adId:b},g=function(){var t=e.dataset(d,"elementId");o.setBlockedAdRequest(t,b,n.CONFIANT_BLOCK),i.info("Confiant found malware ad for tag id: "+b);var a=Cbola.Globals.AdsService.getTriggersManagerByElementId(t);if(a){var s=e.dataset(d,"apperance"),l=e.dataset(d,"spot"),c=e.dataset(d,"bannerId");a.malwareRefresh(s,l,c,r.REFRESH_CONFIANT_BLOCK)}};l(u,f,a,s,g)||(u.write(c),u.close())},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.MConfiantIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Env,i=Cbola.Logger.getInstance(),o=Cbola.Common.AnalyticsService,n=Cbola.Enums.BlockedAdTriggerTypes,r=Cbola.Enums.AdTriggerTypes,a="clarium.global.ssl.fastly.net",s="Oc5G-Hspq4A8LRAWqm97FUqme_U",l=function(e,t,i,o,n){function r(e){return(m(e)||"")[y]("/","_")[y]("+","-")}function a(t,i,o){var n=C+p(t)+"&d="+i,r="err__"+1*new Date;c[r]=o;var a="<"+f+" on"+v+'="void('+r+'())" '+g+'="'+n+'" type="text/java'+f+'" ></'+f+">";e[_](a)}function s(){var i=r(o+"/"+I.k.hb_bidder[0]+":"+I.k.hb_size[0]),s={wh:i,wd:h.parse(h[w](I)),wr:0};a(i,r(h[w](s)),function(){e[_](t.ad)});var l={prebid:{adId:t.adId,cpm:t.cpm}},d={d:s,t:t.ad,cb:n,id:l};c[o]={},c[o][i]=d}var l=t.bidder,d=t.size,c=e.parentWindow||e.defaultView,h=c.JSON,m=c.btoa,p=c.encodeURIComponent;if(!h||!m)return!1;var u="t",b="i",f="script",g="src",y="replace",v="error",w="stringify",_="wr"+b+u+"e",C="https://"+i+"/?wrapper="+p(o)+"&tpid=",I={k:{hb_bidder:[l],hb_size:[d]}};return s(),e.close(),!0},d=function(){this.name="m_confiant_write"};return d.prototype.write=function(d,c,h){var m=h.getTranslatedSizes(),p=e.createAdIframe(m);d.appendChild(p);var u=p.contentDocument;u.open(),"https:"!==t.topWindow.location.protocol||e.isIE||u.write('<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"></head>');var b=h.getID(),f={ad:c,bidder:b,size:m.width+"x"+m.height,cpm:0,adId:b},g=function(){var t=e.dataset(d,"elementId");o.setBlockedAdRequest(t,b,n.CONFIANT_BLOCK),i.info("Confiant found malware ad for tag id: "+b);var a=Cbola.Globals.AdsService.getTriggersManagerByElementId(t);if(a){var s=e.dataset(d,"apperance"),l=e.dataset(d,"spot"),c=e.dataset(d,"bannerId");a.malwareRefresh(s,l,c,r.REFRESH_CONFIANT_BLOCK)}};l(u,f,a,s,g)||(u.write(c),u.close())},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.AdLightningIframeWriter=function(){var e=Cbola.Utils,t=Cbola.Templates,i=Cbola._,o="carambola_ADL_",n=o.length,r=Cbola.Logger.getInstance(),a=Cbola.Common.AnalyticsService,s=Cbola.Enums.BlockedAdTriggerTypes,l=Cbola.Enums.AdTriggerTypes,d="AdLightningIframeWriter",c=!1,h=function(){c||(c=!0,window.addEventListener("message",m))},m=function(e){var t="blockedAdMessageHandler";if(e.origin===window.location.origin&&"string"==typeof e.data&&e.data.startsWith(o)){var i={};try{i=JSON.parse(e.data.substr(n))}catch(c){return void r.errorM(d+"."+t,d+"."+t+" failed on message parsing - "+e.data+".",c)}var h=i,m=h.elemId,p=h.apperance,u=h.spot,b=h.bannerId,f=h.adId;a.setBlockedAdRequest(m,f,s.AD_LIGHTNING_BLOCK),r.info("Ad Lightning found malware ad for tag id: "+f);var g=Cbola.Globals.AdsService.getTriggersManagerByElementId(m);g&&g.malwareRefresh(p,u,b,l.REFRESH_AD_LIGHTNING_BLOCK)}},p=function(){this.name="ad_lightning_write"};return p.prototype.write=function(n,r,a){h();var s=a.getTranslatedSizes(),l=a.getID(),d={message:""+o+JSON.stringify({elemId:e.dataset(n,"elementId"),apperance:e.dataset(n,"apperance"),spot:e.dataset(n,"spot"),bannerId:e.dataset(n,"bannerId"),adId:l}),tag:r,adId:l};i.extend(d,s);var c=e.createAdIframe(s);n.appendChild(c);var m=t.getCompiledTemplate("ad_lightning_iframe.html"),p=c.contentDocument;p.open(),p.write(m(d)),p.close()},new p}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.DevConWriter=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Templates,n=function(){function e(){_classCallCheck(this,e),this.name="devcon_write"}return _createClass(e,[{key:"write",value:function(e,n,r){var a=r.getTranslatedSizes(),s={tag:n,adId:r.getID(),tagType:r.isHeaderBidding()?"HB":"WF",providerId:r.getProviderID()};t.extend(s,a);var l=i.createAdIframe(a);e.appendChild(l);var d=o.getCompiledTemplate("devcon_iframe.html"),c=l.contentDocument;c.open(),c.write(d(s)),c.close()}}]),e}();return new n}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Writers=Cbola.Common.Ads.Writers||{},Cbola.Common.Ads.Writers.StandardSafeFrameWriter=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Env,n=e.Common.RequestHandler,r=0,a=0,s=function(){return"cbola-sf-"+r++},l=function(){return"cbolaSafeFramePosition"+a++},d=function(){function e(){_classCallCheck(this,e),this.createConfig=t.once(function(){this.config={renderFile:o.safeFramePath+"sf/stdsf"+o.clientPathType+".html",auto:!1}}),this.name="std_sf_writer";var i=window.$sf;this.host=i?i.host:null,this.loadSFresoucesPromise=this.host?Promise.resolve():null}return _createClass(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,i=Array(t),o=0;t>o;o++)i[o]=arguments[o];this.createConfig(),this.loadSFResources().then(function(){e.renderAd.apply(e,i)})}},{key:"loadSFResources",value:function(){var e=this;return this.host?this.loadSFresoucesPromise=Promise.resolve():this.loadSFresoucesPromise||(this.loadSFresoucesPromise=n.getJsBundle("sf/base"+o.clientPathType+".js").then(function(){return n.getJsBundle("sf/host"+o.clientPathType+".js")}).then(function(){return e.host=window.$sf.host})),this.loadSFresoucesPromise}},{key:"renderAd",value:function(e,t,o){var n=o.getTranslatedSizes(),r=i.createAdIframe(n);e.appendChild(r);var a=l(),d=o.getTranslatedSizes(),c=d.width,h=d.height,m={id:a,w:c,h:h},p=s();r.id=p,new this.host.PosConfig(m,p,this.config);var u=new this.host.Position(a,t);this.host.render(u)}}]),e}();return new d}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.Base=Cbola.Common.Ads.Tags.Base||function(){var e,t,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola._,r="BaseTag",a=135;return t=e=function(){function e(t){_classCallCheck(this,e),n.extend(this,t),this.sizeName=e.getAdSizeName(t),this.usedCounter=0,this.unAvailabilityParams={timeoutDelay:!1}}return _createClass(e,null,[{key:"getAdSizeName",value:function(t){var o=t.AdWidth+"_"+t.AdHeight;return e.AD_SIZES["W"+t.AdWidth+"H"+t.AdHeight]||i.warnOnceM(r+".getAdsSizeName",r+".getAdsSizeName encountered unfamiliar ad size: "+o),o}}]),_createClass(e,[{key:"onSelection",value:function(){return this.updateUsedCounter(),this.ProviderId===a&&this.delayAvailabilityBySec(),this}},{key:"delayAvailabilityBySec",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;i.info(o,"Base ad tag ("+this.sizeName+", "+this.Id+"): disabling availability for 60 sec"),this.unAvailabilityParams.timeoutDelay=!0,setTimeout(function(){i.info(o,"Base ad tag ("+e.sizeName+", "+e.Id+"): re-enabling timeout delay availability"),e.unAvailabilityParams.timeoutDelay=!1},1e3*t)}},{key:"updateUsedCounter",value:function(){this.usedCounter+=1}},{key:"getSizeName",value:function(){return this.sizeName}},{key:"getPriority",value:function(){return n.result(this,"Priority")||0}},{key:"getWeight",value:function(){return n.result(this,"Weight")||1}},{key:"getTypeName",value:function(){return this.isVideo()?e.AD_TYPES.VIDEO.name:e.AD_TYPES.DISPLAY.name}},{key:"getID",value:function(){return this.Id||0}},{key:"getMaxCap",value:function(){return this.MaxCap||0}},{key:"getProviderID",value:function(){return this.ProviderId}},{key:"getTag",value:function(){return this.Tag}},{key:"getTranslatedSizes",value:function(){return e.translateSize(this.AdWidth,this.AdHeight)}},{key:"getTagExtractionType",value:function(){return this.TagExtractionType||Cbola.Config.defaultAdsExtractType}},{key:"isPremium",value:function(){return this.Mode===e.AD_MODES.PREMIUM}},{key:"isVideo",value:function(){return this.AdType===e.AD_TYPES.VIDEO.num}},{key:"isDisplay",value:function(){return this.AdType===e.AD_TYPES.DISPLAY.num}},{key:"isMaxCaped",value:function(){return this.MaxCap>0&&this.MaxCap<=this.usedCounter}},{key:"isAvailable",value:function(){return!this.isMaxCaped()&&!n.some(this.unAvailabilityParams)}},{key:"isHeaderBidding",value:function(){return this.IsHb}},{key:"shouldShowX",value:function(){return this.ShowX}}]),e}(),e.translateSize=n.memoize(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{width:e,height:parseInt(10*Math.floor(t/10))}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+"_"+t}),e.AD_TYPES={DISPLAY:{name:"DisplayAdTag",num:0},VIDEO:{name:"VideoAdTag",num:1}},e.AD_SIZES={W300H250:"300_250",W300H251:"300_251",W300H252:"300_252",W300H600:"300_600",W728H90:"728_90",W320H50:"320_50",W728H91:"728_91",W728H92:"728_92",W310H260:"310_260",W400H300:"400_300",W500H300:"500_300",W630H90:"630_90",W10hH0:"10_10"},e.AD_MODES={REGULAR:1,PREMIUM:3,CPI:9},t}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.Base=Cbola.Common.Ads.Stores.Base||function(){var e=Cbola._,t=function(){function t(e){_classCallCheck(this,t),this.elemId=e.elemId,this.wid=e.wid,this.inventory={},this.store={}}return _createClass(t,[{key:"addToInventory",value:function(t){var i=t.getSizeName();e.isNil(this.inventory[i])&&(this.inventory[i]=[]),this.inventory[i].push(t)}},{key:"init",value:function(){return this}}]),t}();return t}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Tags.Waterfall=Cbola.Common.Ads.Tags.Waterfall||function(){var e=Cbola.Common.Ads.Tags.Base,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE;return function(e){function o(e){_classCallCheck(this,o);var t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.inQueue=!1,t.psaCounter=0,t.unAvailabilityParams.maxPSA=!1,t}return _inherits(o,e),_createClass(o,[{key:"setInQueue",value:function(e){this.inQueue=e}},{key:"isInQueue",value:function(){return this.inQueue}},{key:"incrementPSACount",value:function(){this.psaCounter+=1,this.isMaxedPSA()&&(t.info(i,"WF Tag("+this.getID()+"): reached max PSA cap ("+this.PsaTagCap+") - removing from inventory."),this.unAvailabilityParams.maxPSA=!0)}},{key:"isMaxedPSA",value:function(){return this.PsaTagCap&&this.PsaTagCap===this.psaCounter}}]),o}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.WaterfallQueue=Cbola.Common.Ads.WaterfallQueue||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola.Common.Ads.Tags.Base.AD_TYPES,r=function(){function r(t){var i=this;_classCallCheck(this,r),this.sizeName=t,this.queues={},e.forEach(n,function(e){return i.queues[e.name]=[]})}return _createClass(r,[{key:"isEmpty",value:function(t){var i=e.result(this,"queues."+t);return e.isNil(i)||e.isEmpty(i)||!i.some(function(e){return e.isAvailable()})}},{key:"pushAdsByTypeName",value:function(n,r){e.forEach(n,function(e){return e.setInQueue(!0)}),t.push.apply(this.queues[r],n),i.info(o,"Waterfall ads queue ("+this.sizeName+" -> "+r+") pushed new ads.",this.queues[r])}},{key:"pullAdByTypeName",value:function(e){for(var t=this.queues[e],i=0;i<t.length;i++){var o=t[i];if(o.isAvailable())return o.setInQueue(!1),t.splice(i,1),o}return null}}]),r}();return r}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.WaterfallTags=Cbola.Common.Ads.Stores.WaterfallTags||function(){var e=Cbola._,t=Cbola.Common.Ads.Stores.Base,i=Cbola.Common.Ads.Tags.Base,o=Cbola.Common.Ads.WaterfallQueue,n=Cbola.Logger.getInstance(),r=Cbola.Logger.Colors.ORANGE,a=function(t){function a(e){_classCallCheck(this,a);var t=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.psaCounter={},t.placementPSACap={},t.manager=e,t}return _inherits(a,t),_createClass(a,null,[{key:"shuffleAds",value:function(t){var i=0;return e.chain(t).sortBy("priority").reverse().reduce(function(e,t){var o=t.weights,n=t.ads,r=t.currentMaxWeight,a=t.priority;for(o=o.slice(0),n=n.slice(0);o.length>0&&a>=i;){for(var s=void 0,l=Math.ceil(Math.random()*r),d=-1,c=0,h=0;h<o.length;h++)o[h]>=l&&(-1===d?(d=h,s=n[h],c=s.getWeight()):o[h]-=c);o.splice(d,1),n.splice(d,1),r-=c,s&&!s.isInQueue()&&(s.getMaxCap()>0&&a>i&&s.isAvailable()&&(i=a),e.push(s))}return e},[]).value()}},{key:"getPathFromAd",value:function(e){return e.getSizeName()+"."+e.getTypeName()+"."+e.getPriority()}}]),_createClass(a,[{key:"addToInventory",value:function(t){var i=a.getPathFromAd(t),o={ads:[],weights:[],currentMaxWeight:0,priority:t.getPriority()},n=e.get(this.inventory,i,o);n.ads.push(t),n.currentMaxWeight+=t.getWeight(),n.weights.push(n.currentMaxWeight),e.setWith(this.inventory,i,n,Object)}},{key:"removeAdFromInventory",value:function(t){var i=a.getPathFromAd(t),o=e.get(this.inventory,i);if(!e.isNil(o)){for(var n=-1,r=t.getWeight(),s=t.getID(),l=0;l<o.ads.length;l++)-1===n?o.ads[l].getID()===s&&(n=l):o.weights[l]-=r;if(-1!==n&&(o.currentMaxWeight-=r,o.ads.splice(n,1),o.weights.splice(n,1)),e.isEmpty(o.ads)){var d=e.toPath(i);do e.unset(this.inventory,d),d.pop();while(d.length>0&&e.isEmpty(e.get(this.inventory,d)));0===d.length&&this.manager.resetHBSettingsTiersThresholdForSize(t.getSizeName())}}}},{key:"init",value:function(t){var n=this,r=e.result(t,"AdsForSize",{});e.forEach(r,function(t){var r=i.getAdSizeName(t),s=n.inventory[r];s&&(n.placementPSACap[r]=n.placementPSACap[r]||e.get(t,"PsaPlacementCap")||0,n.store[r]=n.store[r]||new o(r),n.psaCounter[r]=0,e.forEach(s,function(e,t){n.store[r].pushAdsByTypeName(a.shuffleAds(e),t)}))})}},{key:"getAd",value:function(t,i){var o=t.getPlaceholderSizeName(),s=this.store[o];if(!s)return null;if(s.isEmpty(i)){n.info(r,"WF store("+o+" -> "+i+"): is empty reshuffling ads.");var l=e.get(this.inventory,o+"."+i);l&&s.pushAdsByTypeName(a.shuffleAds(l),i)}var d=s.pullAdByTypeName(i);return e.isNil(d)?n.info(r,"WF store("+o+" -> "+i+"): failed getting waterfall ad."):(n.info(r,"WF store("+o+" -> "+i+"): selected waterfall ad: ",d),this.onSuccessfulAdSelection(d)),d}},{key:"onSuccessfulAdSelection",value:function(e){var t=e.getSizeName();e.onSelection(),e.isMaxCaped()&&(n.info(r,"WF store("+t+"): ad id "+e.getID()+" max caped - removing from inventory"),this.removeAdFromInventory(e))}},{key:"incrementPSACounter",value:function(e){this.psaCounter[e]+=1}},{key:"isMaxPlacementPSA",value:function(e){return this.placementPSACap[e]>0&&this.psaCounter[e]>=this.placementPSACap[e]}},{key:"removeAdsForSize",value:function(e){n.info(r,"WF store("+e+"): removing all ads"),delete this.inventory[e],delete this.store[e]}}]),a}(t);return a}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.HeaderBiddingRequest=Cbola.Common.Ads.Tags.HeaderBiddingRequest||function(){var e=Cbola._;return function(){function t(i){_classCallCheck(this,t),this.request=e.clone(i.getTag()),this.id=i.getID(),this.hbFactor=i.HbFactor||1,this.manager=i,this.cpm=0,this.factoredCPM=0,this.translatedSizes=i.getTranslatedSizes()}return _createClass(t,[{key:"setCPM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.cpm=e,this.factoredCPM=this.cpm*this.hbFactor}},{key:"setTag",value:function(e){this.Tag=e}},{key:"setResponseTimestamp",value:function(e){this.responseTimestamp=e}},{key:"setTimeToRespond",value:function(e){this.timeToRespond=e}},{key:"getBidRequest",value:function(){return this.request}},{key:"getBidder",value:function(){return e.get(this.request,"bidder","")}},{key:"getID",value:function(){return this.id}},{
key:"getCPM",value:function(){return this.cpm}},{key:"getFactoredCPM",value:function(){return this.factoredCPM}},{key:"getTag",value:function(){return this.Tag}},{key:"getTypeName",value:function(){return this.manager.getTypeName()}},{key:"shouldShowX",value:function(){return this.manager.shouldShowX()}},{key:"getResponseTimestamp",value:function(){return this.responseTimestamp||null}},{key:"getTimeToRespond",value:function(){return this.timeToRespond||null}},{key:"getTranslatedSizes",value:function(){return this.translatedSizes}},{key:"getTagExtractionType",value:function(){return this.manager.getTagExtractionType()}}]),t}()}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;return void 0===a?void 0:a.call(o)};window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.HeaderBidding=Cbola.Common.Ads.Tags.HeaderBidding||function(){var e=Cbola.Common.Ads.Tags.Base,t="HeaderBiddingAdTag",i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=Cbola._,r={REGULAR:1,PENDING:2,SAMPLING:3},a={PRE_AUCTION:"preAuction",POST_AUCTION:"postAuction"},s={type:r.REGULAR,consecutiveInvalidBidsCount:0,skippedAuctionsCount:0},l=function(e,t){var i=e;return i.type!==r.PENDING||n.isEmpty(t)||(i=c(e),i.skippedAuctionsCount>=t.BidsToWait?(i.type=t.BidsToSample>0?r.SAMPLING:r.REGULAR,i.skippedAuctionsCount=0,i.consecutiveInvalidBidsCount=0):i.skippedAuctionsCount+=1),i},d=function(e,t,i){var o=e,a=e.type;if(a!==r.PENDING&&!n.isEmpty(t))if(i>0&&(e.type!==r.REGULAR||e.consecutiveInvalidBidsCount>0))o=c(s);else{o=c(e);var l=a===r.REGULAR?"BidsWithoutCPM":"BidsToSample";e.consecutiveInvalidBidsCount+1>=t[l]?(o.type=r.PENDING,o.skippedAuctionsCount=0,o.consecutiveInvalidBidsCount=0):o.consecutiveInvalidBidsCount+=1}return o},c=function(e){return{type:e.type,consecutiveInvalidBidsCount:e.consecutiveInvalidBidsCount,skippedAuctionsCount:e.skippedAuctionsCount}};return function(e){function c(e){_classCallCheck(this,c);var r="ctor",a=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));try{a.Tag=JSON.parse(a.Tag);var l=n.get(a,"Tag.bidder");l||i.errorM(t+"."+r,t+"."+r+" found ad tag without bidder name, Id: "+a.Id),a.unAvailabilityParams.bidParseFail=!l}catch(d){i.errorM(t+"."+r,t+"."+r+" failed to convert ad tag "+a.Id+" to json format"),a.unAvailabilityParams.bidParseFail=!0}return a.throttlingState=s,n.isNil(a.ThrottlingRules)||(n.some(a.ThrottlingRules,n.isNil)?(a.ThrottlingRules=null,i.info(o,"HB Tag Manager ("+a.sizeName+" , "+a.Id+"): failed initializing throttling rules")):i.info(o,"HB Tag Manager ("+a.sizeName+" , "+a.Id+"): throttling rules: ",a.ThrottlingRules)),a}return _inherits(c,e),_createClass(c,[{key:"getBidInstance",value:function(){return new Cbola.Common.Ads.Tags.HeaderBiddingRequest(this)}},{key:"onAuctionResponse",value:function(e){return this.throttlingStateReducer({name:a.POST_AUCTION,cpm:e}),this}},{key:"onPreAuction",value:function(){return this.throttlingStateReducer({name:a.PRE_AUCTION}),this}},{key:"isAvailable",value:function(){return this.throttlingState.type!==r.PENDING&&_get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"isAvailable",this).call(this)}},{key:"throttlingStateReducer",value:function(e){switch(e.name){case a.PRE_AUCTION:this.throttlingState=l(this.throttlingState,this.ThrottlingRules);break;case a.POST_AUCTION:this.throttlingState=d(this.throttlingState,this.ThrottlingRules,e.cpm)}}}]),c}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.HeaderBiddingSettings=Cbola.Common.Ads.HeaderBiddingSettings||function(){var e=Cbola._,t=0,i=.5,o=2e3,n=function(){function n(r,a){_classCallCheck(this,n);var s=e.get(r,"UsePt");this.usePocket=e.isNil(s)||s;var l=e.get(r,"UseSW");this.useSandwich=this.usePocket&&(e.isNil(l)||l),this.pocketUsageThreshold=Math.max(Math.min(e.get(r,"PtThreshold")||i,1),0),this.hbTimeout=e.get(r,"Timeout")||o,this.hbMaxTimeInPocket=e.get(r,"PtTimeout"),this.hbTiersThreshold=Math.max(e.get(r,"TiersThreshold")||e.get(a,"HbThreshold")||t,0)}return _createClass(n,[{key:"isHbPocketSupported",value:function(){return this.usePocket}},{key:"isHbLowTierSupported",value:function(){return this.useSandwich}},{key:"getHBPocketUsageThreshold",value:function(){return this.pocketUsageThreshold}},{key:"getHbTimeout",value:function(){return this.hbTimeout}},{key:"getHbMaxTimeInPocket",value:function(){return this.hbMaxTimeInPocket}},{key:"getHbTiersThreshold",value:function(){return this.hbTiersThreshold}},{key:"resetTiersThreshold",value:function(){this.hbTiersThreshold=0}}]),n}();return n}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.HeaderBiddingPocket=Cbola.Common.Ads.HeaderBiddingPocket||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.Logger.getInstance(),o=Cbola.Logger.Colors.ORANGE,n=function(){function n(e,t){_classCallCheck(this,n),this.hbSettings=e,this.sizeName=t,this.highTier=[],this.hbSettings.isHbLowTierSupported()&&(this.lowTier=[]),this.batchesCounter=0}return _createClass(n,null,[{key:"mergeSortedBidsToPocket",value:function(e,i){for(var o=0,n=0,r=e.length,a=i.length;r>o&&a>n;){for(;e[o].getFactoredCPM()>i[n].getFactoredCPM();)o+=1;e.splice(o,0,i[n]),n+=1,o+=1}a>n&&t.push.apply(e,i.slice(n))}},{key:"removeFromPocketByDelay",value:function(t,i,o,n){n&&(e.forEach(i,function(e){return e.batchID=o}),setTimeout(function(){return e.remove(t,function(e){return e.batchID===o})},n))}}]),_createClass(n,[{key:"pushAds",value:function(t){var r=this.hbSettings.getHbTiersThreshold(),a=e.remove(t,function(e){return e.getFactoredCPM()>r}),s=this.hbSettings.getHbMaxTimeInPocket(),l=this.getBatchID();if(!e.isEmpty(a)){var d=e.result(a,"[0].getCPM",null),c=e.result(this.highTier,"[0].getCPM",null);e.forEach(a,function(e){e.pocketUsageType=n.PocketUsageTypes.FROM_AUCTION,e.pocketCPM=c}),e.forEach(this.highTier,function(e){e.pocketUsageType=n.PocketUsageTypes.FROM_HIGH_TIER,e.pocketCPM=null,e.auctionCPM=d}),n.mergeSortedBidsToPocket(this.highTier,a),this.updateHighTierBidsThreshold(),n.removeFromPocketByDelay(this.highTier,a,l,s),i.info(o,"HB Pocket ("+this.sizeName+"): added bids to high tier pocket: ",this.highTier)}this.hbSettings.isHbLowTierSupported()&&!e.isEmpty(t)&&(e.forEach(t,function(e){return e.pocketUsageType=n.PocketUsageTypes.FROM_LOW_TIER}),n.mergeSortedBidsToPocket(this.lowTier,t),n.removeFromPocketByDelay(this.lowTier,t,l,s),i.info(o,"HB Pocket ("+this.sizeName+"): added bids to low tier pocket: ",this.lowTier))}},{key:"updateHighTierBidsThreshold",value:function(){var t=this.hbSettings.getHBPocketUsageThreshold();e.forEach(this.highTier,function(e,i,o){return e.hasAllowedThreshold=0===i||(o[i-1].getFactoredCPM()-e.getFactoredCPM())/(o[i-1].getFactoredCPM()||1)<t})}},{key:"getBatchID",value:function(){return this.batchesCounter+=1,this.batchesCounter}},{key:"getHighTierAd",value:function(){return e.get(this.highTier,"[0].hasAllowedThreshold")?this.highTier.shift():null}},{key:"getLowTierAd",value:function(){return this.hbSettings.isHbLowTierSupported()?this.lowTier.shift():null}},{key:"mergeLowTierToHighTier",value:function(){e.isEmpty(this.lowTier)||(t.push.apply(this.highTier,this.lowTier),this.lowTier=[],this.updateHighTierBidsThreshold())}},{key:"extendAdWithTiersSizes",value:function(t){e.extend(t,{pocketSizeHT:this.highTier.length,pocketSizeLT:this.hbSettings.isHbLowTierSupported()?this.lowTier.length:null})}}]),n}();return n.PocketUsageTypes={FROM_AUCTION:1,FROM_HIGH_TIER:2,FROM_LOW_TIER:3},n}();var _get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;return void 0===a?void 0:a.call(o)},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.HeaderBiddingTags=Cbola.Common.Ads.Stores.HeaderBiddingTags||function(){var e=Cbola,t=e._,i=(e.Config,e.Common),o=i.PrebidAdaptor,n=i.Ads,r=n.HeaderBiddingPocket,a=n.HeaderBiddingSettings,s=n.Tags.Base,l=n.Stores.Base,d=Cbola.Logger.getInstance(),c=Cbola.Logger.Colors.ORANGE,h=function(e){function i(e){_classCallCheck(this,i);var t=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.activeAuctions={},t.premiumPlusInventory={},t.tagIdPerSize={},t.HbSettings={},t}return _inherits(i,e),_createClass(i,null,[{key:"onAuctionResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.forEach(e,function(e){return e.manager.onAuctionResponse(e.cpm)}),e.filter(function(e){return e.getFactoredCPM()>i}).sort(function(e,t){return t.getFactoredCPM()-e.getFactoredCPM()})}}]),_createClass(i,[{key:"addToInventory",value:function(e){if(e.isAvailable()){var o=e.getSizeName();if(t.isNil(this.tagIdPerSize[o])&&(this.tagIdPerSize[o]=e.getID()),e.isPremium()){for(var n=e.getProviderID(),r=t.get(this.premiumPlusInventory,"["+o+"]["+n+"]",[]),a=0,s=e.getPriority();a<r.length&&r[a].getPriority()>s;a++);r.splice(a,0,e),t.setWith(this.premiumPlusInventory,"["+o+"]["+n+"]",r,Object)}else _get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addToInventory",this).call(this,e)}}},{key:"removeAdFromInventory",value:function(e){var i=e.getSizeName(),o=e.getID();t.remove(this.inventory[i],function(e){return e.getID()===o})}},{key:"init",value:function(e){var i=this;t.forEach(e.AdsForSize,function(o){var n=s.getAdSizeName(o);t.isEmpty(i.inventory[n])&&t.isEmpty(i.premiumPlusInventory[n])||(t.isEmpty(i.HbSettings[n])&&(i.HbSettings[n]=new a(t.get(o,"HbSettings")||{},e),d.info(c,"HB store ("+n+"): created HB pocket and settings object: ",i.HbSettings[n])),i.HbSettings[n].isHbPocketSupported()&&t.isEmpty(i.store[n])&&(i.store[n]=new r(i.HbSettings[n],n)))})}},{key:"getAd",value:function(e){var n=this,a=e.getPlaceholderSizeName();if(t.isEmpty(this.inventory[a])&&t.isEmpty(this.premiumPlusInventory[a]))return d.info(c,"HB store ("+a+"): No HB ads"),Promise.reject("No HB ads");if(this.HbSettings[a].isHbPocketSupported()){var s=this.store[a].getHighTierAd();return s?(this.store[a].extendAdWithTiersSizes(s),d.info(c,"HB store ("+a+"): selected ad from high tier pocket: ",s),Promise.resolve(s)):this.createAuctionToPocketPromise(a).then(function(){var e=n.store[a].getHighTierAd();return e?(n.store[a].extendAdWithTiersSizes(e),d.info(c,"HB store ("+a+"): selected ad from high tier pocket after auction: ",e),Promise.resolve(e)):(d.info(c,"HB store ("+a+"): failed selecting ad from high tier pocket."),Promise.reject(new Error("Failed to find high tier ad")))})}var l=this.HbSettings[a].getHbTimeout(),h=this.getBidsForAuction(a);return t.isEmpty(h)?(d.info(c,"HB store ("+a+"): No pocket support and no bids for auction, terminating HB process"),Promise.reject(new Error("No available bids for size: "+a))):(d.info(c,"HB store ("+a+"): No pocket support auctioning (TO: "+l+") for highest bid: ",h),o.auction(h,l).then(function(e){var o=i.onAuctionResponse(e,n.HbSettings[a].getHbTiersThreshold()).shift();return o?(t.extend(o,{pocketUsageType:r.PocketUsageTypes.FROM_AUCTION,pocketSizeHT:null,PocketSizeLT:null}),d.info(c,"HB store ("+a+"): No pocket support, Selected highest bid : ",o),Promise.resolve(o)):(d.info(c,"HB store ("+a+"): No pocket support, failed selecting highest bid"),Promise.reject(new Error("Failed to get ad")))}))}},{key:"createAuctionToPocketPromise",value:function(e){var n=this;if(!this.activeAuctions[e]){var r=this.HbSettings[e].getHbTimeout(),a=this.getBidsForAuction(e);if(t.isEmpty(a))return d.info(c,"HB store ("+e+"): failed getting bids for auction, terminating hb ad selection"),Promise.reject(new Error("No available bids for size: "+e));d.info(c,"HB store ("+e+"): Performing auction (TO: "+r+") on the following bids: ",a),this.activeAuctions[e]=o.auction(a,r).then(function(t){return t=i.onAuctionResponse(t),n.store[e].pushAds(t),delete n.activeAuctions[e],Promise.resolve()},function(t){return delete n.activeAuctions[e],Promise.reject(t)})}return d.info(c,"HB store ("+e+"): Pending auction response"),this.activeAuctions[e]}},{key:"getBidsForAuction",value:function(e){var i=this,o=t.get(this.premiumPlusInventory,e),n=[];o&&(n=t.reduce(o,function(n,r,a){var s=-1,l=-1,d=0;t.forEach(r,function(e,t){e.onPreAuction(),0>s&&e.isAvailable()&&(s=t),!d&&e.getMaxCap()>0&&(d=e.getPriority()),s>=0&&d<=e.getPriority()&&(l=t)});var c=r.splice(s,1)[0];return t.isNil(c)||(c.onSelection(),n.push(c.getBidInstance()),c.isMaxCaped()||r.splice(l,0,c)),t.isEmpty(r)&&(delete o[a],t.isEmpty(o)&&delete i.premiumPlusInventory[e]),n},[]));var r=t.get(this.inventory,e),a=[];return r&&(a=r.reduce(function(e,t){return t.onPreAuction().isAvailable()&&(t.onSelection(),e.push(t.getBidInstance()),t.isMaxCaped()&&i.removeAdFromInventory(t)),e},[])),n.concat(a)}},{key:"getLowTierAd",value:function(e){var t=e.getPlaceholderSizeName();if(!this.HbSettings[t].isHbLowTierSupported())return d.info(c,"HB store ("+t+"): low tier pocket is not supported"),null;var i=this.store[t].getLowTierAd();return i?(this.store[t].extendAdWithTiersSizes(i),d.info(c,"HB store ("+t+"): Selected low tier ad: ",i),i):(d.info(c,"HB store ("+t+"): Failed selecting low tier ad."),null)}},{key:"getTagIdForSize",value:function(e){return this.tagIdPerSize[e]||0}},{key:"isLowTierSupportedForSize",value:function(e){return t.result(this,"HbSettings["+e+"].isHbLowTierSupported",!1)}},{key:"resetTiersThresholdForSize",value:function(e){t.isNil(this.HbSettings[e])||(this.HbSettings[e].resetTiersThreshold(),this.store[e].mergeLowTierToHighTier())}}]),i}(l);return h}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Tags=Cbola.Common.Ads.Tags||{},Cbola.Common.Ads.Tags.A9=Cbola.Common.Ads.Tags.A9||function(){var e=Cbola.Common.Ads.Tags.Base;return function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"getDFPSlotName",value:function(){return this.Tag}},{key:"getPrebidBidsForAuction",value:function(){return this.headerBiddingStore.getBidsForAuction(this.getSizeName())}},{key:"getAuctionTimeout",value:function(){return this.auctionTimeout}},{key:"setAuctionTimeout",value:function(e){this.auctionTimeout=e}},{key:"setHeaderBiddingStore",value:function(e){this.headerBiddingStore=e}}]),t}(e)}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.A9Tags=Cbola.Common.Ads.Stores.A9Tags||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors.ORANGE,o=Cbola.Common.Ads.HeaderBiddingSettings,n=Cbola.Common.Ads.Tags.Base,r=Cbola.Common.Ads.Stores.Base,a=function(r){function a(e,t){_classCallCheck(this,a);var i=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return i.headerBiddingStore=t,i.HbSettings={},i}return _inherits(a,r),_createClass(a,[{key:"addToInventory",value:function(t){var i=t.getSizeName();e.isNil(this.inventory[i])&&(this.inventory[i]=t,t.setHeaderBiddingStore(this.headerBiddingStore))}},{key:"init",value:function(t){var i=this;e.forEach(t.AdsForSize,function(r){var a=n.getAdSizeName(r);e.isEmpty(i.inventory[a])||(i.HbSettings[a]=new o(e.get(r,"HbSettings")||{},t),i.inventory[a].setAuctionTimeout(i.HbSettings[a].getHbTimeout()))})}},{key:"getAd",value:function(o){var n=o.getPlaceholderSizeName();if(e.isNil(this.inventory[n]))t.info(i,"A9 store ("+n+"): no a9 tag");else{if(e.isNil(o.injectedWithA9Tag)){o.injectedWithA9Tag=!0;var r=this.inventory[n];return t.info(i,"A9 store ("+n+"): selected a9 tag.",r),r}t.info(i,"A9 store ("+n+"): already attempted a9 tag injection on placeholder: ",o)}return null}}]),a}(r);return a}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.CPITags=Cbola.Common.Ads.Stores.CPITags||function(){var e=Cbola.Common.Ads.Stores.Base,t=(Cbola.Common.Ads.Tags.Base,Cbola.Logger.getInstance()),i=Cbola.Logger.Colors.ORANGE,o=Cbola._,n=function(e){function n(e){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return _inherits(n,e),_createClass(n,[{key:"addToInventory",value:function(e){var t=e.getSizeName();o.isNil(this.inventory[t])&&(this.inventory[t]=e)}},{key:"getAd",value:function(e){var n=e.getPlaceholderSizeName(),r=o.get(this,"inventory."+n,null);return r?(t.info(i,"CPI store ("+n+"): selected CPI ad: ",r),delete this.inventory):t.info(i,"CPI store ("+n+"): failed selecting CPI ad"),r}}]),n}(e);return n}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.PSATags=Cbola.Common.Ads.Stores.PSATags||function(){var e=Cbola.Common.Ads.Stores.Base,t=Cbola.Common.Ads.Tags.Base,i=Cbola._,o=Cbola.Enums,n=Cbola.Env,r=Cbola.Utils,a={FilteringRules:null,Id:0,IsHb:!1,MaxCap:0,Mode:1,Priority:10,ProviderId:0,PsaTagCap:0,ShowX:!0,TagExtractionType:o.TagExtractionTypes.WRITE_IFRAME,ThrottlingRules:null,Weight:1},s=function(e){function o(e){return _classCallCheck(this,o),_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e))}return _inherits(o,e),_createClass(o,[{key:"init",value:function(e){var o=this,s=i.get(e,"AdsForSize");i.forEach(s,function(e){var s=t.getAdSizeName(e),l=e.AdHeight,d=e.AdWidth,c=t.translateSize(d,l),h=c.width,m=c.height;o.inventory[s]=new t(i.defaults({Tag:"<div id='cbola_psa'></div><script src='//psa.carambo.la/getPsa?width="+h+"&height="+m+"&did="+n.domainId+"&pid="+n.activePid+"&isMobile="+(r.isMobile?1:0)+"'></script>",AdHeight:l,AdWidth:d},a))})}},{key:"getAd",value:function(e){var t=e.getPlaceholderSizeName();return i.get(this.inventory,t,null)}}]),o}(e);return s}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.Ads=Cbola.Common.Ads||{},Cbola.Common.Ads.Stores=Cbola.Common.Ads.Stores||{},Cbola.Common.Ads.Stores.Manager=Cbola.Common.Ads.Stores.Manager||function(){var e=Cbola,t=e._,i=e.Env,o=e.EventBus,n=e.Utils,r=e.Common,a=r.UserService,s=r.Ads,l=s.Stores,d=s.Tags,c=e.Enums.AdTriggerTypes,h=e.Logger.Colors.ORANGE,m=d.Base,p=m.AD_TYPES,u=m.AD_MODES,b=Cbola.Logger.getInstance(),f="AdsStoresManager",g=204,y=[{toFind:"[\\[{]CLIENTCB[\\]}]",replaceWith:t.random(1e7,9e7)},{toFind:"[\\[{]CACHEBUSTER[\\]}]",replaceWith:n.generateViewId()},{toFind:"\\[USER_AGENT\\]",replaceWith:navigator.userAgent}],v=t.once(function(){n.push.apply(y,[{toFind:"{google_page_url}",replaceWith:i.PageProperties.originalPathNameHost},{toFind:"\\[PAGE_URL\\]",replaceWith:i.PageProperties.originalPathNameHost}])}),w=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments[2];_classCallCheck(this,e),this.wid=i,this.elemId=t,this.shouldIncludePromises=[],v(),Cbola.Common.RequestHandler.getAds(i,t,o).then(this.init.bind(this)).catch(n.noOp)}return _createClass(e,null,[{key:"replaceTagParams",value:function(e){var i=y.concat([{toFind:"\\[ID\\]",replaceWith:t.get(e,"Id",0)}]),o=t.get(e,"Tag","");t.forEach(i,function(e){var t=e.toFind,i=e.replaceWith;o=n.replaceAll(t,i,o)}),e.Tag=o}}]),_createClass(e,[{key:"init",value:function(){var i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.get(n,"AdsForSize",[]);return t.isEmpty(r)?(b.errorM(f+".init",f+".init failed no ads data exist. Widget id: "+this.wid),this):(this.adsData=n,this.displayBeforeVideo=n.NumDisplayBeforeVideo||0,this.maxVideoAds=n.MaxVideos||0,this.maxDisplayAds=n.MaxDisplayAds,this.stores={psa:new l.PSATags(this),headerBidding:new l.HeaderBiddingTags(this),waterfall:new l.WaterfallTags(this),cpi:new l.CPITags(this)},this.stores.a9=new l.A9Tags(this,this.stores.headerBidding),this.storesToInit={headerBidding:!1,waterfall:!1,cpi:!1,a9:!1,psa:!0},this.storeSizes={},t.forEach(r,function(o){t.forEach(p,function(n){var r=o[n.name];t.isEmpty(r)||t.forEach(r,function(t){var o=e.filtersManager.shouldInclude(t);o instanceof Promise?i.shouldIncludePromises.push(o):o&&i.addToStoreInventoryByTagType(t)})})}),this.initStores(),o.fire(""+o.Events.ADS_STORES_MANAGER_READY+this.wid,this),void(this.shouldIncludePromises.length>0&&Promise.all(this.shouldIncludePromises).then(function(e){var n=Object.keys(i.storeSizes).length;t.forEach(e,function(e){t.isNil(e)||i.addToStoreInventoryByTagType(e)}),i.initStores(),n<Object.keys(i.storeSizes).length&&o.fire(""+o.Events.ADS_STORES_MANGER_ADDED_SIZES+i.wid)})))}},{key:"addToStoreInventoryByTagType",value:function(t){if(t.IsHb){var i={};t.ProviderId===g?(i=new d.A9(t),this.stores.a9.addToInventory(i),this.storesToInit.a9=!0):(i=new d.HeaderBidding(t),this.stores.headerBidding.addToInventory(i),this.storesToInit.headerBidding=!0),this.storeSizes[i.getSizeName()]=!0}else if(t.Mode===u.CPI)this.stores.cpi.addToInventory(new d.Base(t)),this.storesToInit.cpi=!0;else{e.replaceTagParams(t);var o=new d.Waterfall(t);this.stores.waterfall.addToInventory(o),this.storesToInit.waterfall=!0,this.storeSizes[o.getSizeName()]=!0}}},{key:"initStores",value:function(){var e=this;t.forEach(this.stores,function(t,i){e.storesToInit[i]&&(t.init(e.adsData),e.storesToInit[i]=!1)})}},{key:"getAd",value:function(e){var t=this;if(this.maxDisplayAds>0){var i=this.stores.a9.getAd(e);return i?(this.onAdSelectionSuccess(e,i),Promise.resolve(i)):this.stores.headerBidding.getAd(e).then(function(i){return t.onAdSelectionSuccess(e,i),Promise.resolve(i)}).catch(function(){return t.getWaterfallAd(e)})}return this.getWaterfallAd(e)}},{key:"getWaterfallAd",value:function(e){var i="getWaterfallAd",o=null;if(this.displayBeforeVideo<=0&&this.maxVideoAds>0?o=this.stores.waterfall.getAd(e,p.VIDEO.name):b.info(h,f+"."+i+" - skipped attempting to set video ad, displayBeforeVideo: "+this.displayBeforeVideo+" maxVideoAds: "+this.maxVideoAds+". Element ID: "+this.elemId+", widgetId: "+this.wid+"."),!o&&this.maxDisplayAds>0)o=this.stores.waterfall.getAd(e,p.DISPLAY.name);else if(this.maxDisplayAds<=0)return b.info(h,f+"."+i+" - reached max display ads. Element ID: "+this.elemId+", widget ID: "+this.wid),Promise.reject(!0);return t.isNil(o)?Promise.reject(!1):(this.onAdSelectionSuccess(e,o),Promise.resolve(o))}},{key:"onAdSelectionSuccess",value:function(e,i){var o=t.result(e,"getInjectionType");if(o===c.REFRESH_PSA||o===c.REFRESH_CONFIANT_BLOCK||o===c.REFRESH_AD_LIGHTNING_BLOCK)return this;var n=i.getTypeName();return n===p.VIDEO.name?this.maxVideoAds-=1:n===p.DISPLAY.name&&(this.displayBeforeVideo=Math.max(this.displayBeforeVideo-1,0),this.maxDisplayAds-=1),this}},{key:"getAdsData",value:function(){return this.adsData}},{key:"getLowTierFallbackAd",value:function(e){return this.stores.headerBidding.getLowTierAd(e)}},{key:"getRandomHbTagId",value:function(e){var t=e.getPlaceholderSizeName();this.stores.headerBidding.getTagIdForSize(t)}},{key:"getCPIFallbackAd",value:function(e){return this.stores.cpi.getAd(e)}},{key:"getPSA",value:function(e){return this.stores.psa.getAd(e)}},{key:"isLowTierSupported",value:function(e){var t=e.getPlaceholderSizeName();return this.stores.headerBidding.isLowTierSupportedForSize(t)}},{key:"hasAvailableAdsForSize",value:function(e){return this.storeSizes[e]}},{key:"updateWaterfallPSACounter",value:function(e){var t=e.getPlaceholderSizeName();this.stores.waterfall.incrementPSACounter(t)}},{key:"isWaterfallMaxPlacementPSA",value:function(e){var t=e.getPlaceholderSizeName();return this.stores.waterfall.isMaxPlacementPSA(t)}},{key:"removeWaterfallAdsForSize",value:function(e){var t=e.getPlaceholderSizeName();this.stores.waterfall.removeAdsForSize(t),this.resetHBSettingsTiersThresholdForSize(t),b.trace(f+".removeWaterfallAdsForSize: Removing all WF ads due to placement PSA cap, size: "+t+".")}},{key:"removeWaterfallAd",value:function(e){this.stores.waterfall.removeAdFromInventory(e),b.trace(f+".removeWaterfallAd: Removing WF ad due to PSA tag cap. tag ID: "+e.getID()+", size: "+e.getSizeName()+".")}},{key:"resetHBSettingsTiersThresholdForSize",value:function(e){b.info(h,f+"("+e+") - resetting low tier threshold"),this.stores.headerBidding.resetTiersThresholdForSize(e)}}]),e}();return w.filtersManager={IN:{id:1,isAsync:!1,shouldTestURL:!0,onMatch:function(){return!0},onMismatch:function(){return!1}},OUT:{id:2,isAsync:!1,shouldTestURL:!0,onMatch:function(){return!1},onMismatch:function(){return!0}},DFP_COMPLIANCE:{id:3,isAsync:!1,shouldTestURL:!1,onRule:function(e){return e.Tag=n.replaceAll('"compliance": \\["yes"\\]','"compliance": ["no"]',e.Tag),!0}},REMOVE_ON_IE:{id:4,isAsync:!1,shouldTestURL:!1,onRule:function(){return!n.isIE}},REMOVE_ON_EU_USER:{id:5,isAsync:!0,shouldTestURL:!1,onRule:function(){return a.isEUUserAsync().then(function(e){var t=!e;return Promise.resolve(t)})}},REMOVE_EU_USER_WO_CMP:{id:6,isAsync:!0,shouldTestURL:!1,onRule:function(){return a.isEUUserAsync().then(function(e){var t=!0;return e?Cbola.Common.ConsentProviders.Manager.consentProviderFound().then(function(){return Promise.resolve(t)}).catch(function(){return Promise.resolve(!t)}):Promise.resolve(t)})}},getRuleByType:t.memoize(function(e){return t.find(this,function(t){return t.id===e})}),shouldInclude:function(e){var o=this,n=e.Id,r=t.get(e,"FilteringRules");if(t.isObject(r)&&r.hasOwnProperty("FilterType")&&r.hasOwnProperty("ExplicitURL")&&(r=[r]),r&&t.isArray(r)&&!t.isEmpty(r)){var a=r.reduce(function(e,r){var a=t.get(r,"FilterType"),s=o.getRuleByType(parseInt(a,10));return s?e[s.isAsync?"push":"unshift"](t.extend({ExplicitURL:r.ExplicitURL},s)):b.errorM(f+".shouldInclude","Unknown ad filtering rule type: "+a+". Including tag "+n+" for URL: "+i.PageProperties.originalPathNameHost),e},[]).reduce(function(o,r){if(!o)return o;var a="";if(r.shouldTestURL){var s=t.isArray(r.ExplicitURL)?r.ExplicitURL:["^.*"],l=s.some(function(e){return new RegExp(e,"i").test(i.PageProperties.hostname)});a=l?"onMatch":"onMismatch"}else a="onRule";if(a.length>0){var d=r.id,c=t.get(r,a);if(!t.isFunction(c))return b.errorM(f+".shouldInclude","Filters manager rule type "+d+" is not supporting action "+a),o;b.info(h,"AdStoresManager::FilterManager (tag ID: "+n+"): Activated filter type "+d+" action: "+a);var m=r.isAsync;!t.isArray(o)&&m&&(o=[]);var p=c(e);m?o.push(p):o=p}return o},!0);return t.isArray(a)?Promise.all(a).then(function(t){return Promise.resolve(t.every(Boolean)?e:null)}):a}return!0}},w}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdPlaceHolder=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Enums,n=o.HeaderBiddingRequestStatus,r=o.AdTriggerTypes,a=e.Common,s=a.AnalyticsService,l=a.Ads,d=l.Writers,c=l.Tags.Base,h=Cbola.Logger.getInstance(),m=Cbola.Logger.Colors,p=8e3,u=function(e,i,o){this.banner=o,this.bannerTags=[],this.bannerCount=0,this.id=t.random(0,1e4),this.elemId=i,this.tagSizeHeight=t.get(e,"TagSizeHeight",0),this.tagSizeWidth=t.get(e,"TagSizeWidth",0),this.placeholderSizeName=c.getAdSizeName({AdWidth:this.tagSizeWidth,AdHeight:this.tagSizeHeight}),this.originalAdHeight=this.adHeight=c.translateSize(this.tagSizeWidth,this.tagSizeHeight).height,this.originalAdWidth=this.adWidth=c.translateSize(this.tagSizeWidth,this.tagSizeHeight).width,this.refreshOnMalwareCounter=0,this.displayCloseButton=!1,this.stopAllRefreshes=!1,this.adInjectionTriggerType=r.APPERANCE,this.banner.style["height"]=this.adHeight+"px",this.banner.style["width"]=this.adWidth+"px"};u.prototype.injectAd=function(e){if(t.isEmpty(e))return this;if(t.isNil(this.banner)&&(h.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, failed banner initialization"),this.stopAllRefreshes=!0),this.stopAllRefreshes)return this;this.displayCloseButton=e.shouldShowX();var o=e instanceof Cbola.Common.Ads.Tags.A9?f:b,n=new o(this.elemId,e,this.bannerCount,this.Apperance,this.spot).init();return n.setDatasetObj({bannerId:this.bannerCount,elementId:this.elemId,apperance:this.Apperance}),t.isNil(this.spot)||n.setDatasetObj({spot:this.spot}),this.bannerCount+=1,t.isEmpty(this.bannerTags)?n.setAsFront():n.toFrontTimeOut=setTimeout(this.bringToFront.bind(this),p),this.bannerTags.push(n),n.attach(this.banner),n.injectTag(this.adInjectionTriggerType),this.bannerTagStyle(n),i.dataset(this.banner,"stamp",Date.now()),this},u.prototype.injectAdToExistingBanner=function(e,i){var o=t.find(this.bannerTags,function(e){return e.getId()===i});return"undefined"!=typeof o&&o.injectFallbackAd(e,this.adInjectionTriggerType),this},u.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":"transparent",height:this.adHeight+"px",width:this.adWidth+"px"}),this},u.prototype.preventBannerReplacement=function(e){var i=t.remove(this.bannerTags,function(t){return t.getId()===e}).shift();
return i?i.isFront()?(this.bannerTags.unshift(i),!1):(clearTimeout(i.toFrontTimeOut),i.detach(),!0):!1},u.prototype.bringToFront=function(){if(this.bannerTags.length>=2){var e=this.bannerTags.shift();this.banner&&(e instanceof f&&t.isFunction(e.onRemoval)&&e.onRemoval(),e.detach()),this.bannerTags[0].setAsFront()}return this},u.prototype.getInjectionType=function(){return this.adInjectionTriggerType},u.prototype.setAdInjectionType=function(e){return this.adInjectionTriggerType=e,this},u.prototype.isRefreshable=function(){return!this.stopAllRefreshes},u.prototype.stopRefresh=function(){this.stopAllRefreshes=!0},u.prototype.getAdObjByBannerId=function(e){var i=t.find(this.bannerTags,function(t){return t.getId()===e});return i?i.getAdObj():null},u.prototype.incrementMalwareRefresh=function(){return this.refreshOnMalwareCounter+=1,this},u.prototype.resetMalwareRefresh=function(){return this.refreshOnMalwareCounter=0,this},u.prototype.getMalwareRefreshCount=function(){return this.refreshOnMalwareCounter},u.prototype.getPlaceholderSizeName=function(){return this.placeholderSizeName};var b=function(){function e(t,i,o){_classCallCheck(this,e),this.elemId=t,this.adObj=i,this.id=o.toString(),this.attached=!1}return _createClass(e,[{key:"init",value:function(){return this.buildBannerTag()}},{key:"buildBannerTag",value:function(){var e=document.createElement("div");e.className="cbola-banner__tag cbola-banner__tag--back";var i=t.result(this.adObj,"getTranslatedSizes",{width:0,height:0}),o=i.width,n=i.height;return e.style["width"]=o+"px",e.style["height"]=n+"px",this.bannerTag=e,this}},{key:"attach",value:function(e){return e&&this.bannerTag&&!this.attached&&(e.appendChild(this.bannerTag),this.attached=!0,this.container=e),this}},{key:"detach",value:function(){return this.container&&this.bannerTag&&this.attached&&(this.container.removeChild(this.bannerTag),this.attached=!1,delete this.container),this}},{key:"injectTag",value:function(e){var o=this,a=this.adObj,l=a.getID();return d.Factory.getAsync(a.getTagExtractionType()).then(function(i){var d=i.name;try{i.write(o.bannerTag,t.result(a,"getTag",""),a);var c=t.result(a,"getCPM",null),m=null;e===r.WF_FALLBACK?m=n.LOW_TIER_FILLED:e!==r.INJECT_PSA&&(s.setAdsRequest(o.elemId,l,e,c),t.isNil(c)||(m=n.HIGH_TIER_FILLED)),t.isNil(m)||s.setHbBidRequestProto([{TagId:l,Cpm:c,Status:m,TimeInPocket:a.getResponseTimestamp()?Date.now()-a.getResponseTimestamp():0,TimeToRespond:a.getTimeToRespond(),AuctionCpm:a.auctionCPM||null,PocketCpm:a.pocketCPM||null,PocketUsageType:a.pocketUsageType,PocketSizeHT:a.pocketSizeHT,PocketSizeLT:a.pocketSizeLT}]),o.setDatasetObj({adId:l,cbolaTagId:l,cbolaMethod:d}),h.info(Cbola.Logger.Colors.PALE_YELLOW,"elementId: "+o.elemId+". adId: "+l+". Ad extraction type: "+a.getTagExtractionType()+", selected Extraction type: "+d)}catch(p){h.warnM("AdBannerTag.injectTag","AdBannerTag.injectTag error, extraction method: "+d),h.info(p)}}).catch(i.noOp),this}},{key:"setDatasetObj",value:function(e){var o=this;return t.forEach(e,function(e,n){t.isNil(e)||i.dataset(o.bannerTag,n,e)}),this}},{key:"injectFallbackAd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.WF_FALLBACK;this.adObj=e,this.bannerTag.innerHTML="",this.injectTag(t)}},{key:"setAsFront",value:function(){this.bannerTag.classList.remove("cbola-banner__tag--back"),this.bannerTag.classList.add("cbola-banner__tag--front")}},{key:"setStyle",value:function(e){t.extend(this.bannerTag.style,e)}},{key:"getElement",value:function(){return this.bannerTag}},{key:"getId",value:function(){return this.id}},{key:"getAdObj",value:function(){return this.adObj}},{key:"isFront",value:function(){return this.bannerTag.classList.contains("cbola-banner__tag--front")}}]),e}(),f=function(e){function o(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;_classCallCheck(this,o);var a=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t,i));return a.slotID="div-gpt-ad"+a.elemId+"-"+n+"-"+r,a.slotName=t.getDFPSlotName(),a.bidsToReport=[],a}return _inherits(o,e),_createClass(o,[{key:"injectTag",value:function(e){var t=this;h.info(m.GREEN,"A9("+this.slotID+"): start injecting a9 tag"),this.initDFPInIframe().then(function(){return h.info(m.GREEN,"A9("+t.slotID+"): iframe loaded successfully, start bidding"),t.performAuction()}).then(function(e){return h.info(m.GREEN,"A9("+t.slotID+"): performed bidding to the following bidders: "+e.join(",")),t.injectBidsToGoogleTag(e)}).then(function(){h.info(m.GREEN,"A9("+t.slotID+"): bids injected to google tag manager and the following data sent as SetHbBidRequest: ",t.bidsToReport),t.reportToAnalytics(e)}).catch(function(e){return h.errorM("DFPBannerTag.injectTag","A9: DFPBannerTag.injectTag failed, error: ",e)})}},{key:"initDFPInIframe",value:function(){var e=this;return new Promise(function(o){var n=i.createAdIframe(t.result(e,"adObj.getTranslatedSizes",{})),r=Cbola.Templates.getCompiledTemplate("a9_dfp_banner.html"),a=e.adObj.getTranslatedSizes(),s=r({clientPath:Cbola.Env.clientPath,width:a.width,height:a.height,slotName:e.slotName,slotID:e.slotID});n.onload=o,e.bannerTag.appendChild(n);var l=n.contentDocument;l.open(),l.write(s),l.close(),e.iframeWindow=n.contentWindow})}},{key:"performAuction",value:function(){var e=[this.getA9AuctionPromise()],i=this.adObj.getPrebidBidsForAuction();return t.isEmpty(i)||e.push(this.getPrebidAuctionPromise(i)),Promise.all(e)}},{key:"getA9AuctionPromise",value:function(){var e=this;return new Promise(function(t){var i=e.adObj.getTranslatedSizes();e.iframeWindow.apstag.fetchBids({slots:[{slotID:e.slotID,slotName:e.slotName,sizes:[new e.iframeWindow.Array(i.width,i.height)]}],timeout:e.adObj.getAuctionTimeout()},function(){e.bidsToReport.push({TagId:e.adObj.getID(),Cpm:0,Status:n.SUCCESS}),t("a9")})})}},{key:"getPrebidAuctionPromise",value:function(e){var i=this;return new Promise(function(o){var r=e.map(function(e){return t.extend(e.getBidRequest(),{cbolaTagID:e.getID()})}),a=i.iframeWindow,s=a.Cbola_pbjs,l=i.adObj.getTranslatedSizes();s.que.push(function(){s.addAdUnits([{code:i.slotID,bids:r,sizes:[new a.Array(l.width,l.height)]}]),s.requestBids({timeout:i.adObj.getAuctionTimeout(),bidsBackHandler:function(r){for(var a=t.get(r,i.slotID+".bids",[]),s=function(e,t,o){e.manager.onAuctionResponse(o||0),i.bidsToReport.push({TagId:e.getID(),Cpm:o||0,Status:t})};a.length>0;)for(var l=a.shift(),d=l.cpm,c=l.bidder,h=0;h<e.length;h++){var m=e[h];if(c===m.getBidder()){s(m,n.SUCCESS,d),e.splice(h,1);break}}t.forEach(e,function(e){return s(e,n.TIMEOUT,0)}),o("prebid")}})})})}},{key:"injectBidsToGoogleTag",value:function(e){var t=this;return new Promise(function(i){t.iframeWindow.googletag.cmd.push(function(){this.apstag.setDisplayBids(),e.some(function(e){return"prebid"===e})&&this.Cbola_pbjs.setTargetingForGPTAsync(),this.googletag.pubads().refresh(),i()}.bind(t.iframeWindow))})}},{key:"reportToAnalytics",value:function(e){this.bidsToReport.length>0&&(this.bidsToReport.push({TagId:this.bidsToReport[0].TagId,Status:n.REQUEST_MADE}),s.setHbBidRequestProto(this.bidsToReport),s.setAdsRequest(this.elemId,this.adObj.getID(),e))}},{key:"onRemoval",value:function(){this.iframeWindow.googletag.destroySlots()}}]),o}(b);return u}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdTriggerBase=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Env,n=e.EventBus,r=e.Templates,a=e.Common,s=a._AdPlaceHolder,l=a.HasViewability,d=a.UserService,c=Cbola.Logger.getInstance(),h=function(e,i){this.elemId=i.elementId,this.Apperance=e.Apperance,this.closeBehaviors=t.get(e,"CloseBehaviors")||[],this.openBehaviors=t.get(e,"OpenBehaviors")||[],this.refreshInterval=t.get(e,"RefreshInterval"),this.layerType=i.layerType,this.adStructureNode=r.createElementFromTemplate("ad_banner_structure.html",{elemId:this.elemId,apperance:this.Apperance,advertisement:d.vocabulary("advertisement"),showAdvertisementTitle:i.showAdvertisementTitle}),this.closeTriggerButton=this.adStructureNode.querySelector(".hide-ad-button"),this.banner=this.adStructureNode.querySelector(".cbola-banner"),this.containerWrapper=i.containerWrapperNode,this.appendTo=this.containerWrapper,this.triggerStructureAppended=!1,this.initialWrapperHeight=this.wrapperHeight=i.initialWrapperHeight,s.call(this,e,this.elemId,this.banner),this.styleProperties={},this.styleClassName="cbolaApperanceStyle_"+this.elemId+"_"+e.Apperance,this.styleElements=[],this.open=!1,this.animationEnabled=i.animationEnabled,this.viewable=!1,this.hasScaled=!1};return h.prototype=Object.create(Cbola.Common._AdPlaceHolder.prototype),t.extend(h.prototype,l.prototype),h.constructor=h,h.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},h.prototype.appendTriggerStyle=function(){var e="cbolaApperanceStyle_"+this.Apperance+"_"+this.elemId,n=t.reduce(this.styleProperties,function(e,t,i){return""+e+i+": "+t+";"},"");n="."+e+"{"+n+"}";var r=i.injectStyle(document,n);if(r.className=this.styleClassName,this.styleElements.push(r),o.topWindow!==window){var a=i.injectStyle(o.topWindow.document,n);a.className=this.styleClassName,this.styleElements.push(a)}return this.adStructureNode&&this.adStructureNode.classList.add(e),this},h.prototype.closeAnimation=function(){return this.open?(this.adStructureNode.style["margin"]="0",this.setClose(),this):this},h.prototype.removeStyle=function(){var e=this;return setTimeout(function(){try{e.styleElements.forEach(function(e,t,i){e.parentNode.removeChild(e),delete i[t]}),e.styleElements=[]}catch(t){c.info("Failed to remove style for apperance: "+e.Apperance)}},1e3),this},h.prototype.removeStructure=function(){var e=this;return setTimeout(function(){try{e.adStructureNode.parentNode.removeChild(e.adStructureNode),delete e.adStructureNode,delete e.banner,delete e.closeTriggerButton,delete e.containerWrapper,e.triggerStructureAppended=!1}catch(t){c.info("Failed to delete DOM nodes pointers for apperance: "+e.Apperance)}},1e3),this},h.prototype.toggleXButton=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.displayCloseButton;return t.isNil(this.closeTriggerButton)?this:(e===!0&&this.closeTriggerButton.classList.contains("cbola-fade-out")?this.closeTriggerButton.classList.remove("cbola-fade-out"):e!==!1||this.closeTriggerButton.classList.contains("cbola-fade-out")||this.closeTriggerButton.classList.add("cbola-fade-out"),this)},h.prototype.triggerElementsStyle=function(){return this},h.prototype.adScale=function(e){var o=e/this.adWidth,n=this.adHeight;return t.isNil(e)||0===e?this:o>=1?(this.hasScaled&&(i.transform(this.banner,"scale(1)"),this.hasScaled=!1,this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth+"px",this.adStructureNode.style["height"]=this.originalAdHeight+"px")),this):(t.extend(this.banner.style,{"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-o-transform-origin":"0 0","transform-origin":"0 0"}),i.transform(this.banner,"scale("+o+")"),this.hasScaled=!0,this.adHeight=this.originalAdHeight*o,this.adStructureNode&&(this.adStructureNode.style["width"]=this.originalAdWidth*o+"px",this.adStructureNode.style["height"]=this.adHeight+"px"),n-=this.adHeight,c.info("Trigger with apperance: "+this.Apperance+" for element ID: "+this.elemId+" in scale: "+o),this.containerWrapper&&(this.wrapperHeight-=n,this.containerWrapper.style["height"]=this.wrapperHeight+"px"),this)},h.prototype.isOpen=function(){return this.open},h.prototype.isClose=function(){return!this.open},h.prototype.setOpen=function(){return this.open=!0,this},h.prototype.setClose=function(){return this.open=!1,this},h.prototype.isAppended=function(){return this.triggerStructureAppended},h.prototype.init=function(){return l.prototype.init.call(this),this.elementId=this.elemId+"_"+this.Apperance+(t.isNil(this.spot)?"":"_"+this.spot),this.viewableEvent=""+n.Events.TRIGGER_IS_VIEWABLE+this.elementId,this.element=this.adStructureNode,this},h}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAboveMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.topAdPlaceHolder:Cbola.Logger.getInstance().errorM("AboveMobile.constructor","AdTriggerAboveMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"2px",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return this.open?(t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this.setClose(),this):this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAbovePushContent=function(){var e=Cbola._,t=Cbola.Config,i=Cbola.InContent.Layers.Base.prototype,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.appendTo=this.containerWrapper.children[0],this.styleProperties={display:"block!important",width:"100%",opacity:"0","background-color":"transparent",position:"relative",margin:"0 auto -"+this.adHeight+"px","margin-left":"auto","margin-right":"auto","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none"}};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(Cbola.Utils.before(this.appendTo,this.adStructureNode),this.triggerStructureAppended=!0),this},o.prototype.triggerElementsStyle=function(){var o=this,n=i.isInContent.call({type:this.layerType})?t.adBelowInContentExtraMargin:i.isSidebarSlideshow.call({type:this.layerType})?t.adBelowSlideShowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+n,e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){o.toggleXButton(!1),e.extend(o.adStructureNode.style,{"margin-bottom":n+"px",height:o.adHeight,opacity:"1"}),setTimeout(function(){o.adStructureNode.style["z-index"]=10},600)},0),this},o.prototype.closeAnimation=function(){return this.isClose()||(this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin-bottom"]="-"+this.adHeight+"px",this.setClose()),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowCoverContent=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*(this.initialWrapperHeight-1)+"px",display:"block!important",opacity:"0","-webkit-transition":"margin 0.6s ease,height 0.6s ease",transition:"margin 0.6s ease,height 0.6s ease","z-index":"-1","background-color":"transparent",width:this.adWidth+"px","max-height":this.initialWrapperHeight+"px",position:"relative","margin-left":"auto","margin-right":"auto",height:this.adHeight+"px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{"margin-top":t.initialWrapperHeight+"px",opacity:"1"})},0),this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowMobile=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),this.layer?this.appendTo=this.layer.bottomAdPlaceHolder:Cbola.Logger.getInstance().errorM("AdTriggerBelowMobile.constructor","AdTriggerBelowMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return e.extend(this.banner.style,{"background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!1),e.extend(t.adStructureNode.style,{"margin-top":"0","margin-bottom":"auto",height:t.adHeight,opacity:"1"}),t.layer.fixAllItemsHeight()},0),this},t.prototype.bannerTagStyle=function(t){return t.setStyle({"background-color":e.result(t,"adObj.AdType",0)===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowPushContent=function(){var e=Cbola._,t=Cbola.Config,i=Cbola.InContent.Layers.Base.prototype,o=function(t,i){var o=this;Cbola.Common._AdTriggerBase.call(this,t,i),this.topStartingPoint=20,this.styleProperties={display:"block!important",width:"100%",height:this.adHeight+"px",opacity:"0","background-color":"transparent",position:"absolute",top:this.topStartingPoint+"px",left:"0","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease":"none"},window.addEventListener("resize",e.debounce(function(){!e.isNil(o.containerWrapper)&&o.isOpen()&&o.adScale(o.containerWrapper.offsetWidth)},150,{leading:!1,maxWait:500,trailing:!0}))};return o.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this,o=i.isInContent.call({type:this.layerType})?t.adBelowInContentExtraMargin:i.isSidebarSlideshow.call({type:this.layerType})||i.isStoriesSlideshow.call({type:this.layerType})?t.adBelowSlideShowMargin:t.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+o,this.banner.style["float"]="none",this.banner.style["background-color"]="transparent",this.toggleXButton(i.isInContent.call({type:this.layerType})&&this.displayCloseButton),setTimeout(function(){e.adStructureNode.style["margin-top"]=o+e.initialWrapperHeight-e.topStartingPoint+"px",e.adStructureNode.style["opacity"]="1"},0),setTimeout(function(){e.adStructureNode.style["z-index"]=10},1e3),this},o.prototype.closeAnimation=function(){return this.isClose()||(this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style["margin"]=this.topStartingPoint+"px",this.setClose()),this},o.prototype.injectAd=function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this,t),this.toggleXButton(i.isInContent.call({type:this.layerType})&&this.displayCloseButton),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerCenterInsideUnit=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*this.adHeight+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none","z-index":"6","background-color":"rgba(255, 255, 255, 0.9)",width:"100%"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return this.triggerHeight=this.adHeight,e.extend(this.banner.style,{"float":"none","background-color":"transparent"}),setTimeout(function(){t.toggleXButton(!0),e.extend(t.adStructureNode.style,{margin:"auto",height:t.initialWrapperHeight,"margin-top":t.initialWrapperHeight+"px"})},0),this},t.prototype.bannerTagStyle=function(e){return e.setStyle({"background-color":"black",height:this.adHeight+"px",width:this.adWidth+"px"}),this},t.prototype.adScale=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerFixedFooter=function(){var e=Cbola._,t=Cbola.Env,i=function(i,o){Cbola.Common._AdTriggerBase.call(this,i,o),this.appendTo=t.topWindow.document.body,this.adStructureNode.id="cbola-footer-banner",this.styleProperties={position:"fixed",display:"block",top:"auto",left:"0",bottom:-1*this.adHeight+"px","z-index":"2147483647",height:this.adHeight+"px","-webkit-transition":this.animationEnabled?"bottom 0.9s ease":"none",transition:this.animationEnabled?"bottom 0.9s ease":"none"},e.isEmpty(o.footerBackground)?(this.styleProperties["width"]=this.adWidth+"px",this.styleProperties["margin"]="0 auto",this.styleProperties["left"]="0",this.styleProperties["right"]="0"):(this.styleProperties["width"]="100%",this.styleProperties["background-color"]=o.footerBackground)};return i.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),i.constructor=i,i.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||(this.appendTo.appendChild(this.adStructureNode),this.triggerStructureAppended=!0),this},i.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!0),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight,bottom:"0"})},0),this},i.prototype.adScale=function(){return this},i.prototype.closeAnimation=function(){return this.adStructureNode.style["bottom"]=-1*this.adHeight+"px",this.setClose(),this},i.prototype.isViewable=function(){return!0},i.prototype.init=function(){return this},i.prototype.updateViewability=function(){return this},i}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,i,o)}if("value"in n)return n.value;var a=n.get;return void 0===a?void 0:a.call(o)};window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItem=function(){var e=Cbola,t=e._,i=e.Utils,o=e.Common._AdTriggerBase,n=Cbola.InContent.Layers.Base.prototype;return function(e){function o(e,t){_classCallCheck(this,o);var i=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return i.element=i.adStructureNode=i.adStructureNode=i.banner=i.closeTriggerButton=i.title=i.containerWrapper=null,i.layer=Cbola.InContent.Manager.getLayerByElementId(i.elemId),i.spot=e.currentSpot,i.isCoveringAd=!1,i.hideButtons=!1,i.inItemDuration=0,i}return _inherits(o,e),_createClass(o,[{key:"appendTriggerStructure",value:function(){return this.banner=this.layer.injectAdAfterItem({adSpot:this.spot,isCover:this.isCoveringAd,hideButtons:this.hideButtons,inItemDuration:this.inItemDuration}),this.banner&&(this.triggerStructureAppended=!0,this.element=this.banner.parentElement),this}},{key:"injectAd",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return(e=_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"injectAd",this)).call.apply(e,[this].concat(n)),i.dataset(this.banner,"adWidth",this.adWidth),i.dataset(this.banner,"adHeight",this.adHeight),this.banner.style["width"]=this.adWidth+"px",this.banner.style["height"]=this.adHeight+"px",this}},{key:"triggerElementsStyle",value:function(){return this}},{key:"bannerTagStyle",value:function(){return this}},{key:"adScale",value:function(e){return t.isFunction(this.layer.scaleInItemAd)?this.layer.scaleInItemAd(this.spot):n.isPlaybox.call({type:this.layerType})||_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"adScale",this).call(this,e),this}},{key:"closeAnimation",value:function(){return this}},{key:"removeStyle",value:function(){return this}},{key:"removeStructure",value:function(){return t.isFunction(this.layer.removeInItemAd)&&this.layer.removeInItemAd(this.spot),this}}]),o}(o)}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemCover=function(){var e=Cbola._,t=Cbola.Common.AdTriggerInItem,i=function(i,o){t.call(this,i,o),this.isCoveringAd=!0,this.inItemDuration=e.get(i,"SpotsInterval",10)};return i.prototype=Object.create(t.prototype),i.constructor=i,i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItemMobile=function(){var e=Cbola.TaskManager,t=Cbola._,i=function(e,t){Cbola.Common.AdTriggerInItem.call(this,e,t)};return i.prototype=Object.create(Cbola.Common.AdTriggerInItem.prototype),i.constructor=i,i.prototype.injectAd=function(){for(var i=arguments.length,o=Array(i),n=0;i>n;n++)o[n]=arguments[n];return Cbola.Common.AdTriggerInItem.prototype.injectAd.apply(this,o),t.isFunction(this.layer.fixAllAdItemsStyle)&&e.addExpBackoffTask({fn:this.layer.fixAllAdItemsStyle.bind(this.layer)}),this},i.prototype.adScale=function(){return this},i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemNoButtons=function(){var e=Cbola._,t=Cbola.Common.AdTriggerInItem,i=function(i,o){t.call(this,i,o),this.hideButtons=!0,this.inItemDuration=e.get(i,"SpotsInterval")||30};return i.prototype=Object.create(t.prototype),i.constructor=i,i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdTriggerInItemWithDuration=function(){var e=Cbola,t=e._,i=Cbola.Common.AdTriggerInItem;return function(e){function i(e,o){_classCallCheck(this,i);var n=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,o));return n.inItemDuration=t.get(e,"SpotsInterval")||10,n}return _inherits(i,e),i}(i)}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInnerBanner=function(){var e=Cbola._,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layerType=t.layerType;var i=Cbola.InContent.Manager.getLayerByElementId(this.elemId);this.appendTo=i.boxElem.querySelector(".cbola-slider-ad-placeholder"),Cbola.Config.layouts.sideBars.teaserBanner.indexOf(this.layerType)>-1?this.styleProperties={"box-sizing":"border-box","border-right":"1px solid rgba(171, 171, 171, 0.25)","border-left":"1px solid rgba(171, 171, 171, 0.25)",height:"250px",top:"0px",opacity:"0","margin-left":"-1px",width:"300px"}:this.styleProperties={width:"300px",opacity:"0","box-sizing":"content-box","padding-top":"0px","padding-left":"0px"}};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.triggerElementsStyle=function(){var t=this;return setTimeout(function(){t.toggleXButton(!1),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{opacity:"1",height:t.adHeight})},0),this},t.prototype.adScale=function(){return this},t.prototype.closeAnimation=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftInsideUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola.InContent.Layers.Base.prototype,o=function(t,o){e.call(this,t,o),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),i.isPlaybox.call({type:this.layerType})&&(this.appendTo=this.layer.boxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){return e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.adStructureNode.style["margin"]="auto",e.adStructureNode.style["margin-left"]=e.adWidth+"px",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),t.fire(""+t.Events.COVERING_TRIGGER_ON+this.elemId),this},o.prototype.closeAnimation=function(i){return e.prototype.closeAnimation.call(this),t.fire(""+t.Events.COVERING_TRIGGER_OFF+this.elemId,{byClick:i}),this},o.prototype.adScale=function(){return this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftOfUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola._,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",left:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",right:"auto",display:"block!important","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return e.prototype.appendTriggerStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var e=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginLeft=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){e.toggleXButton(),e.banner.style.backgroundColor="transparent",i.extend(e.adStructureNode.style,{margin:"auto",height:e.adHeight})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),t.fire(t.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftPopOnUnit=function(){var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,i=Cbola.InContent.Layers.Base.prototype,o=function(t,o){e.call(this,t,o),this.layer=Cbola.InContent.Manager.getLayerByElementId(this.elemId),i.isPlaybox.call({type:this.layerType})&&(this.appendTo=this.layer.view.itemsBoxElem,this.inSlideShow=!0),this.styleProperties={top:"0",left:"0",display:"none","z-index":"6","background-color":this.inSlideShow?"#fff":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return o.prototype=Object.create(e.prototype),o.constructor=o,o.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.toggleXButton(!0)},2500),this.adStructureNode.style["display"]="block",t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},o.prototype.closeAnimation=function(){return this.isClose()?this:(this.adStructureNode.style["display"]="none",this.setClose(),this)},o.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},o.prototype.adScale=function(){return this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},
Cbola.Common.AdTriggerRightInsideUnit=function(){var e=function(e,t){Cbola.Common.AdTriggerLeftInsideUnit.call(this,e,t),this.styleProperties={top:"0",right:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return e.prototype=Object.create(Cbola.Common.AdTriggerLeftInsideUnit.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.toggleXButton(!0)},2500):e.toggleXButton(!1),e.banner.style["background-color"]="transparent",e.adStructureNode.style["transform"]="translateX(-"+e.adWidth+"px)",e.adStructureNode.style["height"]=e.initialWrapperHeight+"px"},0),this},e.prototype.closeAnimation=function(){return this.isClose()?this:(this.adStructureNode.style["transform"]="translateX(0)",this.setClose(),this)},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightOfUnit=function(){var e=Cbola._,t=Cbola.Common._AdTriggerBase,i=Cbola.EventBus,o=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",right:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",display:"block",left:"inherit","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return o.prototype=Object.create(t.prototype),o.constructor=o,o.prototype.appendTriggerStructure=function(){return t.prototype.appendTriggerStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o.prototype.triggerElementsStyle=function(){var t=this;return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginRight=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){t.toggleXButton(),t.banner.style.backgroundColor="transparent",e.extend(t.adStructureNode.style,{margin:"auto",height:t.adHeight+"px"})},0),this},o.prototype.adScale=function(){return this},o.prototype.removeStructure=function(){return t.prototype.removeStructure.call(this),i.fire(i.Events.RESIZE_ON_AD+this.elemId),this},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggersManager=function(){var t=Cbola,i=t._,o=t.Config,n=t.Env,r=t.EventBus,a=t.TaskManager,s=t.Utils,l=t.Common,d=l.AnalyticsService,c=l.UserService,h=l.ConsentProviders.Manager,m=t.Enums,p=m.AbTests,u=m.AdCloseBehaviors,b=m.AdOpenBehaviors,f=m.AdTriggerTypes,g=m.HeaderBiddingRequestStatus,y=m.RefreshTypes,v=m.SetClickTypes,w=r.Events,_=Cbola.Logger.getInstance(),C=Cbola.Logger.Colors.PALE_YELLOW,I=function(e,t){return""+e.Apperance+(e instanceof Cbola.Common.AdTriggerInItem?"_"+e.spot:"")+(t?"."+t:"")},x=1,E=50,S="AdTriggersManager",T={1:{TriggerConstructor:Cbola.Common.AdTriggerLeftInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[2,5,12]},2:{TriggerConstructor:Cbola.Common.AdTriggerCenterInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,3,5,12]},3:{TriggerConstructor:Cbola.Common.AdTriggerBelowCoverContent,requiredContainerOverflow:"visible",collidesWith:[2]},4:{TriggerConstructor:Cbola.Common.AdTriggerBelowPushContent,collidesWith:[9]},5:{TriggerConstructor:Cbola.Common.AdTriggerRightInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,12]},6:{TriggerConstructor:Cbola.Common.AdTriggerRightOfUnit,requiredContainerOverflow:"visible",collidesWith:[7]},7:{TriggerConstructor:Cbola.Common.AdTriggerLeftOfUnit,requiredContainerOverflow:"visible",collidesWith:[6]},8:{TriggerConstructor:Cbola.Common.AdTriggerInnerBanner},9:{TriggerConstructor:Cbola.Common.AdTriggerAbovePushContent,requiredContainerOverflow:"hidden",collidesWith:[4]},12:{TriggerConstructor:Cbola.Common.AdTriggerLeftPopOnUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2,5]},20:{TriggerConstructor:Cbola.Common.AdTriggerInItem},21:{TriggerConstructor:Cbola.Common.AdTriggerInItemCover,requiredContainerOverflow:"hidden"},22:{TriggerConstructor:Cbola.Common.AdTriggerInItemNoButtons},23:{TriggerConstructor:Cbola.Common.AdTriggerInItemWithDuration},200:{TriggerConstructor:Cbola.Common.AdTriggerInItemMobile},204:{TriggerConstructor:Cbola.Common.AdTriggerBelowMobile},209:{TriggerConstructor:Cbola.Common.AdTriggerAboveMobile},300:{TriggerConstructor:Cbola.Common.AdTriggerFixedFooter}},A={OPEN:"open",CLOSE:"close",REFRESH_CLICK:"refresh_on_click",REFRESH_VIEWABILITY:"refresh_on_viewability",REMOVE:"remove"},L=function(e){var t=this;this.layerType=e.layerType,this.wid=e.widgetId,this.elemId=e.elementId,this.FREEZE=!1,this.delayFromLastScroll=0,this.isReady=!1,this.resolvers=[],this.pendingTriggers=[],this.activeTriggers=[],this.finishedTriggers=[],this.footerBackground=e.footerBackground,this.handlers={};var a=""+w.ADS_STORES_MANAGER_READY+this.wid,s={adsStoreReadyEventFired:!1,layerReadyEventFired:!1,pageLoaded:o.abTestId!==p.ADS_ON_PAGE_LOAD||n.topWindow!==window.top||"complete"===n.topWindow.document.readyState},l=function(){i.some(s,function(e){return!e})||t.start()},d=function(e){e.type===t.layerType&&e.elementId===t.elemId&&(r.removeEventListener("LayerReadyEvent",t,!1),s.layerReadyEventFired=!0,t.layer=e,l())},c=function(e){r.removeEventListener(a,t,!1),s.adsStoreReadyEventFired=!0,t.adsStore=e,t.adsData=e.getAdsData(),l()},h=function(){n.topWindow.removeEventListener("load",t,!1),s.pageLoaded=!0,l()};this.handleEvent=function(e){switch(e.type){case a:c(e.detail);break;case w.LAYER_READY:d(e.detail);break;case"load":h()}},r.addEventListener(a,this,!1),r.addEventListener(w.LAYER_READY,this,!1),s.pageLoaded||n.topWindow.addEventListener("load",this,!1)};return L.prototype.start=function(){var e=this;this.containerBox=this.layer.boxElem,this.containerWrapper=this.layer.container,this.initialWrapperHeight=this.layer.options.layerHeight||this.containerBox.getBoundingClientRect().height,this.initialWrapperMarginLeft=this.containerWrapper.style["margin-left"],this.initialWrapperMarginRight=this.containerWrapper.style["margin-right"],this.initTriggers().initConditionedRefreshData(),i.isEmpty(this.pendingTriggers)||112842!==n.domainId?i.isEmpty(this.pendingTriggers)?_.errorM(S+".start",S+" failed to start, no triggers initialized."):(h.hasConsent().then(s.noOp).catch(this.endAdsProcess.bind(this)),this.startPendingTriggers(!0)):c.isEUUserAsync().then(function(e){return e?h.hasConsent():Promise.resolve()}).then(function(){e.startPendingTriggers(!0)}).catch(this.endAdsProcess.bind(this))},L.prototype.initTriggers=function(){var e=this,t=i.get(this.adsData,"TriggerSettings",[]);return i.forEach(t,function(t){var o=i.extend({},t);!i.isEmpty(o.OpenBehaviors)&&e.translateApperance(o)&&(300!==o.Apperance||n.topWindow===window.top&&!n.topWindow.document.querySelector("#cbola-footer-banner"))&&(200===o.Apperance||20===o.Apperance||21===o.Apperance||22===o.Apperance||23===o.Apperance?i.isEmpty(o.Spots)||(o.Spots.sort(function(e,t){return e-t}).filter(function(e,t,i){return t===i.indexOf(e)}),o.OpenBehaviors.splice(1,o.OpenBehaviors.length-1),i.forEach(o.Spots,function(t){var n={currentSpot:t};i.extend(n,o),n.OpenBehaviors=o.OpenBehaviors.slice(0),n.CloseBehaviors=[],e.pushToPendingTriggers(n)})):e.pushToPendingTriggers(o))}),this},L.prototype.translateApperance=function(e){var t=this,n=i.get(o.triggersDictionary,""+e.Apperance);return n&&n.supportedLayers&&n.supportedLayers.some(function(e){return e===t.layerType})?(e.Apperance=i.get(n,"translatedTo",e.Apperance),!0):(_.info(C,S+".translateApperance could not translate appropriate trigger apperance #"+e.Apperance+" for element Id: "+this.elemId),!1)},L.prototype.pushToPendingTriggers=function(e){if("undefined"!=typeof T[e.Apperance]){var t=T[e.Apperance].TriggerConstructor;if(!t)return this;var i=new t(e,{elementId:this.elemId,containerWrapperNode:this.containerWrapper,initialWrapperHeight:this.initialWrapperHeight,layerType:this.layerType,footerBackground:this.footerBackground,animationEnabled:this.layer.options.ShowAdAnimation,showAdvertisementTitle:this.layer.options.ShowAdvertisementTitleOnAds}).init();i.refreshFixedTime=this.getRefreshFixedTime(),i.triggerOverflow=T[e.Apperance].requiredContainerOverflow,this.pendingTriggers.push(i)}return this},L.prototype.initConditionedRefreshData=function(){var e=this.getDelayLastScroll();return(s.isWindowTopSupported()||!s.isInIframe()&&e>0)&&(this.prevWindowScroll=n.topWindow.scrollY||n.topWindow.pageYOffset,this.testConditionedRefreshData(Date.now()-e)),this},L.prototype.testConditionedRefreshData=function(e){var t=this,i=this.getDelayLastScroll(),o=n.topWindow.scrollY||n.topWindow.pageYOffset,r=Math.abs(o-this.prevWindowScroll);return r>E?(this.delayFromLastScroll=i,this.prevWindowScroll=o,requestAnimationFrame(function(){return t.testConditionedRefreshData(Date.now())})):(this.delayFromLastScroll=i-(Date.now()-e),requestAnimationFrame(function(){return t.testConditionedRefreshData(e)})),this},L.prototype.startPendingTriggers=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;if(t){var o=""+w.ADS_STORES_MANGER_ADDED_SIZES+this.wid,n=function(){r.removeEventListener(o,n),this.startPendingTriggers(!1)}.bind(this);r.addEventListener(o,n)}var a=this.pendingTriggers.slice(0);return a.sort(function(e,t){return e.Apperance!==t.Apperance?e.Apperance-t.Apperance:i.isNil(e.spot)||i.isNil(t.spot)?0:e.spot-t.spot}),i.forEach(a,function(t){e.beforeActivationValidation(t)&&e.pullTriggerFromArray(e.pendingTriggers,t,"Apperance").pushTriggerOnce(e.activeTriggers,t,"Apperance").initTriggerOpening(t)}),this.isReady||this.testReadiness(),this},L.prototype.testReadiness=function(){for(var e=0;e<this.activeTriggers.length;e++)if("undefined"==typeof this.activeTriggers[e].currentOpenBehavior||!this.activeTriggers[e].isAppended()&&this.activeTriggers[e].currentOpenBehavior.Type===b.TIMER&&0===this.activeTriggers[e].currentOpenBehavior.Delay)return void a.addTask(this.testReadiness,[],this,"AdTriggersManager.testReadiness");this.isReady=!0,i.forEach(this.resolvers,function(e){i.isFunction(e)&&e()})},L.prototype.beforeActivationValidation=function(e){return!this.isActive(e,"Apperance")&&!this.isOverflowCollision(e.Apperance)&&!this.isApperanceCollision(e.Apperance)&&this.adsStore.hasAvailableAdsForSize(e.getPlaceholderSizeName())},L.prototype.initTriggerOpening=function(e){var t=e.openBehaviors.shift();if(i.isNil(t))return _.info(C,S+".initTriggerOpening haven't found openBehavior - closing apperance: "+e.Apperance),this.removeTrigger(e);if(e.isOpen())return this;if(e.setOpen(),e.currentOpenBehavior=t,t.Type===b.TIMER||t.Type===b.VIEWABLE&&this.layer.isViewable()||t.Type===b.PAGE_LOAD&&s.isPageReady())return _.info(S+".initTriggerOpening sent apperance: "+e.Apperance+" to open by timer"),this.openTriggerByTimer(e);var o=void 0,a=void 0;switch(t.Type){case b.VIEWABLE:o=[r],a=this.layer.viewableEvent;break;case b.HOVER_ON_UNIT:o=[this.containerBox],a="hover";break;case b.ENGAGEMENT:o=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),a="click";break;case b.PAGE_LOAD:o=[n.topWindow],a="load";break;default:return this.removeTrigger(e)}return o?(_.info(C,S+".initTriggerOpening attached event: "+a+" for Apperance: "+e.Apperance),this.setOpenTriggerEventHandler(o,a,e)):(_.errorM(S+".initTriggerOpening",S+".initTriggerOpening failed to find element to attach event "+a+" for apperance: "+e.Apperance),this)},L.prototype.setOpenTriggerEventHandler=function(e,t,o){var n=this,a=i.map(e,function(e){var i={attachedOn:e,fn:function(){this.onEventOpenTrigger(o)}.bind(n),eventName:t};return e.addEventListener(t,i.fn),i});if("load"===t){var l=i.get(o.currentOpenBehavior,"Duration",0);if(l>0){var d=""+w.PAGE_LOAD_FALLBACK+I(o),c=function(){this.onEventOpenTrigger(o)}.bind(this);a.push({attachedOn:r,eventName:d,fn:c}),r.addEventListener(d,c),setTimeout(function(){return r.fire(d)},1e3*l)}}var h=i.get(this.handlers,I(o,A.OPEN),[]);return i.isEmpty(h)?i.set(this.handlers,I(o,A.OPEN),a):s.push.apply(h,a),this},L.prototype.onEventOpenTrigger=function(e){return this.unbindTriggersEventHandlers(e,A.OPEN),this.openTriggerByTimer(e),this},L.prototype.openTriggerByTimer=function(e){var t=this,i=e.currentOpenBehavior.Delay;return _.info(C,S+".openTriggerByTimer open apperance "+e.Apperance+" in "+i+" seconds"),setTimeout(function(){return t.openTrigger(e,i>0)},1e3*i),this},L.prototype.openTrigger=function(e,t){var i=this;if(e.isAppended()||this.isFinished(e))e.isAppended()&&this.openAppendedTrigger(e);else{if(this.delayFromLastScroll>200&&t)return _.info(C,"Postponing trigger appearance "+e.Apperance+" opening by "+this.delayFromLastScroll+"mil-seconds due to scrolling"),setTimeout(function(){return i.openTrigger(e,t)},this.delayFromLastScroll),this;this.appendTrigger(e)}return this},L.prototype.appendTrigger=function(e){var t=this;return this.adsStore.getAd(e).then(function(i){e.appendTriggerStructure(),e.isAppended()?(e.appendTriggerStyle().injectAd(i).resetMalwareRefresh(),t.attachClickEventHandlers(e).setNextRefreshTime(e),(e instanceof Cbola.Common.AdTriggerBelowPushContent||e instanceof Cbola.Common.AdTriggerAbovePushContent)&&t.layer.iframeBuster.checkIframeDimension(e.adHeight+o.adTitleStructureTriviaHeight),e.closeTriggerButton&&e.closeTriggerButton.addEventListener("click",function(){d.setClick(t.elemId,e instanceof Cbola.Common.AdTriggerFixedFooter?v.FOOTER_AD_BUTTON_CLOSE:v.AD_BUTTON_CLOSE),t.removeTrigger(e)}),t.isViewabilityRefreshEnabled()&&e.updateViewability(),t.openAppendedTrigger(e)):(_.warnM(S+".appendTrigger",S+".appendTrigger failed to append trigger: "+e.Apperance+" in element ID: "+t.elemId+" - removing apperance"),t.removeTrigger(e))}).catch(function(){_.warnM(S+".appendTrigger",S+".appendTrigger failed to load first ad for apperance: "+e.Apperance+" in element ID: "+t.elemId+" - removing apperance"),t.removeTrigger(e)}),this},L.prototype.attachClickEventHandlers=function(e){var t=this.layer.container.querySelectorAll(".cbola-refresh-click-trigger");if(i.isEmpty(t)||e instanceof Cbola.Common.AdTriggerInItem)return this;var o=function(o){return i.map(t,function(t){var i={attachedOn:t,eventName:"click",fn:function(){o(e)}};return t.addEventListener("click",i.fn),i})},n="",r=[];if(e instanceof Cbola.Common.AdTriggerLeftInsideUnit?(n=A.REMOVE,r=o(this.removeTrigger.bind(this))):this.isClickRefreshEnabled()&&(n=A.REFRESH_CLICK,r=o(this.refreshTriggerOnClick.bind(this))),n.length>0&&r.length>0){var a=i.get(this.handlers,I(e,n),[]);i.isEmpty(a)?i.set(this.handlers,I(e,n),r):s.push.apply(a,r)}else _.info(C,"No refreshes allowed on click for element Id:"+this.elemId);return this},L.prototype.openAppendedTrigger=function(e){e.triggerElementsStyle(),i.isNil(this.layer.boxElem)||e.adScale(this.layer.boxElem.getBoundingClientRect().width),this.setWrapperHeight().setContainerOverflow().setWrapperMargin().closeTrigger(e)},L.prototype.refreshTriggerAd=function(t){var i=this,o="refreshTriggerAd";return t.isRefreshable()?this.adsStore.getAd(t).then(function(e){t.injectAd(e).resetMalwareRefresh(),_.info(Cbola.Logger.Colors.PALE_GREEN,S+"."+o+" injected ad for apperance: "+t.Apperance)}).catch(function(n){n instanceof Error?_.warnM(S+"."+o,S+"."+o+" failed injecting ad for trigger apperance: "+t.Apperance+", element ID: "+i.elemId+". Error: ",e):n===!0&&(t.stopRefresh(),_.info(C,S+"."+o+" No ads left, stopping refreshes for trigger apperance: "+t.Apperance+", element ID: "+i.elemId))}):_.info(C,S+"."+o+" stopped refreshing apperance: "+t.Apperance+", element Id: "+this.elemId),this},L.prototype.setNextRefreshTime=function(e){var t=this,i="setNextRefreshTime",o=void 0;if(!e.isRefreshable())return _.info(C,S+"."+i+" stopped due to all refreshes stop for trigger Apperance: "+e.Apperance),this;if(this.isViewabilityRefreshEnabled()&&!e.isViewable())return _.info(C,S+"."+i+" adding event listener pending viewability to trigger refreshing for Apperance: "+e.Apperance),this.setRefreshOnViewability(e),this;if(!this.isTimeoutRefreshEnabled()&&!this.isViewabilityRefreshEnabled())return _.info(C,"Refresh by timeout is not allowed for elementId: "+this.elemId),this;if(e.refreshFixedTime.length>0){var n=e.refreshFixedTime.shift();if(e.refreshFixedTime.forEach(function(e,t,i){i[t]=e-n}),o=1e3*n,o&&o>0)return _.info(C,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+o+"mili-sec."),e.refreshTimeoutId=setTimeout(function(){return t.refreshOnTimeout(e)},o),this}else if(o=e.refreshInterval||this.getRefreshInterval(),o&&o>0)return _.info("Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in: "+o+"mili-sec."),e.refreshTimeoutId=e.intervalRefreshTimeoutId=setTimeout(function(){return t.refreshOnTimeout(e)},o),this;return _.warnM(S+"."+i,S+"."+i+" stopped refreshing due to inability to set nextRefreshInterval for apperance "+e.Apperance+" in element Id: "+this.elemId),e.stopRefresh(),this},L.prototype.setRefreshOnViewability=function(e){var t={attachedOn:r,eventName:e.viewableEvent,fn:function(){_.info(C,S+".setRefreshOnViewability removed event listener pending viewability to trigger refreshing for Apperance: "+e.Apperance),this.unbindTriggersEventHandlers(e,A.REFRESH_VIEWABILITY),this.setNextRefreshTime(e)}.bind(this)};r.addEventListener(t.eventName,t.fn);var o=i.get(this.handlers,I(e,A.REFRESH_VIEWABILITY),[]);return i.isEmpty(o)?i.set(this.handlers,I(e,A.REFRESH_VIEWABILITY),[t]):o.push(t),this},L.prototype.refreshOnTimeout=function(e){var t=this;return e.setAdInjectionType(f.TIMEOUT),this.delayFromLastScroll>200?(_.info(C,"Delaying trigger apperance "+e.Apperance+" refresh by "+this.delayFromLastScroll+" mil-seconds due to scrolling"),setTimeout(function(){t.refreshOnTimeout(e)},this.delayFromLastScroll)):this.refreshTriggerAd(e).setNextRefreshTime(e),this},L.prototype.refreshTriggerOnClick=function(e){return e.isRefreshable()&&!this.isFinished(e)?(_.info(C,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" would try to refresh by click"),e.setAdInjectionType(f.CLICK),this.refreshTriggerAd(e),e.intervalRefreshTimeoutId&&(_.info(C,S+".refreshOnClick cleared timeout for apperance "+e.Apperance),clearTimeout(e.intervalRefreshTimeoutId),this.setNextRefreshTime(e))):(_.info(C,"Trigger apperance "+e.Apperance+" for element ID: "+this.elemId+" stops refresh by click"),this.unbindTriggersEventHandlers(e,A.REFRESH_CLICK)),this},L.prototype.closeTrigger=function(e){var t=e.closeBehaviors.shift();if(i.isNil(t))return _.info(C,"No closing behavior found for apperance: "+e.Apperance),this;if(e.isClose())return _.info(C,S+".closeTrigger trying to close already closed apperance: "+e.Apperance+" in element ID: "+this.elemId),this;if(e.currentCloseBehavior=t,t.Type===u.TIMER||t.Type===u.VIEWABLE&&this.layer.isViewable())return _.info(S+".closeTrigger sent apperance: "+e.Apperance+" to close by timer"),this.closeTriggerByTimer(e);var o=void 0,n=void 0;switch(t.Type){case u.VIEWABLE:o=[r],n=this.layer.viewableEvent;break;case u.HOVER_ON_UNIT:o=[this.containerBox],n="hover";break;case u.ENGAGEMENT:o=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),n="click";break;default:return this.removeTrigger(e)}return _.info(S+".closeTrigger attached event: "+n+" for Apperance: "+e.Apperance),this.setCloseTriggerEventHandler(o,n,e)},L.prototype.setCloseTriggerEventHandler=function(e,t,o){var n=this,r=i.map(e,function(e){var i={attachedOn:e,fn:function(){this.onEventCloseTrigger(o)}.bind(n),eventName:t};return e.addEventListener(t,i.fn),i}),a=i.get(this.handlers,I(o,A.CLOSE),[]);return i.isEmpty(a)?i.set(this.handlers,I(o,A.CLOSE),r):s.push.apply(a,r),this},L.prototype.onEventCloseTrigger=function(e){return this.unbindTriggersEventHandlers(e,A.CLOSE),this.closeTriggerByTimer(e),this},L.prototype.closeTriggerByTimer=function(e){var t=this,i=e.currentCloseBehavior.Duration;return this.FREEZE?this:(setTimeout(function(){t.FREEZE||t.isFinished(e)||(e.closeAnimation().setClose(),t.initTriggerOpening(e))},1e3*i),this)},L.prototype.removeTrigger=function(e){var t=this,i=void 0;return this.isFinished(e)?this:(this.pullTriggerFromArray(this.pendingTriggers,e).pullTriggerFromArray(this.activeTriggers,e).pushTriggerOnce(this.finishedTriggers,e).unbindTriggersEventHandlers(e),e.closeAnimation().setClose(),i=e instanceof Cbola.Common.AdTriggerLeftInsideUnit?5e3:0,_.info(C,S+".removeTrigger, removing trigger with apperance: "+e.Apperance+", in "+i+"mil-seconds"),setTimeout(function(){e.removeStyle().removeStructure(),clearTimeout(e.refreshTimeoutId),t.setWrapperHeight().setContainerOverflow().setWrapperMargin().startPendingTriggers(!1)},i),this)},L.prototype.setWrapperHeight=function(){var e=this.initialWrapperHeight,t=this.containerWrapper.style;return i.forEach(this.activeTriggers,function(t){e=e<t.wrapperHeight?t.wrapperHeight:e}),this.containerWrapper.offsetHeight!==e&&e>0&&!this.layer.isMobile()&&(t["height"]=e+"px"),this},L.prototype.setContainerOverflow=function(){for(var e="hidden",t=0;t<this.activeTriggers.length;t++){var i=this.activeTriggers[t];if(i.triggerOverflow){e=i.triggerOverflow;break}}return this.containerWrapper.style["overflow"]=e,this},L.prototype.setWrapperMargin=function(){for(var e=void 0,t=void 0,o=void 0,r=0;r<this.activeTriggers.length;r++){var a=this.activeTriggers[r];"undefined"!=typeof a.wrapperMarginLeft&&"auto"!==a.wrapperMarginLeft&&(e=a.wrapperMarginLeft,t="left",o="right"),"undefined"!=typeof a.wrapperMarginRight&&"auto"!==a.wrapperMarginRight&&(e=a.wrapperMarginRight,t="right",o="left")}return i.isNil(t)?(this.containerWrapper.style["margin-left"]=this.initialWrapperMarginLeft,this.containerWrapper.style["margin-right"]=this.initialWrapperMarginRight):(this.containerWrapper.style["margin-"+t]=e,"frbs61"===n.activePid&&(this.containerWrapper.style["margin-"+o]=0)),this},L.prototype.isActive=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Apperance",o=function(i){return i[t]===e[t]};return"Apperance"===t&&e instanceof Cbola.Common.AdTriggerInItem&&(o=function(t){return t.Apperance===e.Apperance&&t.spot===e.spot}),!i.isNil(i.find(this.activeTriggers,o))},L.prototype.isOverflowCollision=function(e){var t=T[e].overflow;if("undefined"==typeof t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(T[o].overflow!==t)return!0}return!1},L.prototype.isApperanceCollision=function(e){var t=T[e].collidesWith;if("undefined"==typeof t)return!1;for(var i=0;i<this.activeTriggers.length;i++){var o=this.activeTriggers[i].Apperance;if(t.indexOf(o)>-1)return!0}return!1},L.prototype.isFinished=function(e){return!i.isNil(i.find(this.finishedTriggers,function(t){return t.id===e.id}))},L.prototype.pullTriggerFromArray=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return i.remove(e,function(e){return e[o]===t[o]}),this},L.prototype.pushTriggerOnce=function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",o=0;o<e.length;o++){var n=e[o];if(n[i]===t[i]){if("Apperance"===i&&t instanceof Cbola.Common.AdTriggerInItem&&t.spot!==n.spot)continue;return this}}return e.push(t),this},L.prototype.getActiveTrigger=function(e,t){return e=parseInt(e),t=parseInt(t),i.find(this.activeTriggers,function(o){return o.Apperance===e&&(i.isNil(o.spot)&&isNaN(t)||o.spot===t)})},L.prototype.noFillFallback=function(e,t,i){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,a=this.getActiveTrigger(e,t);if("undefined"==typeof a)return!1;var s=a.getAdObjByBannerId(i),l=0;if(s&&(l=s.getID()),a instanceof Cbola.Common.AdTriggerInItemNoButtons&&setTimeout(function(){return r.fire(""+w.SKIP_SPOT+o.elemId+"_"+t)},5e3),s instanceof Cbola.Common.Ads.Tags.Waterfall&&a.getInjectionType()!==f.INJECT_PSA&&(this.adsStore.updateWaterfallPSACounter(a),this.adsStore.isWaterfallMaxPlacementPSA(a)?this.adsStore.removeWaterfallAdsForSize(a):(s.incrementPSACount(),s.isMaxedPSA()&&this.adsStore.removeWaterfallAd(s))),a.isRefreshable()){var c=null;if(4===n&&this.adsStore.isLowTierSupported(a)&&(d.setHbBidRequestProto([{TagId:this.adsStore.getRandomHbTagId(a),Status:g.REQUEST_LOW_TIER_MADE}]),c=this.adsStore.getLowTierFallbackAd(a)),c||(c=this.adsStore.getCPIFallbackAd(a)),c)return a.setAdInjectionType(f.WF_FALLBACK).injectAdToExistingBanner(c,i),d.setLastMile({tag_id:l}),!0}return a.preventBannerReplacement(i)?(d.setLastMile({tag_id:l}),!0):!1},L.prototype.malwareRefresh=function(e,t,o,n){var r=this,a=this.getActiveTrigger(e,t);i.isNil(a)||(a.getMalwareRefreshCount()<this.getMaxMalwareBlockRefresh()?(a.setAdInjectionType(n),this.adsStore.getAd(a).then(function(e){a.injectAdToExistingBanner(e,o).incrementMalwareRefresh()}).catch(function(e){r.injectPSA(a,o,e)})):this.injectPSA(a,o))},L.prototype.injectPSA=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,o="injectPSA";e.setAdInjectionType(f.INJECT_PSA).injectAdToExistingBanner(this.adsStore.getPSA(e),t).resetMalwareRefresh(),i instanceof Error?_.warnM(S+"."+o,S+"."+o+" failed injecting ad for trigger apperance: "+e.Apperance+", element ID: "+this.elemId+". Error: ",i):i===!0&&e.stopRefresh()},L.prototype.freezeAdsState=function(){return this.FREEZE=!0,i.forEach(this.activeTriggers,function(e){return e.stopRefresh()}),_.warn("AdTriggersManager froze ads process"),this},L.prototype.endAdsProcess=function(){var e=void 0;for(this.FREEZE||this.freezeAdsState();this.pendingTriggers.length>0;)e=this.pendingTriggers[0],this.pullTriggerFromArray(this.pendingTriggers,e);for(this.unbindTriggersEventHandlers();this.activeTriggers.length>0;)e=this.activeTriggers[0],this.removeTrigger(e);return _.info(C,S+" ended"),this},L.prototype.unbindTriggersEventHandlers=function(){for(var e=this,t=arguments.length,o=Array(t),n=0;t>n;n++)o[n]=arguments[n];var r=o.length>0&&i.isString(o[o.length-1])?o.pop():null,a=function(e){i.isEmpty(e)||i.forEach(e,function(e){e.attachedOn.removeEventListener(e.eventName,e.fn)})},s=function(e){i.forEach(A,function(t){a(e[t])})};return i.isEmpty(o)?(i.forEach(this.handlers,s),delete this.handlers):i.forEach(o,function(t){var o=I(t,r),n=i.get(e.handlers,o);i.isEmpty(n)||(r?(a(n[r]),delete n[r]):(s(n),i.unset(e.handlers,o)))}),this},L.prototype.managerReady=function(){var e=this;return this.isReady?Promise.resolve():new Promise(function(t){return e.resolvers.push(t)})},L.prototype.getRefreshInterval=function(){return i.get(this.adsData,"RefreshInterval")},L.prototype.getRefreshFixedTime=function(){var e=i.get(this.adsData,"RefreshFixedTime",null);return i.isArray(e)?e.slice(0):[]},L.prototype.getDelayLastScroll=function(){return 1e3*(i.get(this.adsData,"DelayLastScroll",null)||0)},L.prototype.getMaxMalwareBlockRefresh=function(){return x},L.prototype.isClickRefreshEnabled=function(){var e=i.isNil(this.adsData.RefreshType)?y.BOTH:this.adsData.RefreshType;return e===y.BOTH||e===y.CLICK},L.prototype.isViewabilityRefreshEnabled=function(){return i.get(this.adsData,"RefreshType")===y.VIEWABILITY},L.prototype.isTimeoutRefreshEnabled=function(){var e=i.isNil(this.adsData.RefreshType)?y.BOTH:this.adsData.RefreshType;return e===y.BOTH||e===y.TIMEOUT},L}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Factory=Cbola.PageAnalytics.Factory||function(){var e=Cbola.PageAnalytics.Reporters,t=function(){};return t.prototype.create=function(t){var i=Cbola.PageAnalytics.Reporters.TYPES_TO_NAMES_MAP,o=i.hasOwnProperty(t)&&i[t];return"undefined"!=typeof o&&o?e[o]:{}},new t}(),Cbola.PageAnalytics.Reporters.TYPES_TO_NAMES_MAP={scroll:"ScrollReporter",data:"Data",pageLoad:"PageLoadReporter"},window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.ReportersManager=Cbola.PageAnalytics.ReportersManager||function(){function e(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function t(){return{ClientVersion:Cbola.Env.clientVersion,PageViewId:r.PageProperties.cbola_pageViewId,PageId:r.PageId,WidgetId:c,DomainId:r.Domain,CategoryId:r.Category,PublisherId:r.activePid,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,AbTestId:n.abTestId,UserId:a.getUserId(),Second:o.getRunTimeInSecs(),IsMobile:r.PageProperties.isMobile,IsTablet:r.PageProperties.isTablet,isPortrait:r.PageProperties.isPortrait}}var i=Cbola._,o=Cbola.Utils,n=Cbola.Config,r=Cbola.Env,a=Cbola.Common.UserService,s=Cbola.Logger.getInstance(),l=Cbola.Logger.Colors,d=Cbola.PageAnalytics.Factory,c=0,h=[],m=function(){};return m.prototype={init:function(e,t){"string"==typeof e&&(c=t,e.replace(/\s/g,"").split(",").map(function(e){var t=d.create(e);i.isFunction(t.init)&&!h.some(function(t){return t.type===e})&&(h.push({type:e,reporter:t}),t.init(),s.info("Initialized reporter: "+e))}))},fireAnalytic:function(r){var a=r.analyticMethod,d=r.params,c=void 0===d?{}:d,h=r.onSuccess,m=void 0===h?!1:h,p=r.onError,u=void 0===p?!1:p;i.extend(c,t());var b={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:o.encodePayload(c)};fetch(""+n.Defaults.pageAnalyticsServer+a,b).then(e).then(function(e){s.info(l.PALE_PURPLE,"fired "+a+" page analytics to server."),m&&m(e)}).catch(function(e){s.trace(a+" failed."),u&&u(e)})},stopReporting:function(e){i.forEach(h,function(t){(i.isNil(e)||t.type===e)&&i.isFunction(t.reporter.stop)&&t.reporter.stop()})},isPrimary:function(){return!0}},o.isInIframe()&&!o.isWindowTopSupported()||i.get(window.top,"Cbola.Globals.ReportersManager",!1)?{isPrimary:function(){return!1}}:(window.top.Cbola=window.top.Cbola||{},window.top.Cbola.Globals=window.top.Cbola.Globals||{},window.top.Cbola.Globals.ReportersManager=window.top.Cbola.Globals.ReportersManager||new m,window.top.Cbola.Globals.ReportersManager)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.Data=Cbola.PageAnalytics.Reporters.Data||function(){function e(){u.removeEventListener(u.Events.LAYER_READY,e),g=t(),g&&o()}function t(){var e=window.top,t="pbjs";if(i(e[t]))return e[t];for(t in e)if(!/webkitStorageInfo|webkitIndexedDB/.test(t)&&e.hasOwnProperty(t)&&-1===t.indexOf("Cbola")&&i(e[t]))return e[t];return null}function i(e){return!d.isNil(e)&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"function"==typeof e.getBidResponses&&"function"==typeof e.getHighestCpmBids}function o(){v=[];var e=g.getBidResponses();C=g.getHighestCpmBids().map(function(e){return e.adId}),d.forEach(e,function(e){d.forEach(e.bids,n)}),v.length>0&&c.fireAnalytic({analyticMethod:h,params:{data:v}}),f=setTimeout(o,m)}function n(e){var t=e.adId;if(!(y[t]||e.cpm<0)){y[t]=!0;var i=("function"==typeof e.getSize?e.getSize():"0x0").split("x");v.push({r:r(e.bidder),l:l(e),j:Math.trunc(e.cpm*p),b:a(e.adUnitCode),t:i[0]*p,m:i[1]*p})}}function r(e){return _[e]||(_[e]=s(e)),_[e]}function a(e){return w[e]||(w[e]=s(e)),w[e]}function s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i);return t>0?Math.trunc(t*e.charCodeAt(e.length-1)/(10+e.charCodeAt(Math.round(e.length/2))%10)):0}function l(e){var t="function"==typeof e.getStatusCode?e.getStatusCode():b.ER.bStat;return t===b.SUC.bStat?C.indexOf(e.adId)>-1?b.HG.cStat:b.SUC.cStat:I(t)}var d=Cbola._,c=Cbola.PageAnalytics.ReportersManager,h="SetData",m=3e4,p=123450,u=Cbola.EventBus,b={
PND:{bStat:0,cStat:21},HG:{bStat:1,cStat:64},SUC:{bStat:1,cStat:86},FL:{bStat:2,cStat:21},TO:{bStat:3,cStat:21},ER:{bStat:-1,cStat:99}},f=null,g=null,y={},v=[],w={},_={},C=[],I=d.memoize(function(e){var t=d.find(b,function(t){return t.bStat===e});return t?t.cStat:b.ER.cStat}),x=function(){};return x.prototype={init:function(){u.addEventListener(u.Events.LAYER_READY,e)},stop:function(){clearTimeout(f)}},new x}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.PageLoadReporter=Cbola.PageAnalytics.Reporters.PageLoadReporter||function(){function e(){setTimeout(function(){var e=0,o=0;try{e=t.result(window.top,"performance.timing.fetchStart",0),o=t.result(window.top,"performance.timing.loadEventEnd",0)}catch(r){}e&&o&&i.fireAnalytic({analyticMethod:n,params:{EventId:Cbola.Enums.SetEventTypes.PAGE_LOAD_EVENT,SecondGlobal:Math.round(100*(o-e))/1e5}})},0)}var t=Cbola._,i=Cbola.PageAnalytics.ReportersManager,o=Cbola.Utils,n="SetEvent",r=function(){};return r.prototype={init:function(){o.pageReady(e)}},new r}(),window.Cbola=window.Cbola||{},Cbola.PageAnalytics=Cbola.PageAnalytics||{},Cbola.PageAnalytics.Reporters=Cbola.PageAnalytics.Reporters||{},Cbola.PageAnalytics.Reporters.ScrollReporter=Cbola.PageAnalytics.Reporters.ScrollReporter||function(){function e(){try{return window.top.scrollY||window.top.pageYOffset}catch(e){return 0}}function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=e(),d={Order:s++,PixelsFromTop:o};o!==i&&n.fireAnalytic({analyticMethod:r,params:d}),a=setTimeout(function(){t(o)},1e3*l.next().value)}function i(){d.cancel();try{window.top.removeEventListener("scroll",d)}catch(e){}t()}var o=Cbola._,n=Cbola.PageAnalytics.ReportersManager,r="SetScroll",a=void 0,s=1,l=function(){var e=1;return{next:function(){var t=30;return 2>=e?t=5:4>=e?t=10:6>=e&&(t=20),e++,{done:!1,value:t}}}}(),d=o.debounce(i,300,{leading:!1,maxWait:500,trailing:!0}),c=function(){};return c.prototype={init:function(){try{window.top.addEventListener("scroll",d)}catch(e){}},stop:function(){clearTimeout(a)}},new c}(),Cbola.isBrowserSupported&&(Cbola&&Cbola.bootstrapper?(Cbola.Common.TimelineService.mark("reinitialization of carambola.min.js"),Cbola.Logger.getInstance().info("Bootstrapper is already loaded")):(Cbola.Common.TimelineService.markStart("First time initialization carambola.min.js"),Cbola.bootstrapper=new Cbola.Bootstrapper,Cbola.taskManager=Cbola.TaskManager,Cbola.bootstrapper.init(),Cbola.Common.TimelineService.markEnd("First time initialization carambola.min.js")));
"use strict";function _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbola_layer_121.css"]=function(e){var t,i="";return i+=".cbola-d-trivia-multi,.cbola-d-trivia-multi *{box-sizing:border-box}.cbola-d-trivia-multi{width:100%;height:250px;position:relative;margin:0 auto;z-index:5;border:1px solid #ededed;overflow:hidden}.cbola-d-trivia-multi__body{width:100%;height:100%;position:relative;background-color:#fff}.cbola-d-trivia-multi__game{width:53.2%;max-width:calc(638px * .532);min-width:calc(478px * .532);height:100%;float:left;position:relative;z-index:10;transition:opacity .6s ease}h2.cbola-d-trivia-multi__game-header{color:#b7115e;background-color:#fff;font-size:18px!important;font-weight:400!important;line-height:25px;font-family:Oswald,\"Open Sans\",sans-serif!important;letter-spacing:0;text-transform:uppercase!important;height:62px!important;margin:0!important;padding:8px 10px 5px 8px;text-align:left!important;overflow:hidden;transition:opacity .6s ease-in;border:0}.cbola-d-trivia-multi-md h2.cbola-d-trivia-multi__game-header{font-size:16px!important}.cbola-d-trivia-multi-sm h2.cbola-d-trivia-multi__game-header{font-size:15px!important}h2.cbola-d-trivia-multi__game-header-game-end{color:#7b7b7b;opacity:.3}.cbola-d-trivia-multi__item-container{margin-left:8px;text-align:left}.cbola-d-trivia-multi__question-wrapper{width:105%;height:60px;padding-left:10px;border-radius:2px;overflow:visible!important;text-align:left!important;background:linear-gradient(to right,#b7115e 0,#b8115e 73%,rgba(184,17,94,.5) 100%)}.cbola-d-trivia-multi__question-wrapper:after{content:' ';position:absolute;width:0;height:0;left:21px;top:60px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #b7115e}.cbola-d-trivia-multi__question-container{width:calc(100% - 75px);height:100%;margin:0 5px 0 0!important;position:relative;overflow:hidden}.cbola-d-trivia-multi__answer-list-wrapper{width:95%;height:120px;padding-top:8px;position:relative;margin:0 5% 0 0;overflow:hidden}.cbola-d-trivia-multi__answer-list-container{width:100%;height:100%;overflow:hidden;margin:0;position:relative;text-align:left}.cbola-d-trivia-multi__next-game{position:absolute;top:8px;left:0;height:100%;width:100%;background-color:rgba(255,255,255,.3);opacity:1;transition:opacity .6s ease}.cbola-d-trivia-multi__start-next-button{position:absolute;top:calc(36% - 9px);left:50%;transform:translate(-50%,-50%);font-size:19px;font-weight:700;font-family:Oswald,'Open Sans',sans-serif;color:#fff;background-color:#b7115e;width:66%;padding:4px 0;text-transform:uppercase;cursor:pointer;text-align:center}.cbola-d-trivia-multi__start-next-button:hover{box-shadow:0 0 1px 3px #fff,0 0 1px 5px rgba(183,17,94,.5)}.cbola-page-item{transition:transform .6s ease-in}.cbola-page-item--prev{transform:translateX(-500px)}.cbola-page-item--active{transform:translateX(0)}.cbola-page-item--next{transform:translateX(500px)}.cbola-d-trivia-multi__content-wrapper{width:46.8%;max-width:calc(638px * .468);min-width:calc(478px * .468);height:100%;z-index:1;float:right;position:relative}.cbola-d-trivia-multi__image-wrapper{width:100%;height:100%;overflow:hidden;position:relative;z-index:1}.cbola-d-trivia-multi__share{position:absolute;right:0;top:0;height:30px;width:80px;padding-top:6px;font-size:18px;z-index:100;background:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,0) 1%,rgba(0,0,0,.35) 100%);transition:opacity .3s ease}.cbola-d-trivia-multi__share .cbola-icon{color:#fff;float:right;margin-right:5px;cursor:pointer}.cbola-d-trivia-multi-share__fb:hover{color:#3b5998}.cbola-d-trivia-multi-share__tw:hover{color:#3cf}.cbola-d-trivia-multi_image-container{width:100%;height:100%;position:relative;overflow:hidden}.cbola-d-trivia-multi-game-end{width:100%;height:100%;position:absolute;background-color:transparent;top:-100%;transition:transform .55s ease;z-index:100;color:#fff;box-shadow:inset 10px 10px 100px 24px rgba(0,0,0,.75)}.cbola-d-trivia-multi-game-end--active{transform:translateY(100%)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi_image-container .cbola-d-trivia-multi__image--active .cbola-d-trivia-multi__image{filter:blur(5px)}.cbola-ua-ie .cbola-d-trivia-multi-game-end{background-color:rgba(62,62,66,.7)}.cbola-d-trivia-multi-game-end--active~.cbola-d-trivia-multi__share{opacity:0;pointer-events:none}div.cbola-d-trivia-multi-game-end__container{padding-left:8%;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__container,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__container{padding-left:7%}.cbola-d-trivia-multi-game-end__score-container{width:100%;height:63px;padding-top:8px}.cbola-d-trivia-multi-game-end__score-container>div{display:inline-block}.cbola-d-trivia-multi-game-end__text{font-family:'Open Sans',Oswald,sans-serif;font-size:17px;text-transform:capitalize;max-width:calc(96% - 62px);min-width:152px;line-height:1em}.cbola-d-trivia-multi-game-end__score{font-family:'Open Sans',sans-serif;font-size:22px;font-weight:700;height:62px;width:62px;line-height:63px;border-radius:50%;background-color:#b7115e;text-align:center;letter-spacing:-1px;margin-right:2%;margin-left:2%}.cbola-d-trivia-multi-game-end__challenge,.cbola-d-trivia-multi-game-end__your-friends{text-transform:uppercase;font-size:28px;line-height:28px;font-family:'Open Sans',sans-serif;font-weight:100}.cbola-d-trivia-multi-game-end__social-container{display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center}.cbola-d-trivia-multi-game-end__share{overflow:hidden;color:#fff;display:-ms-flexbox;display:flex;-ms-flex:auto;flex:auto;-ms-flex-pack:start;justify-content:flex-start}.cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-game-end-share__tw{width:25px;height:25px;border:1px solid #fff;border-radius:50%;margin-left:5%;cursor:pointer;box-sizing:content-box;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.cbola-d-trivia-multi-game-end-share__fb{-ms-flex-align:end;align-items:flex-end;background-color:#3a5081;font-size:20px}.cbola-d-trivia-multi-game-end-share__fb>.cbola-icon-facebook{transform:translateY(1px)}.cbola-d-trivia-multi-game-end-share__fb:hover{background-color:#2b3c62}.cbola-d-trivia-multi-game-end-share__tw{-ms-flex-align:center;align-items:center;background-color:#41aae1;font-size:17px}.cbola-d-trivia-multi-game-end-share__tw>.cbola-icon-twitter{transform:none}.cbola-d-trivia-multi-game-end-share__tw:hover{background-color:#3389b6}.cbola-d-trivia-multi-game-end__teaser{width:100%;height:80px}p.cbola-d-trivia-multi-game-end__next-quiz{text-transform:uppercase;width:80px;font-family:\"Open Sans\",sans-serif!important;font-size:14px!important;font-weight:400!important;margin:0;text-align:left;color:#fff}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__text{font-size:15px;max-width:calc(96% - 55px)}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__score{font-size:18px;height:55px;width:55px;line-height:54px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end__share{font-size:19px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__tw{width:24px;height:24px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-game-end-share__tw{font-size:16px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__text{font-size:14px;max-width:calc(96% - 46px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__score{font-size:18px;height:46px;width:46px;line-height:45px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end__your-friends{letter-spacing:0;font-size:23px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__fb,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__tw{width:22px;height:22px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__fb{font-size:18px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-game-end-share__tw{font-size:15px}.cbola-d-trivia-multi__content-footer{height:30px;width:100%;background-color:rgba(40,40,40,.8);font-size:0;text-align:left!important;z-index:10;position:absolute;bottom:0}.cbola-d-trivia-multi__logo-container,.cbola-d-trivia-multi__progress-wrapper{display:inline-block;vertical-align:middle;height:100%}.cbola-d-trivia-multi__progress-wrapper{width:192px;overflow:hidden}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__progress-wrapper{width:167px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{width:154px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.9px}.cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-footer__your-score{font-family:Roboto,Arial,sans-serif;font-size:14px;font-weight:400;color:#fff;text-transform:capitalize;padding-right:3px;padding-left:4px}.cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-footer__score{font-family:Roboto,Arial,sans-serif;font-size:14px;color:#de3885;font-weight:600}.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-md .cbola-d-trivia-multi-footer__your-score{font-size:12px}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__progress,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__question,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__score,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi-footer__your-score{font-size:11px}.cbola-d-trivia-multi--pt .cbola-d-trivia-multi__progress-wrapper{padding-left:2px}.cbola-d-trivia-multi--pt.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__progress-wrapper{letter-spacing:-.7px;padding-left:1px}.cbola-d-trivia-multi__logo-container{width:calc(100% - 192px);float:right;position:relative;text-align:right}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__logo-container{width:calc(100% - 167px)}.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__logo-container{width:calc(100% - 154px)}.cbola-d-trivia-multi__logo{height:100%;cursor:pointer;margin:0 auto;opacity:1;max-width:95%}.cbola-d-trivia-multi__carambola_logo{background:url('"+(null==(t=e.clientPath)?"":t)+"css/assets/cbolaSprite.png') -61px -47px no-repeat;width:63px;height:15px;margin-right:6px}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__carambola_logo{margin-left:1px;margin-right:3px}.cbola-d-trivia-multi__logo-container:hover .cbola-d-trivia-multi__carambola_logo{opacity:.7}.cbola-d-trivia-multi__add-this{position:absolute;height:20px;padding:3px 5px;background-color:rgba(40,40,40,.8);color:#e6e6e6;text-transform:capitalize;font-size:12px;font-weight:300;top:-20px;right:0;width:166px;font-family:'Open Sans',sans;cursor:pointer;transition:opacity .2s ease-in}ul.cbola-d-trivia-multi__answers-list{list-style-type:none;padding:2px 0 0!important;margin:0!important;width:100%;height:100%;transition:transform .6s ease-in;position:absolute}ul.cbola-d-trivia-multi__answers-list li.cbola-d-trivia-multi__answer{width:98%;transition:opacity .2s ease-in;padding:0}ul.cbola-d-trivia-multi__three-answers li.cbola-d-trivia-multi__answer{margin:0 0 8px 2px}ul.cbola-d-trivia-multi__four-answers li.cbola-d-trivia-multi__answer{margin:0 0 4px 2px}ul.cbola-d-trivia-multi__four-answers-pairs{font-size:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer{display:inline-block;width:48%;height:56px;margin-left:0}ul.cbola-d-trivia-multi__four-answers-pairs li.cbola-d-trivia-multi__answer:nth-child(2n+1){margin-right:2.5%}.cbola-d-trivia-multi__answer:last-child{margin-bottom:0}.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:rgba(183,17,94,.5)}p.cbola-d-trivia-multi__answer-desc{margin:0!important;font-family:Roboto,Oswald,sans-serif;font-size:13px;color:#282828;background-color:#F4F4F4;vertical-align:middle;border-bottom-left-radius:2px;border-top-left-radius:2px;box-shadow:inset 0 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 1px 0 rgba(0,0,0,.1);cursor:pointer;overflow:hidden;padding:0;text-align:center}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc{text-align:left}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc{height:24px;line-height:24px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc,.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc{padding-left:6px;text-align:left}.cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc{height:46px;line-height:46px;border-radius:6px}.cbola-d-trivia-multi-md p.cbola-d-trivia-multi__answer-desc{font-size:12px}.cbola-d-trivia-multi-sm p.cbola-d-trivia-multi__answer-desc{font-size:11px}.cbola-d-trivia-multi__answers-letters p.cbola-d-trivia-multi__answer-desc:before{text-transform:uppercase;display:inline-block;color:#b7115e;font-family:'Open Sans',sans-serif;font-size:14px;font-weight:700;vertical-align:top;text-align:center;width:10%;max-width:20px;margin-right:4px;box-sizing:border-box;border-bottom-left-radius:2px;border-top-left-radius:2px;margin-left:2px}.cbola-d-trivia-multi__three-answers p.cbola-d-trivia-multi__answer-desc:before{height:30px;line-height:30px}.cbola-d-trivia-multi__four-answers p.cbola-d-trivia-multi__answer-desc:before{height:24px;line-height:24px}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(1) .cbola-d-trivia-multi__answer-desc:before{content:'a'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(2) .cbola-d-trivia-multi__answer-desc:before{content:'b'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(3) .cbola-d-trivia-multi__answer-desc:before{content:'c'}.cbola-d-trivia-multi__answers-letters .cbola-d-trivia-multi__answers-list .cbola-d-trivia-multi__answer:nth-child(4) .cbola-d-trivia-multi__answer-desc:before{content:'d'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{height:20px;width:20px;margin-top:13px;border:1px solid #b7115e;border-radius:50%;line-height:1.3em}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{width:0;box-sizing:border-box;height:30px;margin-top:0;margin-left:0;padding-left:0;border-top-left-radius:0;border-bottom-left-radius:0;border-bottom:30px solid transparent;content:\" \"!important}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:before{position:absolute;color:#fff;text-transform:uppercase;font-family:'Open Sans',sans;font-size:14px;font-weight:600;line-height:1.1em;padding-left:4px}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(1):before{content:'a'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(2):before{content:'b'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(3):before{content:'c'}.cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__answers-list.cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer:nth-child(4):before{content:'d'}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc{background-color:#33cf4d;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc{background-color:#727272;color:#fff}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade{opacity:.3}li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-fade:hover p.cbola-d-trivia-multi__answer-desc{background-color:#F4F4F4!important}.cbola-d-trivia-multi_image-loader{height:100%;width:100%;position:absolute;transition:transform .6s ease-in;z-index:1}.cbola-d-trivia-multi__image{height:100%;width:100%;position:relative;background-position-x:50%;background-position-y:-1%;background-size:auto;background-repeat:no-repeat;background-color:transparent}.cbola-d-trivia-multi__image--prev{transform:translateX(-101%)}.cbola-d-trivia-multi__image--active{transform:translateX(0)}.cbola-d-trivia-multi__image--next{transform:translateX(101%)}div.cbola-d-trivia-multi__question{position:absolute;overflow:hidden;height:100%;width:100%}.cbola-d-trivia-multi__question p{font-size:14px;color:#fff;font-family:\"Open Sans\",sans-serif!important;margin:-2px 0 0!important;padding:0!important;font-weight:400!important;line-height:normal;text-align:left}.cbola-d-trivia-multi-md .cbola-d-trivia-multi__question p,.cbola-d-trivia-multi-sm .cbola-d-trivia-multi__question p{font-size:13px;margin:0!important;line-height:16px}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["cbola_layer_121_theme.css"]=function(e){var t,i="";Array.prototype.join;return i+=".cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer p.cbola-d-trivia-multi__answer-desc:before{color:"+(null==(t=e.InContentThemeColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{background-color:"+(null==(t=Cbola.Utils.rgbToRgba(e.InContentThemeColor,.5))?"":t)+";color:"+(null==(t=e.DesktopMultiTriviaFontColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#33cf4d}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer li.cbola-d-trivia-multi__answer-correct.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc{color:#fff;background-color:#727272}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer li.cbola-d-trivia-multi__answer-wrong.cbola-d-trivia-multi__answer:hover p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-correct p.cbola-d-trivia-multi__answer-desc:before,.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer li.cbola-d-trivia-multi__answer.cbola-d-trivia-multi__answer-wrong p.cbola-d-trivia-multi__answer-desc:before{color:#fff}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__circle-answer .cbola-d-trivia-multi__four-answers-pairs p.cbola-d-trivia-multi__answer-desc:before{border:1px solid}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__answers-letters.cbola-d-trivia-multi__tabbed-answer .cbola-d-trivia-multi__four-answers-pairs .cbola-d-trivia-multi__answer p.cbola-d-trivia-multi__answer-desc:before{border-left:30px solid ",i+=e.InContentThemeColor?" "+(null==(t=e.InContentThemeColor)?"":t)+" ":" #b7115e ",i+="}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-in-content-trivia-container__inner{padding-bottom:"+(null==(t=e.PaddingBottomCover)?"":t)+"px!important;margin-top:"+(null==(t=e.MarginTopCover)?"":t)+"px!important;margin-bottom:"+(null==(t=e.MarginBottomCover)?"":t)+"px!important;max-width:"+(null==(t=e.MaxInContentTriviaWidth)?"":t)+"px!important;min-width:"+(null==(t=e.DesktopInContentMinWidth)?"":t)+"px!important}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__body{border-color:"+(null==(t=e.DesktopMultiTriviaBorderColor)?"":t)+";background-color:"+(null==(t=e.DesktopMultiTriviaBackgroundColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer h2.cbola-d-trivia-multi__game-header{color:"+(null==(t=e.InContentThemeColor)?"":t)+";background-color:"+(null==(t=e.DesktopMultiTriviaBackgroundColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__question-wrapper{background:-moz-linear-gradient(left,"+(null==(t=e.InContentThemeColor)?"":t)+" 0,"+(null==(t=e.InContentThemeColor)?"":t)+" 73%,"+(null==(t=Cbola.Utils.rgbToRgba(e.InContentThemeColor,.5))?"":t)+" 100%);background:-webkit-linear-gradient(left,"+(null==(t=e.InContentThemeColor)?"":t)+" 0,"+(null==(t=e.InContentThemeColor)?"":t)+" 73%,"+(null==(t=Cbola.Utils.rgbToRgba(e.InContentThemeColor,.5))?"":t)+" 100%);background:linear-gradient(to right,"+(null==(t=e.InContentThemeColor)?"":t)+" 0,"+(null==(t=e.InContentThemeColor)?"":t)+" 73%,"+(null==(t=Cbola.Utils.rgbToRgba(e.InContentThemeColor,.5))?"":t)+" 100%)}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi-game-end__score,.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__start-next-button{background-color:"+(null==(t=e.InContentThemeColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__question-wrapper:after{border-top-color:"+(null==(t=e.InContentThemeColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__start-next-button:hover{background-color:"+(null==(t=e.InContentThemeColor)?"":t)+";box-shadow:0 0 1px 3px ",i+=e.DesktopMultiTriviaBackgroundColor?" "+(null==(t=e.DesktopMultiTriviaBackgroundColor)?"":t)+" ":"#fff ",i+=",0 0 1px 5px ",i+=Cbola.Utils.rgbToRgba(e.InContentThemeColor,.5)?" "+(null==(t=Cbola.Utils.rgbToRgba(e.InContentThemeColor,.5))?"":t)+" ":"rgba(183,17,94,.5) ",i+="}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi-game-end{background-image:",i+=e.DesktopMultiTriviaEndGameImg?" url('"+(null==(t=e.DesktopMultiTriviaEndGameImg)?"":t)+"') ":"null",i+=";background-size:auto;background-position:0 50%;background-repeat:no-repeat;cursor:",i+=e.DesktopMultiTriviaEndGameLink?"pointer":"default",i+="}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__next-game{background-color:"+(null==(t=Cbola.Utils.rgbToRgba(e.DesktopMultiTriviaBackgroundColor,.3))?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi-footer__progress,.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi-footer__score{color:"+(null==(t=e.MultiTriviaProgressFontColor)?"":t)+"}.cbola-wid-"+(null==(t=e.wid)?"":t)+".cbola-elem-id-"+(null==(t=e.elementId)?"":t)+".cbola-layer .cbola-d-trivia-multi__logo-container{display:",i+=e.RemovePoweredByCarambola?" none ":" block",i+="}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_answers.html"]=function(e){var t,i="";Array.prototype.join;return Cbola._.forEach(e.Items,function(e,o){i+='\r\n  <ul class="cbola-d-trivia-multi__answers-list cbola-page-item cbola-page-item-',i+=0===o?"-active":"-next",i+=" cbola-d-trivia-multi__",i+=4===e.Answers.length?"four":"three",i+="-answers",e.Type===Cbola.InContent.Layers.Item.Types.TRIVIA_MULTI_PAIRS&&(i+="-pairs"),i+='">\r\n    ',Cbola._.forEach(e.Answers,function(e){i+='\r\n      <li class="cbola-d-trivia-multi__answer" data-answer-id="'+(null==(t=e.Id)?"":t)+'">\r\n        <p class="cbola-d-trivia-multi__answer-desc">'+(null==(t=e.Title)?"":t)+"</p>\r\n      </li>\r\n    "}),i+="\r\n  </ul>\r\n"}),i}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_image.html"]=function(e){var t="";Array.prototype.join;return Cbola._.forEach(e.Items,function(e,i){t+='\r\n<div class="cbola-d-trivia-multi_image-loader cbola-d-trivia-multi__image--',t+=0===i?"active":"next",t+='" ',e.Link&&(t+=' style="cursor:pointer"'),t+='>\r\n  <div class="cbola-loader"></div>\r\n  <div class="cbola-d-trivia-multi__image"></div>\r\n</div>\r\n'}),t}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["desktop_trivia_multi_questions.html"]=function(e){var t,i="";Array.prototype.join;return Cbola._.forEach(e.Items,function(e,o){i+='\r\n  <div class="cbola-d-trivia-multi__question cbola-ghost-center-container cbola-page-item cbola-page-item--',i+=0===o?"active":"next",i+='" ',e.Link&&(i+='style="cursor:pointer"'),i+='>\r\n    <p class="cbola-ghost-center-inner">\r\n      '+(null==(t=e.Description)?"":t)+"\r\n    </p>\r\n  </div>\r\n"}),i}}(),Cbola.Templates["desktop_trivia_multi_view.html"]='<div class="cbola-d-trivia-multi unselectDrag">\n  <div class="cbola-d-trivia-multi__body">\n    <div class="cbola-d-trivia-multi__game">\n      <h2 class="cbola-d-trivia-multi__game-header"></h2>\n      <div class="cbola-d-trivia-multi__item-container">\n        <div class="cbola-d-trivia-multi__question-wrapper cbola-ghost-center-container">\n          <div class="cbola-d-trivia-multi__question-container cbola-ghost-center-inner">\n          </div>\n          <div class="cbola-d-trivia-multi__timer-placeholder cbola-ghost-center-inner">\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__answer-list-wrapper">\n          <div class="cbola-d-trivia-multi__answer-list-container cbola-refresh-click-trigger"></div>\n          <div class="cbola-d-trivia-multi__next-game cbola-hidden">\n            <div class="cbola-d-trivia-multi__start-next-button"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="cbola-d-trivia-multi__content-wrapper">\n      <div class="cbola-d-trivia-multi__image-wrapper">\n        <div class="cbola-d-trivia-multi-game-end">\n          <div class="cbola-d-trivia-multi-game-end__container">\n            <div class="cbola-d-trivia-multi-game-end__score-container cbola-ghost-center-container">\n              <div class="cbola-d-trivia-multi-game-end__text cbola-ghost-center-inner">you scored a fair</div>\n              <div class="cbola-d-trivia-multi-game-end__score cbola-ghost-center-inner">5/10</div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__challenge">challenge</div>\n            <div class="cbola-d-trivia-multi-game-end__social-container">\n              <div class="cbola-d-trivia-multi-game-end__your-friends">your friends</div>\n              <div class="cbola-d-trivia-multi-game-end__share">\n                <div class="cbola-d-trivia-multi-game-end-share__fb">\n                  <i class="cbola-icon cbola-icon-facebook"></i>\n                </div>\n                <div class="cbola-d-trivia-multi-game-end-share__tw">\n                  <i class="cbola-icon cbola-icon-twitter"></i>\n                </div>\n              </div>\n            </div>\n            <div class="cbola-d-trivia-multi-game-end__teaser cbola-ghost-center-container">\n              <p class="cbola-d-trivia-multi-game-end__next-quiz cbola-ghost-center-inner">next quiz starts in:</p>\n              <div class="cbola-d-trivia-multi-game-end__timer-placeholder cbola-ghost-center-inner">\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="cbola-d-trivia-multi__share">\n          <i class="cbola-icon cbola-icon-facebook cbola-d-trivia-multi-share__fb"></i>\n          <i class="cbola-icon cbola-icon-twitter cbola-d-trivia-multi-share__tw"></i>\n        </div>\n        <div class="cbola-d-trivia-multi_image-container">\n        </div>\n        <div class="cbola-d-trivia-multi__content-footer">\n          <div class="cbola-d-trivia-multi__progress-wrapper cbola-ghost-center-container">\n            <span class="cbola-d-trivia-multi-footer__your-score cbola-ghost-center-inner">your score</span>\n            <span class="cbola-d-trivia-multi-footer__score cbola-ghost-center-inner">0</span>\n            <span class="cbola-d-trivia-multi-footer__question cbola-ghost-center-inner">question</span>\n            <span class="cbola-d-trivia-multi-footer__progress cbola-ghost-center-inner">1/10</span>\n          </div>\n          <div class="cbola-d-trivia-multi__logo-container cbola-ghost-center-container">\n            <div class="cbola-d-trivia-multi__add-this cbola-fade-out">add this widget to your site</div>\n            <div class="cbola-d-trivia-multi__logo cbola-d-trivia-multi__carambola_logo cbola-ghost-center-inner"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';
var _createClass2=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.TimerBase=function(){var e=Cbola.EventBus,t=10,i=function(){function i(){_classCallCheck(this,i),this.running=!1,this.startTime=0,this.lastUnfilledStrike=0,this.frameRequestId=null,this.enablementStatus=!0,this.timerEndedEvent=""+e.Events.TIMER_ENDED+Math.floor(1e3*Math.random())}return _createClass(i,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return this.setDuration(e),this}},{key:"setDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return this.duration=e,this.reset(),this}},{key:"reset",value:function(){return this.stopTimer(),this.frameRequestId=null,this.startTime=0,this.running=!1,this}},{key:"startTimer",value:function(){return this.enablementStatus&&(this.reset(),this.running=!0,this.startTime=Date.now(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))),this}},{key:"runTimer",value:function(){var e=Date.now()-this.startTime;return e>1e3*this.duration?void this.timerEnded():void(this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)))}},{key:"stopTimer",value:function(){return cancelAnimationFrame(this.frameRequestId),this.running=!1,this}},{key:"timerEnded",value:function(){this.running=!1,e.fire(this.timerEndedEvent,{detail:this})}},{key:"getTimerEndedEvent",value:function(){return this.timerEndedEvent}},{key:"isRunning",value:function(){return this.running}},{key:"enable",value:function(){return this.enablementStatus=!0,this}},{key:"disable",value:function(){return this.enablementStatus=!1,this}},{key:"isEnabled",value:function(){return this.enablementStatus}}]),i}();return i}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["countdown_timer.html"]=function(e){var t,i="";return i+='<div class="cbola-countdown-timer-wrapper">\r\n  <div class="cbola-countdown-timer__time"></div>\r\n  <div class="cbola-countdown-timer__seconds">'+(null==(t=e.seconds)?"":t)+"</div>\r\n</div>\r\n"}}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,o)}if("value"in n)return n.value;var r=n.get;return void 0===r?void 0:r.call(o)};Cbola.InContent.Components.CountdownTimer=function(){var e=Cbola._,t=Cbola.Common.UserService,i=Cbola.InContent.Components.TimerBase,o=function(i){function o(){_classCallCheck(this,o);var e=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return e.appended=!1,e.template=o.TEMPLATE+".html",e}return _inherits(o,i),_createClass(o,[{key:"init",value:function(e){return this.getElements(),_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"init",this).call(this,e),this}},{key:"getElements",value:function(){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(this.template,{seconds:t.vocabulary("seconds")}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-countdown-timer-wrapper"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-countdown-timer__time")}},{key:"getTimerWrapperElement",value:function(){return this.timerWrapper}},{key:"reset",value:function(){return _get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"reset",this).call(this),this.updateTimeDisplayElem(this.duration),this}},{key:"replacePlaceholder",value:function(t){var i=this,o=t.parentElement;return e.isNil(o)?"":(this.appended||(this.timerPlaceholder=o.replaceChild(this.timerElemFragment,t),e.forEach(t.classList,function(e){i.timerWrapper.classList.add(e)}),this.appended=!0),this)}},{key:"removeTimer",value:function(){this.appended&&(this.timerWrapper.parentElement.replaceChild(this.timerPlaceholder,this.timerWrapper),this.appended=!1)}},{key:"startTimer",value:function(){return this.appended&&_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"startTimer",this).call(this),this}},{key:"runTimer",value:function(){return Date.now()-this.startTime>1e3*this.duration?(this.timerEnded(),this):(this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this)),this)}},{key:"updateTimeDisplayElem",value:function(e){return e=e||this.duration-Math.floor((Date.now()-this.startTime)/1e3),e!==this.prevDisplayedTime&&this.timerTimeElem?(this.timerTimeElem.textContent=e,this.prevDisplayedTime=e,!0):!1}},{key:"stopTimer",value:function(){return this.appended&&cancelAnimationFrame(this.frameRequestId),this}},{key:"timerEnded",value:function(){_get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"timerEnded",this).call(this),this.updateTimeDisplayElem("0")}},{key:"isAppended",value:function(){return this.appended}}]),o}(i);return o.TEMPLATE="countdown_timer",o}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Styles"]=window["Cbola"]["Styles"]||{},window["Cbola"]["Styles"]["Compiled"]=window["Cbola"]["Styles"]["Compiled"]||{},window["Cbola"]["Styles"]["Compiled"]["spinner_timer.css"]=function(e){var t="";return t+=".cbola-spinner-timer__wrapper{height:44px;width:44px;position:relative;transform:translateZ(0)}.cbola-spinner-timer__time{color:#fff;font-family:Oswald,sans-serif!important;font-size:20px!important;font-weight:400!important;position:absolute;top:48%;left:50%;transform:translate(-50%,-50%)}.cbola-spinner-timer__strikes{position:absolute;top:1px;left:31px}.cbola-spinner-timer__section{position:absolute;top:0;left:0;opacity:0;width:11px;max-width:11px;height:6px}.cbola-spinner-timer__section path{stroke:#fff;stroke-width:3}.cbola-spinner-timer__section:nth-of-type(1){transform:translate(-12px,-2px) rotate(7deg)}.cbola-spinner-timer__section:nth-of-type(2){transform:translate(-3px,2px) rotate(37deg)}.cbola-spinner-timer__section:nth-of-type(3){transform:translate(3px,10px) rotate(68deg)}.cbola-spinner-timer__section:nth-of-type(4){transform:translate(4px,20px) rotate(96deg)}.cbola-spinner-timer__section:nth-of-type(5){transform:translate(0,29px) rotate(126deg)}.cbola-spinner-timer__section:nth-of-type(6){transform:translate(-8px,35px) rotate(158deg)}.cbola-spinner-timer__section:nth-of-type(7){transform:translate(-18px,36px) rotate(188deg)}.cbola-spinner-timer__section:nth-of-type(8){transform:translate(-27px,32px) rotate(218deg)}.cbola-spinner-timer__section:nth-of-type(9){transform:translate(-33px,24px) rotate(245deg)}.cbola-spinner-timer__section:nth-of-type(10){transform:translate(-34px,14px) rotate(279deg)}.cbola-spinner-timer__section:nth-of-type(11){transform:translate(-30px,5px) rotate(307deg)}.cbola-spinner-timer__section:nth-of-type(12){transform:translate(-22px,-1px) rotate(340deg)}"}}(),function(){window["Cbola"]=window["Cbola"]||{},window["Cbola"]["Templates"]=window["Cbola"]["Templates"]||{},window["Cbola"]["Templates"]["Compiled"]=window["Cbola"]["Templates"]["Compiled"]||{},window["Cbola"]["Templates"]["Compiled"]["spinner_timer.html"]=function(e){var t="";Array.prototype.join;t+='<div class="cbola-spinner-timer__wrapper">\r\n  <div class="cbola-spinner-timer__time"></div>\r\n  <div class="cbola-spinner-timer__strikes">\r\n    ';for(var i=0;i<e.curvesNum;i++)t+='\r\n    <svg class="cbola-spinner-timer__section">\r\n      <path d="M 1,4 C4.5,3.2 6.5,3.2 10,4"/>\r\n    </svg>\r\n    ';return t+="\r\n  </div>\r\n</div>\r\n"}}();var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),_get=function e(t,i,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,i);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,o)}if("value"in n)return n.value;var r=n.get;return void 0===r?void 0:r.call(o)};window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Components=Cbola.InContent.Components||{},Cbola.InContent.Components.SpinnerTimer=function(){var e=Cbola.Common.FontsManager,t=12,i=(Cbola.Utils,Cbola._),o=function(o){function n(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var o=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o.template="spinner_timer.html",o.type=i.type||n.RUN,o.tailLength=i.tailLength&&i.tailLength<t?i.tailLength:Math.round(.66*t),o.lastUnfilledStrike=0,e.getOswald(),o}return _inherits(n,o),_createClass(n,[{key:"init",value:function(e){return _get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"init",this).call(this,e),this.strikeOpacityIncrement=parseFloat((Math.floor(1/this.tailLength*100)/100).toFixed(2)),this}},{key:"setDuration",value:function(e){this.timerTimeElem.textContent=e,this.prevDisplayedTime=e,this.strikeUnFillPerSec=this.strikes.length/e,_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"setDuration",this).call(this,e)}},{key:"getElements",value:function(){this.timerElemFragment=Cbola.Templates.createFragmentFromTemplate(this.template,{curvesNum:t}),this.timerWrapper=this.timerElemFragment.querySelector(".cbola-spinner-timer__wrapper"),this.strikes=this.timerElemFragment.querySelectorAll(".cbola-spinner-timer__section"),this.timerTimeElem=this.timerElemFragment.querySelector(".cbola-spinner-timer__time")}},{key:"reset",value:function(){this.stopTimer(),this.frameRequestId=null,this.lastUnfilledStrike=0,this.startTime=0;for(var e=this.type===n.UNFILL?1:0,t=0;t<this.strikes.length;t++)this.strikes[t].style["opacity"]=e;return this.updateTimeDisplayElem(this.duration),this}},{key:"replacePlaceholder",value:function(e){return i.isUndefined(this.styleElem)&&(this.styleElem=Cbola.Styles.injectMainStyle(document,"spinner_timer.css")),_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"replacePlaceholder",this).call(this,e)}},{key:"startTimer",value:function(){if(!this.appended)return this;this.reset(),this.startTime=(new Date).getTime();var e=this.type===n.UNFILL?this.unFillTimer:this.runTimer;return this.frameRequestId=requestAnimationFrame(e.bind(this)),this}},{key:"unFillTimer",value:function(){var e=Date.now()-this.startTime;if(e>=1e3*this.duration){for(var t=this.lastUnfilledStrike;t<this.strikes.length;t++)this.strikes[t].style["opacity"]=0;return void this.timerEnded()}var i=Math.floor(e*this.strikeUnFillPerSec/1e3),o=this.updateTimeDisplayElem();if(o){for(var n=this.lastUnfilledStrike;i>=0&&i>n;n++)this.strikes[n].style["opacity"]=0;this.lastUnfilledStrike=i}this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.unFillTimer.bind(this))}},{key:"runTimer",value:function(){var e=Date.now()-this.startTime,t=0;if(e>1e3*this.duration)return void this.timerEnded();var i=Math.floor(e%1e3/1e3*this.strikes.length),o=void 0;o=1e3>e?i>=this.tailLength?i-this.tailLength:0:i>=this.tailLength?i-this.tailLength:this.strikes.length-(this.tailLength-i);for(var n=o;n!==i;)this.strikes[n].style["opacity"]=t,t+=this.strikeOpacityIncrement,n++,n===this.strikes.length&&(n=0);this.strikes[i].style["opacity"]=1,this.updateTimeDisplayElem(),this.frameRequestId=requestAnimationFrame(this.runTimer.bind(this))}}]),n}(Cbola.InContent.Components.CountdownTimer);return o.Types={RUN:1,UNFILL:2},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var e=Cbola.Common.UserService,t=function(){},i="https://www.facebook.com",o="/dialog/share",n="264749280348555";return t.prototype.getGameEndedText=function(t){var i=e.vocabulary("YouScoredaRidiculous");return t>.9?i=e.vocabulary("youScoredaPerfect"):t>.8?i=e.vocabulary("YouScoredanAwesome"):t>.6?i=e.vocabulary("YouScoredaMighty"):t>.4?i=e.vocabulary("YouScoredaFair"):t>.2&&(i=e.vocabulary("YouScoredaLame")),i},t.prototype.shareOnFacebook=function(e){var t=""+i+o+"?app_id="+n+"&href="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e,!0))+"&quote="+encodeURIComponent(e.text)+"&redirect_uri="+encodeURIComponent(i);window.open(t,"_blank","width=560,height=380")},t.prototype.shareOnTwitter=function(e){Cbola.Utils.getBitlyUrlAsync(e,function(t){window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.title+" "+e.text)+"&url="+encodeURIComponent(t),"_blank","width=560,height=380")})},new t}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.CommonTriviaLayer=function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.InContent.Layers.Services.TriviaService,o=Cbola.Common.AnalyticsService,n=Cbola.InContent.Layers.TriviaUtils,a=Cbola.Common.UserService,r=Cbola.Enums.ItemViewTypes,s=Cbola.EventBus,l="CommonTriviaLayer",d=i.triviaTypes.TRUE_FALSE,c=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1},m=Cbola.InContent.Layers.Base.prototype;return e.extend(c.prototype,m),c.prototype.init=function(){m.init.call(this)},c.prototype.setOptions=function(e){this.options=e},c.prototype.onBeforeLoad=function(){t.debug(l+"::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.adjustLanguage(),this.view.reset()},c.prototype.onLoad=function(){var e=this;t.debug(l+"::onLoad"),i.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){e.game=t,e.game&&(e.view.setTitle(e.game.title),e.view.addItems(e.game.items),e.view.attach(e.container),e.view.gotoQuestion(0,e.game.getCurrentQuestionItem().Answers),e.view.onLoad(),s.fire(s.Events.LAYER_READY,e))})},c.prototype.onUserAnswered=function(e,t){this.setItemsViewability(!1,e,r.ON_NEXT_BTN);var i=this.game.answerCurrentQuestion(e);this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,t,i,this.afterAnswerFeedbackAnimation.bind(this))},c.prototype.afterAnswerFeedbackAnimation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.game.isCompleted?(this.setGameViewability(!0,e).reportAndClearItems(),this.onGameEnded()):this.selectInGameAction(e)},c.prototype.selectInGameAction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.setItemsViewability(!0,0,e?r.ON_NEXT_AUTOPLAY:r.ON_NEXT_BTN),this.pageToNextQuestion(e)},c.prototype.pageToNextQuestion=function(){var e=this.game.getCurrentQuestionNumber();this.view.gotoQuestion(e-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress(e+"/10"),this.reportAndClearItems()},c.prototype.onGameEnded=function(){var e=this;i.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(i){null===i&&t.warnM(l+".onGameEnded",l+"::onGameEnded -> No new game available, doing nothing"),e.nextGame=i,e.view.applyGameEndedUI(),e.view.gameEndingScreen.setGameEndedText(n.getGameEndedText(e.game.score/e.game.items.length)).setNextGameUI(e.nextGame).toggleGameEndedAnimation(!0)})},c.prototype.startNextGame=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.setGameViewability(!1,e),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game.setViewable(!0),this.setItemsViewability(!0,0,r.ON_NEXT_BTN),this.reportAndClearItems()},c.prototype.getGameScore=function(){return this.game.score},c.prototype.onBecameViewable=function(t){m.onBecameViewable.call(this),e.isNil(this.game)||this.setLayerViewability(!0,t).reportAndClearItems()},c.prototype.onBecameUnviewable=function(){m.onBecameUnviewable.call(this),e.isNil(this.game)||this.setLayerViewability(!1).reportAndClearItems()},c.prototype.onMouseEnter=function(){o.setPageElementView(this.elementId,r.ON_HOVER,r.NONE)},c.prototype.onShareInGame=function(e){var t=void 0,i=void 0;t=this.game.getCurrentQuestionItem(),i={text:t.Description,title:t.ChartTitle||this.game.shortTitle,image:0!==t.Image.indexOf("http")?"https:"+t.Image:t.Image,ParentId:t.ParentId},2===t.Answers.length&&(i.text+=". "+t.Answers[0].Title+" or "+t.Answers[1].Title),this.isFacebookShare(e)?(i.text="I've just played an interactive trivia widget within this article. Check it out",n.shareOnFacebook(i),o.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,t)):this.isTwitterShare(e)&&(n.shareOnTwitter(i),o.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,t))},c.prototype.onShareEndGame=function(e){var t=void 0,i=void 0;i=this.game.getQuestionItem(this.game.items.length-1);var r=this.game.title.replace(/<br\s*\/?>/gi,"");t={text:a.vocabulary("canYouBeatThat"),title:a.vocabulary("iScored")+" "+this.game.score+"/10 "+a.vocabulary("playingIn")+' "'+r+'"',image:0!==i.Image.indexOf("http")?"https:"+i.Image:i.Image,ParentId:i.ParentId},this.isFacebookShare(e)?(t.text="I scored "+this.game.score+'/10 in "'+r+'" when playing an interactive trivia widget within this article. Check it out.',n.shareOnFacebook(t),o.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,i)):this.isTwitterShare(e)&&(n.shareOnTwitter(t),o.setClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,i))},c.prototype.isFacebookShare=function(e){for(;e.parentNode&&!/__share/g.test(e.className);){if(/__fb/g.test(e.className))return!0;e=e.parentNode}return!1},c.prototype.isTwitterShare=function(e){for(;e.parentNode&&!/__share/g.test(e.className);){if(/__tw/g.test(e.className))return!0;e=e.parentNode}return!1},c.prototype.onPoweredBy=function(e){var t=this.options.BrandRedirect||Cbola.Config.brandRedirectTemplate({layerType:this.type});o.setClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),e&&o.setClickTracker(e),window.open(t)},c.prototype.setLayerViewability=function(i,o){var n=i?o:r.UNVIEWABILITY,a=null,s=this.game.getCurrentQuestionNumber()-1;return e.result(this,"adSpots["+s+"]",!1)&&(e.isNil(this.adSpots[s].closeType)||this.adSpots[s].closeType===r.NONE)?(a=this.adSpots[s],a.Id=parseInt(this.view.getInItemAdId(s))):e.isNil(this.game)?t.errorM(l+".setLayerViewability",l+".setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):a=this.game.getCurrentQuestionItem(),a&&(a.setViewOrder(this.itemsViewOrder),a.setDisplayOrder(this.itemsDisplayOrder),a.setViewable(i),a.setOpenType(n),a.setCloseType(r.NONE),this.itemsForAnalytics.push(a)),this},c.prototype.setItemsViewability=function(i,o,n){var a=i?n:r.NONE,s=i?r.NONE:n;if(e.isNil(this.game))t.errorM(l+".setItemsViewability",l+".setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname);else{var d=this.game.getCurrentQuestionItem();this.updateItemsForAnalytics(d,i,a,s,o)}return this},c.prototype.setGameViewability=function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=o?r.ENDING_SCREEN_AUTOPLAY:r.ENDING_SCREEN,a=i?n:r.NONE,s=i?r.NONE:n;return e.isNil(this.game)?t.errorM(l+".setItemsViewability",l+".setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):this.updateItemsForAnalytics(this.game,i,a,s),this},c.prototype.updateItemsForAnalytics=function(i,o,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return e.isNil(i)?void t.warnM(l+".updateItemsForAnalytics",l+".updateItemsForAnalytics failed to report empty item"):(i.setViewable(o),i.isViewable&&(this.itemsViewOrder+=1,i.setViewOrder(this.itemsViewOrder),this.itemsDisplayOrder+=1,i.setDisplayOrder(this.itemsDisplayOrder)),i.setUserAnswerId(r),i.setOpenType(n),i.setCloseType(a),void this.itemsForAnalytics.push(i))},c.prototype.reportAndClearItems=function(){return o.setItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[],this},c.prototype.endGameClickTracking=function(){o.setClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},c.prototype.getTriviaType=function(){return d},c}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopTriviaMultiView=Cbola.InContent.Layers.DesktopTriviaMultiView||function(){var e=Cbola._,t=Cbola.Utils,i=Cbola.EventBus,o=Cbola.Common.FontsManager,n=Cbola.Common.UserService,a=Cbola.Logger.getInstance(),r=Cbola.InContent.Components.SpinnerTimer,s=Cbola.Styles,l=function(e){var t=e.className,i=void 0===t?"cbola-page-item":t,o=e.toActive,n=void 0===o?null:o,a=e.toPrev,r=void 0===a?null:a,s=e.toNext,l=void 0===s?null:s;r&&(r.classList.remove(i+"--active"),r.classList.add(i+"--prev")),n&&(n.classList.remove(i+"--next"),n.classList.add(i+"--active")),l&&(l.classList.remove(i+"--active"),l.classList.remove(i+"--prev"),l.classList.add(i+"--next"))},d=function(e){var t=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:[{Description:e}]}).querySelector(".cbola-d-trivia-multi__question");return l({toNext:t}),t},c=function(e){this.ignoreUserInput=!0,this.isAttached=!1,this.presenter=e,this.container=this.presenter.container,this.element=Cbola.Templates.createElement("desktop_trivia_multi_view.html"),this.lastImageIdx=0,this.uiItems=[],this.pausedTimer=null,this.bind()};c.prototype={bind:function(){this.answersContainer=this.element.querySelector(".cbola-d-trivia-multi__answer-list-container"),this.imageContainer=this.element.querySelector(".cbola-d-trivia-multi_image-container"),this.questionsContainer=this.element.querySelector(".cbola-d-trivia-multi__question-container"),this.gameEndingScreen=new m({view:this,presenter:this.presenter}),this.shareInGame=this.element.querySelector(".cbola-d-trivia-multi__share"),this.titleElem=this.element.querySelector(".cbola-d-trivia-multi__game-header"),this.footer=this.element.querySelector(".cbola-d-trivia-multi__content-footer"),this.logoContainer=this.element.querySelector(".cbola-d-trivia-multi__logo-container"),this.poweredBy=this.element.querySelector(".cbola-d-trivia-multi__logo"),this.addThisWidgetContact=this.logoContainer.querySelector(".cbola-d-trivia-multi__add-this"),this.addThisWidgetContact.textContent=n.vocabulary("addThisWidgetToYourSite"),this.scoreElem=this.element.querySelector(".cbola-d-trivia-multi-footer__score"),this.progressElem=this.element.querySelector(".cbola-d-trivia-multi-footer__progress");var e=this.element.querySelector(".cbola-d-trivia-multi__timer-placeholder");this.inGameTimer=new r({type:r.Types.UNFILL}).init(),this.inGameTimerWrapper=this.inGameTimer.getTimerWrapperElement(),this.inGameTimerEndedEvent=this.inGameTimer.replacePlaceholder(e).getTimerEndedEvent(),this.addEventListeners()},addEventListeners:function(){var t=this;window.addEventListener("resize",e.debounce(this.onResize.bind(this),150,{leading:!1,trailing:!0})),i.addEventListener(i.Events.RESIZE_ON_AD+this.presenter.elementId,function(){setTimeout(t.onResize.bind(t),10)}),this.answersContainer.addEventListener("click",function(e){t.ignoreUserInput||t.onUserAnswered(e)}),this.shareInGame.addEventListener("click",function(e){t.ignoreUserInput||t.presenter.onShareInGame(e.target)}),i.addEventListener(this.inGameTimerEndedEvent,function(){t.presenter.onUserAnswered(0,null)}),this.logoContainer.addEventListener("click",function(e){t.presenter.onPoweredBy(e.target===t.poweredBy)}),e.forEach([this.questionsContainer,this.imageContainer],function(e){e.addEventListener("click",function(){t.ignoreUserInput||t.presenter.openCurrentQuestionLink()})})},onResize:function(){var e=this.element.clientWidth;this.element.classList.remove("cbola-d-trivia-multi-sm"),this.element.classList.remove("cbola-d-trivia-multi-md"),500>e?this.element.classList.add("cbola-d-trivia-multi-sm"):575>e&&this.element.classList.add("cbola-d-trivia-multi-md")},onUserAnswered:function(e){for(var i=e.target;i!==e.currentTarget&&i;){if(i.classList.contains("cbola-d-trivia-multi__answer")){var o=t.dataset(i,"answerId");if(o)return this.presenter.onUserAnswered(o,i),this}i=i.parentElement}},reset:function(){return this.uiItems=[],this.uiItemsLength=0,this.lastImageIdx=0,this.answersContainer.innerHTML="",this.imageContainer.innerHTML="",this.questionsContainer.innerHTML="",this.setScore("0"),this},applyViewOptions:function(e){var t=this;if(this.options=e,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId,s.injectThemeStyle(document,"cbola_layer_121_theme.css",this.options),this.inGameTimer.setDuration(e.DesktopMultiTriviaInGameTimerDuration),e.BrandImg?(this.poweredBy.style["background"]="url('"+e.BrandImg+"') no-repeat 0 50% / contain",this.poweredBy.style["width"]="95%",this.poweredBy.style["margin-right"]="5%",this.poweredBy.classList.remove("cbola-d-trivia-multi__carambola_logo")):Cbola.Env.PageProperties.isTablet||Cbola.Env.PageProperties.isMobile||(this.logoContainer.addEventListener("mouseenter",function(){clearTimeout(t.logoInVisibleTimeout),t.logoVisibleTimeout=setTimeout(function(){t.addThisWidgetContact.classList.remove("cbola-fade-out")},750)}),this.logoContainer.addEventListener("mouseleave",function(){clearTimeout(t.logoVisibleTimeout),t.logoInVisibleTimeout=setTimeout(function(){t.addThisWidgetContact.classList.add("cbola-fade-out")},500)})),e.DesktopMultiTriviaDisplayAnswerLetters&&43!==Cbola.Config.abTestId)switch(this.answersContainer.classList.add("cbola-d-trivia-multi__answers-letters"),Cbola.Config.abTestId){case 41:this.answersContainer.classList.add("cbola-d-trivia-multi__tabbed-answer");break;case 42:this.answersContainer.classList.add("cbola-d-trivia-multi__circle-answer")}if(e.DesktopMultiTriviaAdvertisementTitle){var i=Cbola.Templates.createElement("advertisement_title.html");this.presenter.topContainer.insertBefore(i,this.container)}this.gameEndingScreen.applyViewOptions(e)},adjustLanguage:function(){this.element.querySelector(".cbola-d-trivia-multi-footer__your-score").textContent=n.vocabulary("yourScore"),this.element.querySelector(".cbola-d-trivia-multi-footer__question").textContent=n.vocabulary("question"),this.element.classList.add("cbola-d-trivia-multi--"+n.getLanguage()),this.gameEndingScreen.adjustLanguage()},addItems:function(e){for(var t=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_image.html",{Items:e}),i=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_questions.html",{Items:e}),o=Cbola.Templates.createFragmentFromTemplate("desktop_trivia_multi_answers.html",{Items:e}),n=t.querySelectorAll(".cbola-d-trivia-multi_image-loader"),a=t.querySelectorAll(".cbola-loader"),r=i.querySelectorAll(".cbola-d-trivia-multi__question"),s=o.querySelectorAll(".cbola-d-trivia-multi__answers-list"),l=0;l<e.length;l++)this.uiItems.push({answerElem:s.item(l),descElem:r.item(l),imgElem:n.item(l),imgCover:n.item(l).querySelector(".cbola-d-trivia-multi__image"),imgUrl:e[l].Image,loaderElem:a.item(l)});return this.uiItemsLength=this.uiItems.length,this.setProgress("1"),this.answersContainer.appendChild(o),this.questionsContainer.appendChild(i),this.imageContainer.appendChild(t),this},attach:function(t){o.getOpenSans(),o.getOswald(),o.getRoboto(),this.isAttached||(this.isAttached=!0,e.isUndefined(this.styleElem)&&(this.styleElem=s.injectMainStyle(window.document,"cbola_layer_121.css")),t.appendChild(this.element),this.container=t,this.onResize())},detach:function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},onLoad:function(){var e=function(){this.container.removeEventListener("mouseenter",e),this.presenter.onMouseEnter()}.bind(this);this.container.addEventListener("mouseenter",e)},gotoQuestion:function(e){var t=void 0,i=void 0;!this.ignoreUserInput&&e&&(this.disableUserInput(600),t=this.uiItems[e-1],i=this.uiItems[e],l({toPrev:t.descElem,toActive:i.descElem}),l({toPrev:t.imgElem,toActive:i.imgElem,className:"cbola-d-trivia-multi__image"}),l({toPrev:t.answerElem,toActive:i.answerElem}),this.inGameTimer.setDuration(this.options.DesktopMultiTriviaInGameTimerDuration),setTimeout(this.inGameTimer.startTimer.bind(this.inGameTimer),600),this.loadImagesIfNeeded(e),this.setProgress(e+1))},loadImagesIfNeeded:function(e){return this.lastImageIdx<e+2&&this.loadNextImages(2),this},loadNextImages:function(e){for(var t=this.lastImageIdx+e,i=this.lastImageIdx;i<Math.min(t,this.uiItemsLength);i++,this.lastImageIdx++){var o=new Image;o.itemImage=this.uiItems[i].imgElem,o.itemImageCover=this.uiItems[i].imgCover,o.loaderElem=this.uiItems[i].loaderElem,o.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImageCover.style["background-image"]='url("'+this.src+'")'},o.src=this.uiItems[i].imgUrl}},disableUserInput:function(e){var t=this;this.ignoreUserInput=!0,setTimeout(function(){t.presenter.isViewable&&(t.ignoreUserInput=!1)},e)},setTitle:function(e){return this.titleElem.innerHTML=e,this},setScore:function(e){this.scoreElem.textContent=e},setProgress:function(e){this.progressElem.textContent=e+"/"+this.uiItemsLength},startGame:function(){this.ignoreUserInput=!1,this.inGameTimer.startTimer()},playFeedbackAnimation:function(t,i,o,n){var a=this.uiItems[t],r=a.answerElem.querySelectorAll(".cbola-d-trivia-multi__answer"),s=void 0,l=void 0,d=void 0,c=void 0,m=void 0;this.inGameTimer.stopTimer(),e.isNil(o)||(m=r[o]),s=!e.isNil(i)&&i===m,l=s?"correct":"wrong",d=!s&&i?1100:600,c=!s&&i?400:0,this.disableUserInput(d),e.isNil(i)||i.classList.add("cbola-d-trivia-multi__answer-"+l),m&&!s&&setTimeout(function(){m.classList.add("cbola-d-trivia-multi__answer-correct")},400),m&&setTimeout(function(){e.forEach(r,function(e){e!==m&&e!==i&&e.classList.add("cbola-d-trivia-multi__answer-fade")})},Math.max(c-300,0)),setTimeout(function(){n&&n()},d)},applyGameEndedUI:function(){var e=this;this.uiItems[this.uiItemsLength-1].answerElem.style["pointer-events"]="none",this.footer.classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg&&(this.titleElem.style["opacity"]=.3,this.answersContainer.style["opacity"]=.3),setTimeout(function(){e.inGameTimerWrapper.classList.add("cbola-fade-out")},600)},removeGameEndedUI:function(){this.footer.classList.remove("cbola-fade-out"),this.inGameTimerWrapper.classList.remove("cbola-fade-out")},resumeTimer:function(e){var t=this;this.pausedTimer=this.pausedTimer||(e?this.gameEndingScreen.endGameTimer:this.inGameTimer),this.pausedTimer&&(this.pausedTimer.startTimer(),a.info("MultiTriviaView resumed timer: ",this.pausedTimer),this.pausedTimer=null,requestAnimationFrame(function(){t.ignoreUserInput=!1}))},pauseTimer:function(e){this.ignoreUserInput=!0,this.pausedTimer=e?this.gameEndingScreen.getTimer():this.inGameTimer,
this.pausedTimer&&(a.info("MultiTriviaView paused timer: ",this.pausedTimer),this.pausedTimer.stopTimer().reset())}};var m=function(){function e(t){_classCallCheck2(this,e),this.hostingView=t.view,this.presenter=t.presenter,this.containingElement=t.view.element,this.bind()}return _createClass2(e,[{key:"bind",value:function(){this.element=this.containingElement.querySelector(".cbola-d-trivia-multi-game-end"),this.shareEndGame=this.element.querySelector(".cbola-d-trivia-multi-game-end__share");var e=this.element.querySelector(".cbola-d-trivia-multi-game-end__timer-placeholder");this.endGameTimer=new r({type:r.Types.RUN}).init(),this.endGameTimerEndedEvent=this.endGameTimer.replacePlaceholder(e).getTimerEndedEvent(),this.startNextOverlay=this.containingElement.querySelector(".cbola-d-trivia-multi__next-game"),this.startNextQuizButton=this.startNextOverlay.querySelector(".cbola-d-trivia-multi__start-next-button"),this.addEventHandlers()}},{key:"addEventHandlers",value:function(){var e=this;this.shareEndGame.addEventListener("click",function(t){e.presenter.onShareEndGame(t.target),t.stopPropagation()}),i.addEventListener(this.endGameTimerEndedEvent,function(){a.info("MultiTriviaView started next game by timerEnd"),e.presenter.startNextGame(!0)}),this.startNextQuizButton.addEventListener("click",function(){e.endGameTimer.stopTimer(),a.info("MultiTriviaView started next game by click"),e.presenter.startNextGame(!1)})}},{key:"applyViewOptions",value:function(e){var t=this;this.options=e,e.DesktopMultiTriviaEndGameLink&&this.element.addEventListener("click",function(){t.presenter.endGameClickTracking(),window.open(e.DesktopMultiTriviaEndGameLink)})}},{key:"adjustLanguage",value:function(){this.element.querySelector(".cbola-d-trivia-multi-game-end__challenge").textContent=n.vocabulary("challenge"),this.element.querySelector(".cbola-d-trivia-multi-game-end__your-friends").textContent=n.vocabulary("yourFriends"),this.element.querySelector(".cbola-d-trivia-multi-game-end__next-quiz").textContent=n.vocabulary("nextQuiz","startsIn"),this.startNextQuizButton.textContent=n.vocabulary("start","nextQuiz")}},{key:"setGameEndedText",value:function(e){return this.element.querySelector(".cbola-d-trivia-multi-game-end__text").textContent=e,this.element.querySelector(".cbola-d-trivia-multi-game-end__score").textContent=this.presenter.getGameScore()+"/"+this.hostingView.uiItemsLength,this}},{key:"setNextGameUI",value:function(e){return e&&!this.options.DesktopMultiTriviaEndGameImg?this.nextGameTeaser(e):this.freezeEndingScreen(),this}},{key:"nextGameTeaser",value:function(e){var t=this,i=d(n.vocabulary("upNext")+": "+e.shortTitle);this.hostingView.questionsContainer.appendChild(i),setTimeout(function(){var e=t.hostingView.uiItems[t.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-wrong");e&&(e.classList.remove("cbola-d-trivia-multi__answer-wrong"),e.classList.add("cbola-d-trivia-multi__answer-fade"));var o=t.hostingView.uiItems[t.hostingView.uiItemsLength-1].answerElem.querySelector(".cbola-d-trivia-multi__answer-correct");o&&(o.classList.remove("cbola-d-trivia-multi__answer-correct"),o.classList.add("cbola-d-trivia-multi__answer-fade")),l({toPrev:t.hostingView.uiItems[t.hostingView.uiItemsLength-1].descElem,toActive:i}),t.endGameTimer.setDuration(t.options.DesktopMultiTriviaEndGameTimerDuration),t.startNextOverlay.classList.remove("cbola-hidden")},600)}},{key:"freezeEndingScreen",value:function(){var e=this;if(this.element.querySelector(".cbola-d-trivia-multi-game-end__teaser").classList.add("cbola-fade-out"),this.options.DesktopMultiTriviaEndGameImg){var t=d(n.vocabulary("thankYouForPlaying"));this.hostingView.questionsContainer.appendChild(t),setTimeout(function(){l({toPrev:e.hostingView.uiItems[e.hostingView.uiItems.length-1].descElem,toActive:t})},600),this.endGameTimer=null}else this.element.querySelector(".cbola-d-trivia-multi__game").style["opacity"]=.3}},{key:"toggleGameEndedAnimation",value:function(e){return e?this.openEndingScreen():this.closeEndingScreen(),this}},{key:"openEndingScreen",value:function(){var e=this;this.element.classList.add("cbola-d-trivia-multi-game-end--active"),setTimeout(function(){e.endGameTimer&&e.endGameTimer.startTimer()},600)}},{key:"closeEndingScreen",value:function(){this.startNextOverlay.classList.add("cbola-hidden"),this.element.classList.remove("cbola-d-trivia-multi-game-end--active")}},{key:"getTimer",value:function(){return this.endGameTimer}}]),e}();return c}(),Cbola.InContent.Layers.DesktopTriviaMultiLayer=function(){var e=Cbola._,t=Cbola.Logger.getInstance(),i=Cbola.Common.AnalyticsService,o=Cbola.InContent.Layers.Services.TriviaService,n=Cbola.Config,a=Cbola.Enums.ItemViewTypes,r=Cbola.EventBus,s=Cbola.InContent.Layers.CommonTriviaLayer,l=Cbola.InContent.Layers.DesktopTriviaMultiView,d=o.triviaTypes.MULTI_ANSWER,c=function(){s.call(this),this.view=new l(this),this.firstTimeLoad=!0},m=s.prototype;return e.extend(c.prototype,m),c.prototype.getTriviaType=function(){return d},c.prototype.onLoad=function(){var e=this;t.debug("DesktopTriviaMultiLayer::onLoad"),o.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){e.game=t,e.game&&(e.view.setTitle(e.game.title),e.view.addItems(e.game.items),e.view.attach(e.container),e.view.onLoad(),r.fire(r.Events.LAYER_READY,e),e.view.loadImagesIfNeeded(0))})},c.prototype.onUserAnswered=function(t,i){var o=this,n=e.isNil(i);this.setItemsViewability(!1,t,n?a.ON_NEXT_AUTOPLAY:a.ON_NEXT_BTN);var r=this.game.getCurrentQuestionCorrectAnswerIdx(),s=this.game.getCurrentQuestionNumber();this.game.answerCurrentQuestion(t),this.view.playFeedbackAnimation(s-1,i,r,function(){o.afterAnswerFeedbackAnimation(n)})},c.prototype.pageToNextQuestion=function(){this.view.setScore(this.game.score),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1),this.reportAndClearItems()},c.prototype.startNextGame=function(i){var o=this;if(!this.pendingNextGameToStart){if(this.pendingNextGameToStart=!0,e.isNil(this.nextGame))return t.errorM("DesktopTriviaMultiLayer.startNextGame","DesktopTriviaMultiLayer.startNextGame encountered null game stopping game restart. url: "+Cbola.Env.PageProperties.hostname),void t.info(this.game);this.setGameViewability(!1,i),this.view.removeGameEndedUI(),this.view.gameEndingScreen.toggleGameEndedAnimation(!1),this.game=this.nextGame,this.nextGame=null,this.view.reset().setTitle(this.game.title).addItems(this.game.items).loadImagesIfNeeded(0),this.game.setViewable(!0),this.setItemsViewability(!0,0,i?a.ON_NEXT_AUTOPLAY:a.ON_NEXT_BTN).reportAndClearItems(),setTimeout(function(){o.view.startGame(),o.pendingNextGameToStart=!1},400)}},c.prototype.openCurrentQuestionLink=function(){if(!e.isNil(this.game)){var t=this.game.getCurrentQuestionItem();t&&t.Link&&window.open(t.Link)}},c.prototype.onPoweredBy=function(e){var t=n.brandRedirectTemplate({layerType:this.type}),o=e?this.options.BrandRedirect||t:t;i.setClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),window.open(o)},c.prototype.onBecameViewable=function(t){m.onBecameViewable.call(this,t),this.firstTimeLoad?(this.firstTimeLoad=!1,this.view.startGame()):e.isNil(this.game)||this.view.resumeTimer(this.game.hasEnded())},c.prototype.onBecameUnviewable=function(){m.onBecameUnviewable.call(this),e.isNil(this.game)||this.view.pauseTimer(this.game.hasEnded())},c}();